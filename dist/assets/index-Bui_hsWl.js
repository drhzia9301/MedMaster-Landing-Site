import{r as hl,a as ha,g as un,b as ml}from"./vendor-B1sUnLqs.js";import{r as p,R as S,A as ct,M as ma,a as Vn,E as Ks,b as Js,c as hn,U as Dr,Z as Gn,L as fl,S as pl,C as gl,d as xl,e as yl,f as Kn,B as bl,G as vl,g as wl,h as _l,X as Ur,i as Jn,j as Yn,D as jl}from"./utils-Bx7yES4i.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var vr={exports:{}},ss={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn;function kl(){if(Xn)return ss;Xn=1;var s=hl(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(c,l,d){var h,u={},m=null,f=null;d!==void 0&&(m=""+d),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(f=l.ref);for(h in l)r.call(l,h)&&!a.hasOwnProperty(h)&&(u[h]=l[h]);if(c&&c.defaultProps)for(h in l=c.defaultProps,l)u[h]===void 0&&(u[h]=l[h]);return{$$typeof:e,type:c,key:m,ref:f,props:u,_owner:i.current}}return ss.Fragment=t,ss.jsx=o,ss.jsxs=o,ss}var Qn;function Nl(){return Qn||(Qn=1,vr.exports=kl()),vr.exports}var n=Nl(),Rs={},Zn;function Sl(){if(Zn)return Rs;Zn=1;var s=ha();return Rs.createRoot=s.createRoot,Rs.hydrateRoot=s.hydrateRoot,Rs}var El=Sl();const Il=un(El);/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ei="popstate";function Tl(s={}){function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return $r("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:hs(i)}return Cl(e,t,null,s)}function K(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ne(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pl(){return Math.random().toString(36).substring(2,10)}function ti(s,e){return{usr:s.state,key:s.key,idx:e}}function $r(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Jt(e):e,state:t,key:e&&e.key||r||Pl()}}function hs({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Jt(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function Cl(s,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",l=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function u(){c="POP";let y=h(),x=y==null?null:y-d;d=y,l&&l({action:c,location:b.location,delta:x})}function m(y,x){c="PUSH";let N=$r(b.location,y,x);d=h()+1;let v=ti(N,d),k=b.createHref(N);try{o.pushState(v,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(k)}a&&l&&l({action:c,location:b.location,delta:1})}function f(y,x){c="REPLACE";let N=$r(b.location,y,x);d=h();let v=ti(N,d),k=b.createHref(N);o.replaceState(v,"",k),a&&l&&l({action:c,location:b.location,delta:0})}function g(y){return Al(y)}let b={get action(){return c},get location(){return s(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ei,u),l=y,()=>{i.removeEventListener(ei,u),l=null}},createHref(y){return e(i,y)},createURL:g,encodeLocation(y){let x=g(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:f,go(y){return o.go(y)}};return b}function Al(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),K(t,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:hs(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function fa(s,e,t="/"){return Rl(s,e,t,!1)}function Rl(s,e,t,r){let i=typeof e=="string"?Jt(e):e,a=Ge(i.pathname||"/",t);if(a==null)return null;let o=pa(s);Ol(o);let c=null;for(let l=0;c==null&&l<o.length;++l){let d=Hl(a);c=Wl(o[l],d,r)}return c}function pa(s,e=[],t=[],r="",i=!1){let a=(o,c,l=i,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&l)return;K(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let u=Ve([r,h.relativePath]),m=t.concat(h);o.children&&o.children.length>0&&(K(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),pa(o.children,e,m,u,l)),!(o.path==null&&!o.index)&&e.push({path:u,score:Fl(u,o.index),routesMeta:m})};return s.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let l of ga(o.path))a(o,c,!0,l)}),e}function ga(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=ga(r.join("/")),c=[];return c.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&c.push(...o),c.map(l=>s.startsWith("/")&&l===""?"/":l)}function Ol(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:ql(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Ll=/^:[\w-]+$/,Ml=3,Dl=2,Ul=1,$l=10,Bl=-2,si=s=>s==="*";function Fl(s,e){let t=s.split("/"),r=t.length;return t.some(si)&&(r+=Bl),e&&(r+=Dl),t.filter(i=>!si(i)).reduce((i,a)=>i+(Ll.test(a)?Ml:a===""?Ul:$l),r)}function ql(s,e){return s.length===e.length&&s.slice(0,-1).every((r,i)=>r===e[i])?s[s.length-1]-e[e.length-1]:0}function Wl(s,e,t=!1){let{routesMeta:r}=s,i={},a="/",o=[];for(let c=0;c<r.length;++c){let l=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",u=Ys({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},h),m=l.route;if(!u&&d&&t&&!r[r.length-1].route.index&&(u=Ys({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Ve([a,u.pathname]),pathnameBase:Jl(Ve([a,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(a=Ve([a,u.pathnameBase]))}return o}function Ys(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=zl(s.path,s.caseSensitive,s.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:u},m)=>{if(h==="*"){let g=c[m]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const f=c[m];return u&&!f?d[h]=void 0:d[h]=(f||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:s}}function zl(s,e=!1,t=!0){Ne(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,l)=>(r.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Hl(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ne(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ge(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}function Vl(s,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof s=="string"?Jt(s):s;return{pathname:t?t.startsWith("/")?t:Gl(t,e):e,search:Yl(r),hash:Xl(i)}}function Gl(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function wr(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Kl(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xa(s){let e=Kl(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function ya(s,e,t,r=!1){let i;typeof s=="string"?i=Jt(s):(i={...s},K(!i.pathname||!i.pathname.includes("?"),wr("?","pathname","search",i)),K(!i.pathname||!i.pathname.includes("#"),wr("#","pathname","hash",i)),K(!i.search||!i.search.includes("#"),wr("#","search","hash",i)));let a=s===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let u=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),u-=1;i.pathname=m.join("/")}c=u>=0?e[u]:"/"}let l=Vl(i,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(d||h)&&(l.pathname+="/"),l}var Ve=s=>s.join("/").replace(/\/\/+/g,"/"),Jl=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Yl=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Xl=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Ql(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var ba=["POST","PUT","PATCH","DELETE"];new Set(ba);var Zl=["GET",...ba];new Set(Zl);var Yt=p.createContext(null);Yt.displayName="DataRouter";var lr=p.createContext(null);lr.displayName="DataRouterState";p.createContext(!1);var va=p.createContext({isTransitioning:!1});va.displayName="ViewTransition";var ec=p.createContext(new Map);ec.displayName="Fetchers";var tc=p.createContext(null);tc.displayName="Await";var Re=p.createContext(null);Re.displayName="Navigation";var ys=p.createContext(null);ys.displayName="Location";var Ye=p.createContext({outlet:null,matches:[],isDataRoute:!1});Ye.displayName="Route";var mn=p.createContext(null);mn.displayName="RouteError";function sc(s,{relative:e}={}){K(bs(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=p.useContext(Re),{hash:i,pathname:a,search:o}=vs(s,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Ve([t,a])),r.createHref({pathname:c,search:o,hash:i})}function bs(){return p.useContext(ys)!=null}function dt(){return K(bs(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(ys).location}var wa="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _a(s){p.useContext(Re).static||p.useLayoutEffect(s)}function Xt(){let{isDataRoute:s}=p.useContext(Ye);return s?pc():rc()}function rc(){K(bs(),"useNavigate() may be used only in the context of a <Router> component.");let s=p.useContext(Yt),{basename:e,navigator:t}=p.useContext(Re),{matches:r}=p.useContext(Ye),{pathname:i}=dt(),a=JSON.stringify(xa(r)),o=p.useRef(!1);return _a(()=>{o.current=!0}),p.useCallback((l,d={})=>{if(Ne(o.current,wa),!o.current)return;if(typeof l=="number"){t.go(l);return}let h=ya(l,JSON.parse(a),i,d.relative==="path");s==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ve([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,a,i,s])}p.createContext(null);function vs(s,{relative:e}={}){let{matches:t}=p.useContext(Ye),{pathname:r}=dt(),i=JSON.stringify(xa(t));return p.useMemo(()=>ya(s,JSON.parse(i),r,e==="path"),[s,i,r,e])}function nc(s,e){return ja(s,e)}function ja(s,e,t,r){K(bs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=p.useContext(Re),{matches:a}=p.useContext(Ye),o=a[a.length-1],c=o?o.params:{},l=o?o.pathname:"/",d=o?o.pathnameBase:"/",h=o&&o.route;{let x=h&&h.path||"";ka(l,!h||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let u=dt(),m;if(e){let x=typeof e=="string"?Jt(e):e;K(d==="/"||x.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${x.pathname}" was given in the \`location\` prop.`),m=x}else m=u;let f=m.pathname||"/",g=f;if(d!=="/"){let x=d.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=fa(s,{pathname:g});Ne(h||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Ne(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=cc(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:Ve([d,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:Ve([d,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,t,r);return e&&y?p.createElement(ys.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},y):y}function ic(){let s=fc(),e=Ql(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=p.createElement(p.Fragment,null,p.createElement("p",null,"💿 Hey developer 👋"),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:a},"ErrorBoundary")," or"," ",p.createElement("code",{style:a},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),t?p.createElement("pre",{style:i},t):null,o)}var ac=p.createElement(ic,null),oc=class extends p.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?p.createElement(Ye.Provider,{value:this.props.routeContext},p.createElement(mn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lc({routeContext:s,match:e,children:t}){let r=p.useContext(Yt);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),p.createElement(Ye.Provider,{value:s},t)}function cc(s,e=[],t=null,r=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let i=s,a=t?.errors;if(a!=null){let l=i.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);K(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,c=-1;if(t)for(let l=0;l<i.length;l++){let d=i[l];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=l),d.route.id){let{loaderData:h,errors:u}=t,m=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!u||u[d.route.id]===void 0);if(d.route.lazy||m){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((l,d,h)=>{let u,m=!1,f=null,g=null;t&&(u=a&&d.route.id?a[d.route.id]:void 0,f=d.route.errorElement||ac,o&&(c<0&&h===0?(ka("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,g=null):c===h&&(m=!0,g=d.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,h+1)),y=()=>{let x;return u?x=f:m?x=g:d.route.Component?x=p.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=l,p.createElement(lc,{match:d,routeContext:{outlet:l,matches:b,isDataRoute:t!=null},children:x})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?p.createElement(oc,{location:t.location,revalidation:t.revalidation,component:f,error:u,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}function fn(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dc(s){let e=p.useContext(Yt);return K(e,fn(s)),e}function uc(s){let e=p.useContext(lr);return K(e,fn(s)),e}function hc(s){let e=p.useContext(Ye);return K(e,fn(s)),e}function pn(s){let e=hc(s),t=e.matches[e.matches.length-1];return K(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function mc(){return pn("useRouteId")}function fc(){let s=p.useContext(mn),e=uc("useRouteError"),t=pn("useRouteError");return s!==void 0?s:e.errors?.[t]}function pc(){let{router:s}=dc("useNavigate"),e=pn("useNavigate"),t=p.useRef(!1);return _a(()=>{t.current=!0}),p.useCallback(async(i,a={})=>{Ne(t.current,wa),t.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:e,...a}))},[s,e])}var ri={};function ka(s,e,t){!e&&!ri[s]&&(ri[s]=!0,Ne(!1,t))}p.memo(gc);function gc({routes:s,future:e,state:t}){return ja(s,void 0,t,e)}function me(s){K(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xc({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1}){K(!bs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),c=p.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof t=="string"&&(t=Jt(t));let{pathname:l="/",search:d="",hash:h="",state:u=null,key:m="default"}=t,f=p.useMemo(()=>{let g=Ge(l,o);return g==null?null:{location:{pathname:g,search:d,hash:h,state:u,key:m},navigationType:r}},[o,l,d,h,u,m,r]);return Ne(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:p.createElement(Re.Provider,{value:c},p.createElement(ys.Provider,{children:e,value:f}))}function yc({children:s,location:e}){return nc(Br(s),e)}function Br(s,e=[]){let t=[];return p.Children.forEach(s,(r,i)=>{if(!p.isValidElement(r))return;let a=[...e,i];if(r.type===p.Fragment){t.push.apply(t,Br(r.props.children,a));return}K(r.type===me,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),K(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Br(r.props.children,a)),t.push(o)}),t}var qs="get",Ws="application/x-www-form-urlencoded";function cr(s){return s!=null&&typeof s.tagName=="string"}function bc(s){return cr(s)&&s.tagName.toLowerCase()==="button"}function vc(s){return cr(s)&&s.tagName.toLowerCase()==="form"}function wc(s){return cr(s)&&s.tagName.toLowerCase()==="input"}function _c(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function jc(s,e){return s.button===0&&(!e||e==="_self")&&!_c(s)}function Fr(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let r=s[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function kc(s,e){let t=Fr(s);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var Os=null;function Nc(){if(Os===null)try{new FormData(document.createElement("form"),0),Os=!1}catch{Os=!0}return Os}var Sc=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _r(s){return s!=null&&!Sc.has(s)?(Ne(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ws}"`),null):s}function Ec(s,e){let t,r,i,a,o;if(vc(s)){let c=s.getAttribute("action");r=c?Ge(c,e):null,t=s.getAttribute("method")||qs,i=_r(s.getAttribute("enctype"))||Ws,a=new FormData(s)}else if(bc(s)||wc(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=s.getAttribute("formaction")||c.getAttribute("action");if(r=l?Ge(l,e):null,t=s.getAttribute("formmethod")||c.getAttribute("method")||qs,i=_r(s.getAttribute("formenctype"))||_r(c.getAttribute("enctype"))||Ws,a=new FormData(c,s),!Nc()){let{name:d,type:h,value:u}=s;if(h==="image"){let m=d?`${d}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else d&&a.append(d,u)}}else{if(cr(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qs,r=null,i=Ws,o=s}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ic(s,e,t){let r=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ge(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function Tc(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Pc(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Cc(s,e,t){let r=await Promise.all(s.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await Tc(a,t);return o.links?o.links():[]}return[]}));return Lc(r.flat(1).filter(Pc).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ni(s,e,t,r,i,a){let o=(l,d)=>t[d]?l.route.id!==t[d].route.id:!0,c=(l,d)=>t[d].pathname!==l.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==l.params["*"];return a==="assets"?e.filter((l,d)=>o(l,d)||c(l,d)):a==="data"?e.filter((l,d)=>{let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,d)||c(l,d))return!0;if(l.route.shouldRevalidate){let u=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof u=="boolean")return u}return!0}):[]}function Ac(s,e,{includeHydrateFallback:t}={}){return Rc(s.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Rc(s){return[...new Set(s)]}function Oc(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function Lc(s,e){let t=new Set;return new Set(e),s.reduce((r,i)=>{let a=JSON.stringify(Oc(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function Na(){let s=p.useContext(Yt);return gn(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Mc(){let s=p.useContext(lr);return gn(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var xn=p.createContext(void 0);xn.displayName="FrameworkContext";function Sa(){let s=p.useContext(xn);return gn(s,"You must render this element inside a <HydratedRouter> element"),s}function Dc(s,e){let t=p.useContext(xn),[r,i]=p.useState(!1),[a,o]=p.useState(!1),{onFocus:c,onBlur:l,onMouseEnter:d,onMouseLeave:h,onTouchStart:u}=e,m=p.useRef(null);p.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let b=x=>{x.forEach(N=>{o(N.isIntersecting)})},y=new IntersectionObserver(b,{threshold:.5});return m.current&&y.observe(m.current),()=>{y.disconnect()}}},[s]),p.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let f=()=>{i(!0)},g=()=>{i(!1),o(!1)};return t?s!=="intent"?[a,m,{}]:[a,m,{onFocus:rs(c,f),onBlur:rs(l,g),onMouseEnter:rs(d,f),onMouseLeave:rs(h,g),onTouchStart:rs(u,f)}]:[!1,m,{}]}function rs(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function Uc({page:s,...e}){let{router:t}=Na(),r=p.useMemo(()=>fa(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?p.createElement(Bc,{page:s,matches:r,...e}):null}function $c(s){let{manifest:e,routeModules:t}=Sa(),[r,i]=p.useState([]);return p.useEffect(()=>{let a=!1;return Cc(s,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[s,e,t]),r}function Bc({page:s,matches:e,...t}){let r=dt(),{manifest:i,routeModules:a}=Sa(),{basename:o}=Na(),{loaderData:c,matches:l}=Mc(),d=p.useMemo(()=>ni(s,e,l,i,r,"data"),[s,e,l,i,r]),h=p.useMemo(()=>ni(s,e,l,i,r,"assets"),[s,e,l,i,r]),u=p.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let g=new Set,b=!1;if(e.forEach(x=>{let N=i.routes[x.route.id];!N||!N.hasLoader||(!d.some(v=>v.route.id===x.route.id)&&x.route.id in c&&a[x.route.id]?.shouldRevalidate||N.hasClientLoader?b=!0:g.add(x.route.id))}),g.size===0)return[];let y=Ic(s,o,"data");return b&&g.size>0&&y.searchParams.set("_routes",e.filter(x=>g.has(x.route.id)).map(x=>x.route.id).join(",")),[y.pathname+y.search]},[o,c,r,i,d,e,s,a]),m=p.useMemo(()=>Ac(h,i),[h,i]),f=$c(h);return p.createElement(p.Fragment,null,u.map(g=>p.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...t})),m.map(g=>p.createElement("link",{key:g,rel:"modulepreload",href:g,...t})),f.map(({key:g,link:b})=>p.createElement("link",{key:g,nonce:t.nonce,...b})))}function Fc(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ea=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ea&&(window.__reactRouterVersion="7.8.1")}catch{}function qc({basename:s,children:e,window:t}){let r=p.useRef();r.current==null&&(r.current=Tl({window:t,v5Compat:!0}));let i=r.current,[a,o]=p.useState({action:i.action,location:i.location}),c=p.useCallback(l=>{p.startTransition(()=>o(l))},[o]);return p.useLayoutEffect(()=>i.listen(c),[i,c]),p.createElement(xc,{basename:s,children:e,location:a.location,navigationType:a.action,navigator:i})}var Ia=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ta=p.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:l,to:d,preventScrollReset:h,viewTransition:u,...m},f){let{basename:g}=p.useContext(Re),b=typeof d=="string"&&Ia.test(d),y,x=!1;if(typeof d=="string"&&b&&(y=d,Ea))try{let C=new URL(window.location.href),O=d.startsWith("//")?new URL(C.protocol+d):new URL(d),z=Ge(O.pathname,g);O.origin===C.origin&&z!=null?d=z+O.search+O.hash:x=!0}catch{Ne(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=sc(d,{relative:i}),[v,k,_]=Dc(r,m),w=Vc(d,{replace:o,state:c,target:l,preventScrollReset:h,relative:i,viewTransition:u});function j(C){e&&e(C),C.defaultPrevented||w(C)}let E=p.createElement("a",{...m,..._,href:y||N,onClick:x||a?e:j,ref:Fc(f,k),target:l,"data-discover":!b&&t==="render"?"true":void 0});return v&&!b?p.createElement(p.Fragment,null,E,p.createElement(Uc,{page:N})):E});Ta.displayName="Link";var Wc=p.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:l,...d},h){let u=vs(o,{relative:d.relative}),m=dt(),f=p.useContext(lr),{navigator:g,basename:b}=p.useContext(Re),y=f!=null&&Xc(u)&&c===!0,x=g.encodeLocation?g.encodeLocation(u).pathname:u.pathname,N=m.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(N=N.toLowerCase(),v=v?v.toLowerCase():null,x=x.toLowerCase()),v&&b&&(v=Ge(v,b)||v);const k=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let _=N===x||!i&&N.startsWith(x)&&N.charAt(k)==="/",w=v!=null&&(v===x||!i&&v.startsWith(x)&&v.charAt(x.length)==="/"),j={isActive:_,isPending:w,isTransitioning:y},E=_?e:void 0,C;typeof r=="function"?C=r(j):C=[r,_?"active":null,w?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(j):a;return p.createElement(Ta,{...d,"aria-current":E,className:C,ref:h,style:O,to:o,viewTransition:c},typeof l=="function"?l(j):l)});Wc.displayName="NavLink";var zc=p.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:o=qs,action:c,onSubmit:l,relative:d,preventScrollReset:h,viewTransition:u,...m},f)=>{let g=Jc(),b=Yc(c,{relative:d}),y=o.toLowerCase()==="get"?"get":"post",x=typeof c=="string"&&Ia.test(c),N=v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let k=v.nativeEvent.submitter,_=k?.getAttribute("formmethod")||o;g(k||v.currentTarget,{fetcherKey:e,method:_,navigate:t,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:u})};return p.createElement("form",{ref:f,method:y,action:b,onSubmit:r?l:N,...m,"data-discover":!x&&s==="render"?"true":void 0})});zc.displayName="Form";function Hc(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pa(s){let e=p.useContext(Yt);return K(e,Hc(s)),e}function Vc(s,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Xt(),l=dt(),d=vs(s,{relative:a});return p.useCallback(h=>{if(jc(h,e)){h.preventDefault();let u=t!==void 0?t:hs(l)===hs(d);c(s,{replace:u,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[l,c,d,t,r,e,s,i,a,o])}function Ca(s){Ne(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=p.useRef(Fr(s)),t=p.useRef(!1),r=dt(),i=p.useMemo(()=>kc(r.search,t.current?null:e.current),[r.search]),a=Xt(),o=p.useCallback((c,l)=>{const d=Fr(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+d,l)},[a,i]);return[i,o]}var Gc=0,Kc=()=>`__${String(++Gc)}__`;function Jc(){let{router:s}=Pa("useSubmit"),{basename:e}=p.useContext(Re),t=mc();return p.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:l,body:d}=Ec(r,e);if(i.navigate===!1){let h=i.fetcherKey||Kc();await s.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:d,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await s.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:d,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,e,t])}function Yc(s,{relative:e}={}){let{basename:t}=p.useContext(Re),r=p.useContext(Ye);K(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...vs(s||".",{relative:e})},o=dt();if(s==null){a.search=o.search;let c=new URLSearchParams(a.search),l=c.getAll("index");if(l.some(h=>h==="")){c.delete("index"),l.filter(u=>u).forEach(u=>c.append("index",u));let h=c.toString();a.search=h?`?${h}`:""}}return(!s||s===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ve([t,a.pathname])),hs(a)}function Xc(s,{relative:e}={}){let t=p.useContext(va);K(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Pa("useViewTransitionState"),i=vs(s,{relative:e});if(!t.isTransitioning)return!1;let a=Ge(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ge(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ys(i.pathname,o)!=null||Ys(i.pathname,a)!=null}var Qc=ha();const Zc=un(Qc),ns=({className:s})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[n.jsx("path",{d:"M12 5a3.5 3.5 0 0 0-3.5 3.5c0 .5.1 1 .3 1.5.2.5.4 1 .7 1.5.3.5.6 1 .9 1.5.3.5.7 1 1.1 1.5.4.5.8 1 1.2 1.5.4.5.9 1 1.4 1.5.5.5 1 .9 1.5 1.4.5.4.9.8 1.4 1.2.5.4 1 .8 1.5 1.2.5.4.9.7 1.5.9.5.2 1 .4 1.5.7.5.2 1 .3 1.5.3a3.5 3.5 0 0 0 3.5-3.5c0-.5-.1-1-.3-1.5s-.4-1-.7-1.5c-.3-.5-.6-1-.9-1.5s-.7-1-1.1-1.5c-.4-.5-.8-1-1.2-1.5s-.9-1-1.4-1.5c-.5-.5-1-.9-1.5-1.4c-.5-.4-.9-.8-1.4-1.2c-.5-.4-1-.8-1.5-1.2s-.9-.7-1.5-.9c-.5-.2-1-.4-1.5-.7c-.5-.2-1-.3-1.5-.3Z"}),n.jsx("path",{d:"M12 5a3.5 3.5 0 0 1 3.5 3.5c0 .5-.1 1-.3 1.5s-.4 1-.7 1.5c-.3.5-.6 1-.9 1.5s-.7 1-1.1 1.5c-.4.5-.8 1-1.2 1.5s-.9 1-1.4 1.5c-.5.5-1 .9-1.5 1.4s-.9.8-1.4 1.2c-.5.4-1 .8-1.5 1.2s-.9.7-1.5.9c-.5.2-1 .4-1.5.7s-1 .3-1.5.3a3.5 3.5 0 0 1-3.5-3.5c0-.5.1-1 .3-1.5s.4-1 .7-1.5c.3-.5.6-1 .9-1.5s.7-1 1.1-1.5c.4-.5.8-1 1.2-1.5s.9-1 1.4-1.5c.5-.5 1-.9 1.5-1.4s.9-.8 1.4-1.2c.5-.4 1-.8 1.5-1.2s.9-.7 1.5-.9c.5-.2 1-.4 1.5-.7s1-.3 1.5-.3Z"})]}),ii=({className:s})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[n.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),n.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),n.jsx("path",{d:"M4 22h16"}),n.jsx("path",{d:"M10 14.5a2.5 2.5 0 0 0 4 0"}),n.jsx("path",{d:"M8 22V11c0-1.66 1.34-3 3-3h2c1.66 0 3 1.34 3 3v11"})]}),dr=({className:s})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[n.jsx("path",{d:"M12 20h-4a2 2 0 0 1 -2 -2V12a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v4"}),n.jsx("path",{d:"M12 10V6a2 2 0 0 1 2 -2h2"}),n.jsx("path",{d:"M12 6a2 2 0 0 0 -2 -2H8"}),n.jsx("path",{d:"M16 4a2 2 0 0 1 2 2"}),n.jsx("path",{d:"M8 4a2 2 0 0 0 -2 2"}),n.jsx("path",{d:"M12 20l0 -8"}),n.jsx("path",{d:"M8 20l-2 -4"}),n.jsx("path",{d:"M16 20l2 -4"}),n.jsx("path",{d:"M3 14h2"}),n.jsx("path",{d:"M19 14h2"})]}),ai=({className:s})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[n.jsx("path",{d:"M3 3v18h18"}),n.jsx("path",{d:"M9 17V9"}),n.jsx("path",{d:"M15 17V5"}),n.jsx("path",{d:"M12 17v-4"})]}),ed=()=>{const s=p.useCallback(i=>{typeof window<"u"&&window.gtag&&window.gtag("config","GA_MEASUREMENT_ID",{page_title:i,page_location:window.location.href})},[]),e=p.useCallback((i,a)=>{typeof window<"u"&&window.gtag&&window.gtag("event",i,{event_category:"engagement",event_label:a?.label||"",value:a?.value||0,...a})},[]),t=p.useCallback((i,a)=>{e("conversion",{action:i,value:a,event_category:"conversion"})},[e]),r=p.useCallback(()=>{let i=0;const a=()=>{const o=Math.round(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100);o>i&&(i=o,[25,50,75,90].includes(o)&&e("scroll_depth",{scroll_depth:o,event_category:"engagement"}))};return window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a)},[e]);return{trackPageView:s,trackEvent:e,trackConversion:t,trackScrollDepth:r}},Xs=s=>{const[e,t]=p.useState(!1),[r,i]=p.useState(!1),a=p.useRef(null);return p.useEffect(()=>{const o=a.current;if(!o)return;const c=new IntersectionObserver(([l])=>{t(l.isIntersecting),l.isIntersecting&&!r&&i(!0)},{threshold:.1,rootMargin:"50px",...s});return c.observe(o),()=>{c.unobserve(o)}},[r]),{targetRef:a,isIntersecting:e,hasIntersected:r}},td=(s,e)=>{const[t,r]=p.useState(e||""),[i,a]=p.useState(!1),[o,c]=p.useState(!1),{targetRef:l,hasIntersected:d}=Xs();return p.useEffect(()=>{if(!d)return;const h=new Image;h.onload=()=>{r(s),a(!0)},h.onerror=()=>{c(!0)},h.src=s},[s,d]),{targetRef:l,imageSrc:t,isLoaded:i,isError:o,hasIntersected:d}},Qs=({size:s="md",color:e="blue",className:t=""})=>{const r={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},i={white:"text-white",blue:"text-blue-500",gray:"text-gray-500",green:"text-green-500",red:"text-red-500"};return n.jsx("div",{className:`inline-block ${t}`,children:n.jsxs("svg",{className:`animate-spin ${r[s]} ${i[e]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},sd=({src:s,alt:e,className:t="",placeholder:r,fallbackSrc:i,onLoad:a,onError:o})=>{const[c,l]=p.useState(!1),{targetRef:d,imageSrc:h,isLoaded:u,isError:m}=td(s,r||`data:image/svg+xml;base64,${btoa(`
      <svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300">
        <rect width="400" height="300" fill="#374151"/>
        <text x="200" y="150" text-anchor="middle" fill="#9CA3AF" font-size="16" font-family="Arial">Loading...</text>
      </svg>
    `)}`),f=()=>{l(!0),o?.()},g=()=>{a?.()},b=()=>m||c?i||`data:image/svg+xml;base64,${btoa(`
        <svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300">
          <rect width="400" height="300" fill="#374151"/>
          <circle cx="200" cy="130" r="20" fill="#6B7280"/>
          <path d="M180 150 L220 150 M190 160 L210 160" stroke="#6B7280" stroke-width="2" fill="none"/>
          <text x="200" y="190" text-anchor="middle" fill="#9CA3AF" font-size="14" font-family="Arial">Image not available</text>
        </svg>
      `)}`:h;return n.jsxs("div",{ref:d,className:`relative overflow-hidden ${t}`,children:[n.jsx("img",{src:b(),alt:e,className:`w-full h-full object-cover transition-opacity duration-300 ${u&&!m&&!c?"opacity-100":"opacity-75"}`,onLoad:g,onError:f,loading:"lazy"}),!u&&!m&&!c&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:n.jsx(Qs,{size:"md",color:"white"})}),(m||c)&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800 bg-opacity-75",children:n.jsxs("div",{className:"text-center text-gray-300",children:[n.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),n.jsx("p",{className:"text-sm",children:"Image unavailable"})]})})]})},rd=[{question:"How does the Spaced Repetition System work?",answer:"Our SRS is based on the proven SM2 algorithm used by Anki. It automatically schedules questions based on your performance, showing difficult concepts more frequently and easy ones less often. This scientifically-proven method helps you retain information for the long term."},{question:"What medical subjects are covered?",answer:"MedMaster focuses on Microbiology and Pharmacology with over 10,000 questions covering bacteria, viruses, fungi, parasites, and drug mechanisms. We also include 3,000+ clinical cases for practical application."},{question:"Can I use MedMaster offline?",answer:"Yes! Our mobile-optimized platform works offline once content is loaded. You can study anywhere, anytime without worrying about internet connectivity."},{question:"How accurate are the questions compared to actual exams?",answer:"Our questions are curated from trusted medical resources like Sketchy, Pixorize, and First Aid. Many students report 25-40% improvement in exam scores after using MedMaster for 2-3 months."},{question:"Is there a free trial available?",answer:"Yes! You can start learning immediately with our free trial. No credit card required. Experience all features including Quick Fire mode, clinical cases, and analytics."},{question:"How does the gamification system work?",answer:"Earn XP points for correct answers, unlock achievements, customize avatars, and compete on global leaderboards. Our scoring system includes combo multipliers and daily challenges to keep you motivated."},{question:"What makes MedMaster different from other study apps?",answer:"MedMaster combines proven learning science (SRS) with engaging gamification specifically for medical students. Our AI-powered analytics provide personalized insights, and our clinical cases bridge the gap between theory and practice."},{question:"Can I track my progress over time?",answer:"Absolutely! Our advanced analytics dashboard shows detailed performance metrics, learning patterns, weak areas, and predictive insights to optimize your study strategy."}],nd=({item:s,isOpen:e,onToggle:t})=>n.jsxs("div",{className:"border border-gray-700 rounded-lg overflow-hidden transition-all duration-300 hover:border-blue-500",children:[n.jsxs("button",{className:"w-full px-6 py-4 text-left bg-gray-800 hover:bg-gray-750 transition-colors duration-200 flex justify-between items-center",onClick:t,children:[n.jsx("span",{className:"text-white font-medium pr-4",children:s.question}),n.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform duration-200 flex-shrink-0 ${e?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n.jsx("div",{className:`overflow-hidden transition-all duration-300 ${e?"max-h-96 opacity-100":"max-h-0 opacity-0"}`,children:n.jsx("div",{className:"px-6 py-4 bg-gray-850 text-gray-300 leading-relaxed",children:s.answer})})]}),id=()=>{const[s,e]=p.useState(new Set),{targetRef:t,hasIntersected:r}=Xs(),i=a=>{const o=new Set(s);o.has(a)?o.delete(a):o.add(a),e(o)};return n.jsx("section",{ref:t,id:"faq",className:"py-20 bg-gray-900",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"Frequently Asked Questions"}),n.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Get answers to common questions about MedMaster"})]}),r&&n.jsx("div",{className:"space-y-4",children:rd.map((a,o)=>n.jsx(nd,{item:a,isOpen:s.has(o),onToggle:()=>i(o)},o))})]})})};var oi={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let i=s.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ad=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const i=s[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=s[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=s[t++],o=s[t++],c=s[t++],l=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=s[t++],o=s[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Ra={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<s.length;i+=3){const a=s[i],o=i+1<s.length,c=o?s[i+1]:0,l=i+2<s.length,d=l?s[i+2]:0,h=a>>2,u=(a&3)<<4|c>>4;let m=(c&15)<<2|d>>6,f=d&63;l||(f=64,o||(m=64)),r.push(t[h],t[u],t[m],t[f])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Aa(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):ad(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<s.length;){const a=t[s.charAt(i++)],c=i<s.length?t[s.charAt(i)]:0;++i;const d=i<s.length?t[s.charAt(i)]:64;++i;const u=i<s.length?t[s.charAt(i)]:64;if(++i,a==null||c==null||d==null||u==null)throw new od;const m=a<<2|c>>4;if(r.push(m),d!==64){const f=c<<4&240|d>>2;if(r.push(f),u!==64){const g=d<<6&192|u;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class od extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ld=function(s){const e=Aa(s);return Ra.encodeByteArray(e,!0)},Oa=function(s){return ld(s).replace(/\./g,"")},La=function(s){try{return Ra.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=()=>cd().__FIREBASE_DEFAULTS__,ud=()=>{if(typeof process>"u"||typeof oi>"u")return;const s=oi.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hd=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&La(s[1]);return e&&JSON.parse(e)},yn=()=>{try{return dd()||ud()||hd()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},md=s=>{var e,t;return(t=(e=yn())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},Ma=()=>{var s;return(s=yn())===null||s===void 0?void 0:s.config},Da=s=>{var e;return(e=yn())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ae())}function gd(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xd(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function yd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bd(){const s=ae();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function vd(){try{return typeof indexedDB=="object"}catch{return!1}}function wd(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="FirebaseError";class ut extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_d,Object.setPrototypeOf(this,ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ws.prototype.create)}}class ws{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?jd(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new ut(i,c,r)}}function jd(s,e){return s.replace(kd,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const kd=/\{\$([^}]+)}/g;function Nd(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Zs(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=s[i],o=e[i];if(li(a)&&li(o)){if(!Zs(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function li(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function is(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function as(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function Sd(s,e){const t=new Ed(s,e);return t.subscribe.bind(t)}class Ed{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Id(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=jr),i.error===void 0&&(i.error=jr),i.complete===void 0&&(i.complete=jr);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Id(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function jr(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(s){return s&&s._delegate?s._delegate:s}class Gt{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new fd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cd(e))try{this.getOrInitializeService({instanceIdentifier:xt})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=xt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xt){return this.instances.has(e)}getOptions(e=xt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pd(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xt){return this.component?this.component.multipleInstances?e:xt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pd(s){return s===xt?void 0:s}function Cd(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Td(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(B||(B={}));const Rd={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},Od=B.INFO,Ld={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},Md=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),i=Ld[e];if(i)console[i](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ua{constructor(e){this.name=e,this._logLevel=Od,this._logHandler=Md,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}}const Dd=(s,e)=>e.some(t=>s instanceof t);let ci,di;function Ud(){return ci||(ci=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $d(){return di||(di=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $a=new WeakMap,qr=new WeakMap,Ba=new WeakMap,kr=new WeakMap,bn=new WeakMap;function Bd(s){const e=new Promise((t,r)=>{const i=()=>{s.removeEventListener("success",a),s.removeEventListener("error",o)},a=()=>{t(ot(s.result)),i()},o=()=>{r(s.error),i()};s.addEventListener("success",a),s.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&$a.set(t,s)}).catch(()=>{}),bn.set(e,s),e}function Fd(s){if(qr.has(s))return;const e=new Promise((t,r)=>{const i=()=>{s.removeEventListener("complete",a),s.removeEventListener("error",o),s.removeEventListener("abort",o)},a=()=>{t(),i()},o=()=>{r(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",a),s.addEventListener("error",o),s.addEventListener("abort",o)});qr.set(s,e)}let Wr={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return qr.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Ba.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ot(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function qd(s){Wr=s(Wr)}function Wd(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Nr(this),e,...t);return Ba.set(r,e.sort?e.sort():[e]),ot(r)}:$d().includes(s)?function(...e){return s.apply(Nr(this),e),ot($a.get(this))}:function(...e){return ot(s.apply(Nr(this),e))}}function zd(s){return typeof s=="function"?Wd(s):(s instanceof IDBTransaction&&Fd(s),Dd(s,Ud())?new Proxy(s,Wr):s)}function ot(s){if(s instanceof IDBRequest)return Bd(s);if(kr.has(s))return kr.get(s);const e=zd(s);return e!==s&&(kr.set(s,e),bn.set(e,s)),e}const Nr=s=>bn.get(s);function Hd(s,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(s,e),c=ot(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ot(o.result),l.oldVersion,l.newVersion,ot(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Vd=["get","getKey","getAll","getAllKeys","count"],Gd=["put","add","delete","clear"],Sr=new Map;function ui(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Sr.get(e))return Sr.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Gd.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Vd.includes(t)))return;const a=async function(o,...c){const l=this.transaction(o,i?"readwrite":"readonly");let d=l.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&l.done]))[0]};return Sr.set(e,a),a}qd(s=>({...s,get:(e,t,r)=>ui(e,t)||s.get(e,t,r),has:(e,t)=>!!ui(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Jd(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Jd(s){const e=s.getComponent();return e?.type==="VERSION"}const zr="@firebase/app",hi="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke=new Ua("@firebase/app"),Yd="@firebase/app-compat",Xd="@firebase/analytics-compat",Qd="@firebase/analytics",Zd="@firebase/app-check-compat",eu="@firebase/app-check",tu="@firebase/auth",su="@firebase/auth-compat",ru="@firebase/database",nu="@firebase/data-connect",iu="@firebase/database-compat",au="@firebase/functions",ou="@firebase/functions-compat",lu="@firebase/installations",cu="@firebase/installations-compat",du="@firebase/messaging",uu="@firebase/messaging-compat",hu="@firebase/performance",mu="@firebase/performance-compat",fu="@firebase/remote-config",pu="@firebase/remote-config-compat",gu="@firebase/storage",xu="@firebase/storage-compat",yu="@firebase/firestore",bu="@firebase/vertexai-preview",vu="@firebase/firestore-compat",wu="firebase",_u="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]",ju={[zr]:"fire-core",[Yd]:"fire-core-compat",[Qd]:"fire-analytics",[Xd]:"fire-analytics-compat",[eu]:"fire-app-check",[Zd]:"fire-app-check-compat",[tu]:"fire-auth",[su]:"fire-auth-compat",[ru]:"fire-rtdb",[nu]:"fire-data-connect",[iu]:"fire-rtdb-compat",[au]:"fire-fn",[ou]:"fire-fn-compat",[lu]:"fire-iid",[cu]:"fire-iid-compat",[du]:"fire-fcm",[uu]:"fire-fcm-compat",[hu]:"fire-perf",[mu]:"fire-perf-compat",[fu]:"fire-rc",[pu]:"fire-rc-compat",[gu]:"fire-gcs",[xu]:"fire-gcs-compat",[yu]:"fire-fst",[vu]:"fire-fst-compat",[bu]:"fire-vertex","fire-js":"fire-js",[wu]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new Map,ku=new Map,Vr=new Map;function mi(s,e){try{s.container.addComponent(e)}catch(t){Ke.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ms(s){const e=s.name;if(Vr.has(e))return Ke.debug(`There were multiple attempts to register component ${e}.`),!1;Vr.set(e,s);for(const t of er.values())mi(t,s);for(const t of ku.values())mi(t,s);return!0}function Fa(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function xe(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lt=new ws("app","Firebase",Nu);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=_u;function qa(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hr,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw lt.create("bad-app-name",{appName:String(i)});if(t||(t=Ma()),!t)throw lt.create("no-options");const a=er.get(i);if(a){if(Zs(t,a.options)&&Zs(r,a.config))return a;throw lt.create("duplicate-app",{appName:i})}const o=new Ad(i);for(const l of Vr.values())o.addComponent(l);const c=new Su(t,r,o);return er.set(i,c),c}function Eu(s=Hr){const e=er.get(s);if(!e&&s===Hr&&Ma())return qa();if(!e)throw lt.create("no-app",{appName:s});return e}function Wt(s,e,t){var r;let i=(r=ju[s])!==null&&r!==void 0?r:s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ke.warn(c.join(" "));return}ms(new Gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="firebase-heartbeat-database",Tu=1,fs="firebase-heartbeat-store";let Er=null;function Wa(){return Er||(Er=Hd(Iu,Tu,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(fs)}catch(t){console.warn(t)}}}}).catch(s=>{throw lt.create("idb-open",{originalErrorMessage:s.message})})),Er}async function Pu(s){try{const t=(await Wa()).transaction(fs),r=await t.objectStore(fs).get(za(s));return await t.done,r}catch(e){if(e instanceof ut)Ke.warn(e.message);else{const t=lt.create("idb-get",{originalErrorMessage:e?.message});Ke.warn(t.message)}}}async function fi(s,e){try{const r=(await Wa()).transaction(fs,"readwrite");await r.objectStore(fs).put(e,za(s)),await r.done}catch(t){if(t instanceof ut)Ke.warn(t.message);else{const r=lt.create("idb-set",{originalErrorMessage:t?.message});Ke.warn(r.message)}}}function za(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=1024,Au=720*60*60*1e3;class Ru{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Lu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=pi();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=Au}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ke.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=pi(),{heartbeatsToSend:r,unsentEntries:i}=Ou(this._heartbeatsCache.heartbeats),a=Oa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ke.warn(t),""}}}function pi(){return new Date().toISOString().substring(0,10)}function Ou(s,e=Cu){const t=[];let r=s.slice();for(const i of s){const a=t.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),gi(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gi(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Lu{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vd()?wd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Pu(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return fi(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return fi(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gi(s){return Oa(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(s){ms(new Gt("platform-logger",e=>new Kd(e),"PRIVATE")),ms(new Gt("heartbeat",e=>new Ru(e),"PRIVATE")),Wt(zr,hi,s),Wt(zr,hi,"esm2017"),Wt("fire-js","")}Mu("");var Du="firebase",Uu="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt(Du,Uu,"app");function vn(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t}function Ha(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $u=Ha,Va=new ws("auth","Firebase",Ha());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Ua("@firebase/auth");function Bu(s,...e){tr.logLevel<=B.WARN&&tr.warn(`Auth (${js}): ${s}`,...e)}function zs(s,...e){tr.logLevel<=B.ERROR&&tr.error(`Auth (${js}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(s,...e){throw _n(s,...e)}function je(s,...e){return _n(s,...e)}function wn(s,e,t){const r=Object.assign(Object.assign({},$u()),{[e]:t});return new ws("auth","Firebase",r).create(e,{appName:s.name})}function Ce(s){return wn(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ga(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ye(s,"argument-error"),wn(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _n(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return Va.create(s,...e)}function I(s,e,...t){if(!s)throw _n(e,...t)}function We(s){const e="INTERNAL ASSERTION FAILED: "+s;throw zs(e),new Error(e)}function Je(s,e){s||We(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function Fu(){return xi()==="http:"||xi()==="https:"}function xi(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fu()||xd()||"connection"in navigator)?navigator.onLine:!0}function Wu(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t){this.shortDelay=e,this.longDelay=t,Je(t>e,"Short delay should be less than long delay!"),this.isMobile=pd()||yd()}get(){return qu()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(s,e){Je(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;We("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;We("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;We("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new ks(3e4,6e4);function Le(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Me(s,e,t,r,i={}){return Ja(s,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=_s(Object.assign({key:s.config.apiKey},o)).slice(1),l=await s._getAdditionalHeaders();l["Content-Type"]="application/json",s.languageCode&&(l["X-Firebase-Locale"]=s.languageCode);const d=Object.assign({method:e,headers:l},a);return gd()||(d.referrerPolicy="no-referrer"),Ka.fetch()(Ya(s,s.config.apiHost,t,c),d)})}async function Ja(s,e,t){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},zu),e);try{const i=new Gu(s),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ls(s,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ls(s,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ls(s,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ls(s,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw wn(s,h,d);ye(s,h)}}catch(i){if(i instanceof ut)throw i;ye(s,"network-request-failed",{message:String(i)})}}async function Ns(s,e,t,r,i={}){const a=await Me(s,e,t,r,i);return"mfaPendingCredential"in a&&ye(s,"multi-factor-auth-required",{_serverResponse:a}),a}function Ya(s,e,t,r){const i=`${e}${t}?${r}`;return s.config.emulator?jn(s.config,i):`${s.config.apiScheme}://${i}`}function Vu(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gu{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(je(this.auth,"network-request-failed")),Hu.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ls(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=je(s,e,r);return i.customData._tokenResponse=t,i}function yi(s){return s!==void 0&&s.enterprise!==void 0}class Ku{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Vu(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ju(s,e){return Me(s,"GET","/v2/recaptchaConfig",Le(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(s,e){return Me(s,"POST","/v1/accounts:delete",e)}async function Xa(s,e){return Me(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Xu(s,e=!1){const t=Oe(s),r=await t.getIdToken(e),i=kn(r);I(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:ls(Ir(i.auth_time)),issuedAtTime:ls(Ir(i.iat)),expirationTime:ls(Ir(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Ir(s){return Number(s)*1e3}function kn(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return zs("JWT malformed, contained fewer than 3 sections"),null;try{const i=La(t);return i?JSON.parse(i):(zs("Failed to decode base64 JWT payload"),null)}catch(i){return zs("Caught error parsing JWT payload as JSON",i?.toString()),null}}function bi(s){const e=kn(s);return I(e,"internal-error"),I(typeof e.exp<"u","internal-error"),I(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ps(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ut&&Qu(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Qu({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ls(this.lastLoginAt),this.creationTime=ls(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sr(s){var e;const t=s.auth,r=await s.getIdToken(),i=await ps(s,Xa(t,{idToken:r}));I(i?.users.length,t,"internal-error");const a=i.users[0];s._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Qa(a.providerUserInfo):[],c=th(s.providerData,o),l=s.isAnonymous,d=!(s.email&&a.passwordHash)&&!c?.length,h=l?d:!1,u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Kr(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(s,u)}async function eh(s){const e=Oe(s);await sr(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function th(s,e){return[...s.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Qa(s){return s.map(e=>{var{providerId:t}=e,r=vn(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(s,e){const t=await Ja(s,{},async()=>{const r=_s({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=s.config,o=Ya(s,i,"/v1/token",`key=${a}`),c=await s._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ka.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function rh(s,e){return Me(s,"POST","/v2/accounts:revokeToken",Le(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I(typeof e.idToken<"u","internal-error"),I(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){I(e.length!==0,"internal-error");const t=bi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(I(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await sh(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,o=new zt;return r&&(I(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(I(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(I(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zt,this.toJSON())}_performRefresh(){return We("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(s,e){I(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ze{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=vn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Kr(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ps(this,this.stsTokenManager.getToken(this.auth,e));return I(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Xu(this,e)}reload(){return eh(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ze(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await sr(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xe(this.auth.app))return Promise.reject(Ce(this.auth));const e=await this.getIdToken();return await ps(this,Yu(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,o,c,l,d,h;const u=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,f=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,g=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(c=t.tenantId)!==null&&c!==void 0?c:void 0,y=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,x=(d=t.createdAt)!==null&&d!==void 0?d:void 0,N=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:v,emailVerified:k,isAnonymous:_,providerData:w,stsTokenManager:j}=t;I(v&&j,e,"internal-error");const E=zt.fromJSON(this.name,j);I(typeof v=="string",e,"internal-error"),et(u,e.name),et(m,e.name),I(typeof k=="boolean",e,"internal-error"),I(typeof _=="boolean",e,"internal-error"),et(f,e.name),et(g,e.name),et(b,e.name),et(y,e.name),et(x,e.name),et(N,e.name);const C=new ze({uid:v,auth:e,email:m,emailVerified:k,displayName:u,isAnonymous:_,photoURL:g,phoneNumber:f,tenantId:b,stsTokenManager:E,createdAt:x,lastLoginAt:N});return w&&Array.isArray(w)&&(C.providerData=w.map(O=>Object.assign({},O))),y&&(C._redirectEventId=y),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new zt;i.updateFromServerResponse(t);const a=new ze({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sr(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];I(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Qa(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new zt;c.updateFromIdToken(r);const l=new ze({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Kr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(l,d),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Map;function He(s){Je(s instanceof Function,"Expected a class definition");let e=vi.get(s);return e?(Je(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,vi.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Za.type="NONE";const wi=Za;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(s,e,t){return`firebase:${s}:${e}:${t}`}class Ht{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Hs(this.userKey,i.apiKey,a),this.fullPersistenceKey=Hs("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ze._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ht(He(wi),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||He(wi);const o=Hs(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const h=await d._get(o);if(h){const u=ze._fromJSON(e,h);d!==a&&(c=u),a=d;break}}catch{}const l=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Ht(a,e,r):(a=l[0],c&&await a._set(o,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Ht(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ro(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eo(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(io(e))return"Blackberry";if(ao(e))return"Webos";if(to(e))return"Safari";if((e.includes("chrome/")||so(e))&&!e.includes("edge/"))return"Chrome";if(no(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function eo(s=ae()){return/firefox\//i.test(s)}function to(s=ae()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function so(s=ae()){return/crios\//i.test(s)}function ro(s=ae()){return/iemobile/i.test(s)}function no(s=ae()){return/android/i.test(s)}function io(s=ae()){return/blackberry/i.test(s)}function ao(s=ae()){return/webos/i.test(s)}function Nn(s=ae()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function nh(s=ae()){var e;return Nn(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ih(){return bd()&&document.documentMode===10}function oo(s=ae()){return Nn(s)||no(s)||ao(s)||io(s)||/windows phone/i.test(s)||ro(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(s,e=[]){let t;switch(s){case"Browser":t=_i(ae());break;case"Worker":t=`${_i(ae())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((o,c)=>{try{const l=e(a);o(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(s,e={}){return Me(s,"GET","/v2/passwordPolicy",Le(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=6;class ch{constructor(e){var t,r,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:lh,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,a,o,c;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ji(this),this.idTokenSubscription=new ji(this),this.beforeStateQueue=new ah(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Va,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=He(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ht.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xa(this,{idToken:e}),r=await ze._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return I(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sr(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Wu()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xe(this.app))return Promise.reject(Ce(this));const t=e?Oe(e):null;return t&&I(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&I(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xe(this.app)?Promise.reject(Ce(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xe(this.app)?Promise.reject(Ce(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(He(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oh(this),t=new ch(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ws("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await rh(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&He(e)||this._popupRedirectResolver;I(t,this,"argument-error"),this.redirectPersistenceManager=await Ht.create(this,[He(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(I(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Bu(`Error while retrieving App Check token: ${t.error}`),t?.token}}function De(s){return Oe(s)}class ji{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sd(t=>this.observer=t)}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ur={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uh(s){ur=s}function co(s){return ur.loadJS(s)}function hh(){return ur.recaptchaEnterpriseScript}function mh(){return ur.gapiScript}function fh(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const ph="recaptcha-enterprise",gh="NO_RECAPTCHA";class xh{constructor(e){this.type=ph,this.auth=De(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{Ju(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Ku(l);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(l=>{c(l)})})}function i(a,o,c){const l=window.grecaptcha;yi(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(gh)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(c=>{if(!t&&yi(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=hh();l.length!==0&&(l+=c),co(l).then(()=>{i(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function ki(s,e,t,r=!1){const i=new xh(s);let a;try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Jr(s,e,t,r){var i;if(!((i=s._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ki(s,e,t,t==="getOobCode");return r(s,a)}else return r(s,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await ki(s,e,t,t==="getOobCode");return r(s,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(s,e){const t=Fa(s,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Zs(a,e??{}))return i;ye(i,"already-initialized")}return t.initialize({options:e})}function bh(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(He);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function vh(s,e,t){const r=De(s);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=uo(e),{host:o,port:c}=wh(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),_h()}function uo(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function wh(s){const e=uo(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Ni(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Ni(o)}}}function Ni(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function _h(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return We("not implemented")}_getIdTokenResponse(e){return We("not implemented")}_linkToIdToken(e,t){return We("not implemented")}_getReauthenticationResolver(e){return We("not implemented")}}async function jh(s,e){return Me(s,"POST","/v1/accounts:signUp",e)}async function kh(s,e){return Me(s,"POST","/v1/accounts:update",Le(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(s,e){return Ns(s,"POST","/v1/accounts:signInWithPassword",Le(s,e))}async function Sh(s,e){return Me(s,"POST","/v1/accounts:sendOobCode",Le(s,e))}async function Eh(s,e){return Sh(s,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(s,e){return Ns(s,"POST","/v1/accounts:signInWithEmailLink",Le(s,e))}async function Th(s,e){return Ns(s,"POST","/v1/accounts:signInWithEmailLink",Le(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Sn{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new gs(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new gs(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jr(e,t,"signInWithPassword",Nh);case"emailLink":return Ih(e,{email:this._email,oobCode:this._password});default:ye(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jr(e,r,"signUpPassword",jh);case"emailLink":return Th(e,{idToken:t,email:this._email,oobCode:this._password});default:ye(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vt(s,e){return Ns(s,"POST","/v1/accounts:signInWithIdp",Le(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="http://localhost";class _t extends Sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new _t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ye("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,a=vn(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new _t(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Vt(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Vt(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vt(e,t)}buildRequest(){const e={requestUri:Ph,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_s(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ah(s){const e=is(as(s)).link,t=e?is(as(e)).deep_link_id:null,r=is(as(s)).deep_link_id;return(r?is(as(r)).link:null)||r||t||e||s}class En{constructor(e){var t,r,i,a,o,c;const l=is(as(e)),d=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,u=Ch((i=l.mode)!==null&&i!==void 0?i:null);I(d&&h&&u,"argument-error"),this.apiKey=d,this.operation=u,this.code=h,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=Ah(e);try{return new En(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(){this.providerId=Qt.PROVIDER_ID}static credential(e,t){return gs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=En.parseLink(t);return I(r,"argument-error"),gs._fromEmailAndCode(e,r.code,r.tenantId)}}Qt.PROVIDER_ID="password";Qt.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends hr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt extends Ss{constructor(){super("facebook.com")}static credential(e){return _t._fromParams({providerId:rt.PROVIDER_ID,signInMethod:rt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rt.credentialFromTaggedObject(e)}static credentialFromError(e){return rt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rt.credential(e.oauthAccessToken)}catch{return null}}}rt.FACEBOOK_SIGN_IN_METHOD="facebook.com";rt.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends Ss{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return _t._fromParams({providerId:qe.PROVIDER_ID,signInMethod:qe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qe.credentialFromTaggedObject(e)}static credentialFromError(e){return qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return qe.credential(t,r)}catch{return null}}}qe.GOOGLE_SIGN_IN_METHOD="google.com";qe.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt extends Ss{constructor(){super("github.com")}static credential(e){return _t._fromParams({providerId:nt.PROVIDER_ID,signInMethod:nt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nt.credentialFromTaggedObject(e)}static credentialFromError(e){return nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nt.credential(e.oauthAccessToken)}catch{return null}}}nt.GITHUB_SIGN_IN_METHOD="github.com";nt.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends Ss{constructor(){super("twitter.com")}static credential(e,t){return _t._fromParams({providerId:it.PROVIDER_ID,signInMethod:it.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return it.credentialFromTaggedObject(e)}static credentialFromError(e){return it.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return it.credential(t,r)}catch{return null}}}it.TWITTER_SIGN_IN_METHOD="twitter.com";it.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(s,e){return Ns(s,"POST","/v1/accounts:signUp",Le(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await ze._fromIdTokenResponse(e,r,i),o=Si(r);return new jt({user:a,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Si(r);return new jt({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Si(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends ut{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,rr.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new rr(e,t,r,i)}}function ho(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?rr._fromErrorAndOperation(s,a,e,r):a})}async function Oh(s,e,t=!1){const r=await ps(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return jt._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(s,e,t=!1){const{auth:r}=s;if(xe(r.app))return Promise.reject(Ce(r));const i="reauthenticate";try{const a=await ps(s,ho(r,i,e,s),t);I(a.idToken,r,"internal-error");const o=kn(a.idToken);I(o,r,"internal-error");const{sub:c}=o;return I(s.uid===c,r,"user-mismatch"),jt._forOperation(s,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ye(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(s,e,t=!1){if(xe(s.app))return Promise.reject(Ce(s));const r="signIn",i=await ho(s,r,e),a=await jt._fromIdTokenResponse(s,r,i);return t||await s._updateCurrentUser(a.user),a}async function Mh(s,e){return mo(De(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(s,e,t){var r;I(((r=t.url)===null||r===void 0?void 0:r.length)>0,s,"invalid-continue-uri"),I(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(I(t.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(I(t.android.packageName.length>0,s,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(s){const e=De(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Uh(s,e){await kh(Oe(s),{oobCode:e})}async function $h(s,e,t){if(xe(s.app))return Promise.reject(Ce(s));const r=De(s),o=await Jr(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rh).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&fo(s),l}),c=await jt._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function Bh(s,e,t){return xe(s.app)?Promise.reject(Ce(s)):Mh(Oe(s),Qt.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fo(s),r})}async function po(s,e){const t=Oe(s),i={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()};e&&Dh(t.auth,i,e);const{email:a}=await Eh(t.auth,i);a!==s.email&&await s.reload()}function Fh(s,e,t,r){return Oe(s).onIdTokenChanged(e,t,r)}function qh(s,e,t){return Oe(s).beforeAuthStateChanged(e,t)}function Wh(s){return Oe(s).signOut()}const nr="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nr,"1"),this.storage.removeItem(nr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=1e3,Hh=10;class xo extends go{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oo(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);ih()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Hh):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},zh)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xo.type="LOCAL";const Vh=xo;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends go{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yo.type="SESSION";const bo=yo;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new mr(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(t.origin,a)),l=await Gh(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mr.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,l)=>{const d=In("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(u){const m=u;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(m.data.response);break;default:clearTimeout(h),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(){return window}function Jh(s){Ae().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(){return typeof Ae().WorkerGlobalScope<"u"&&typeof Ae().importScripts=="function"}async function Yh(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xh(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function Qh(){return vo()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="firebaseLocalStorageDb",Zh=1,ir="firebaseLocalStorage",_o="fbase_key";class Es{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fr(s,e){return s.transaction([ir],e?"readwrite":"readonly").objectStore(ir)}function em(){const s=indexedDB.deleteDatabase(wo);return new Es(s).toPromise()}function Yr(){const s=indexedDB.open(wo,Zh);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(ir,{keyPath:_o})}catch(i){t(i)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(ir)?e(r):(r.close(),await em(),e(await Yr()))})})}async function Ei(s,e,t){const r=fr(s,!0).put({[_o]:e,value:t});return new Es(r).toPromise()}async function tm(s,e){const t=fr(s,!1).get(e),r=await new Es(t).toPromise();return r===void 0?null:r.value}function Ii(s,e){const t=fr(s,!0).delete(e);return new Es(t).toPromise()}const sm=800,rm=3;class jo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yr(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>rm)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mr._getInstance(Qh()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Yh(),!this.activeServiceWorker)return;this.sender=new Kh(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xh()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yr();return await Ei(e,nr,"1"),await Ii(e,nr),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ei(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>tm(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ii(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=fr(i,!1).getAll();return new Es(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sm)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jo.type="LOCAL";const nm=jo;new ks(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(s,e){return e?He(e):(I(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends Sn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function im(s){return mo(s.auth,new Pn(s),s.bypassAuthState)}function am(s){const{auth:e,user:t}=s;return I(t,e,"internal-error"),Lh(t,new Pn(s),s.bypassAuthState)}async function om(s){const{auth:e,user:t}=s;return I(t,e,"internal-error"),Oh(t,new Pn(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return im;case"linkViaPopup":case"linkViaRedirect":return om;case"reauthViaPopup":case"reauthViaRedirect":return am;default:ye(this.auth,"internal-error")}}resolve(e){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=new ks(2e3,1e4);async function cm(s,e,t){if(xe(s.app))return Promise.reject(je(s,"operation-not-supported-in-this-environment"));const r=De(s);Ga(s,e,hr);const i=Tn(r,t);return new vt(r,"signInViaPopup",e,i).executeNotNull()}class vt extends ko{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,vt.currentPopupAction&&vt.currentPopupAction.cancel(),vt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return I(e,this.auth,"internal-error"),e}async onExecution(){Je(this.filter.length===1,"Popup operations only handle one event");const e=In();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(je(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(je(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(je(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lm.get())};e()}}vt.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="pendingRedirect",Vs=new Map;class um extends ko{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Vs.get(this.auth._key());if(!e){try{const r=await hm(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Vs.set(this.auth._key(),e)}return this.bypassAuthState||Vs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hm(s,e){const t=So(e),r=No(s);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function mm(s,e){return No(s)._set(So(e),"true")}function fm(s,e){Vs.set(s._key(),e)}function No(s){return He(s._redirectPersistence)}function So(s){return Hs(dm,s.config.apiKey,s.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(s,e,t){return gm(s,e,t)}async function gm(s,e,t){if(xe(s.app))return Promise.reject(Ce(s));const r=De(s);Ga(s,e,hr),await r._initializationPromise;const i=Tn(r,t);return await mm(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function xm(s,e){return await De(s)._initializationPromise,Eo(s,e,!1)}async function Eo(s,e,t=!1){if(xe(s.app))return Promise.reject(Ce(s));const r=De(s),i=Tn(r,e),o=await new um(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=600*1e3;class bm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vm(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Io(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(je(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ym&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ti(e))}saveEventToCache(e){this.cachedEventUids.add(Ti(e)),this.lastProcessedEventTime=Date.now()}}function Ti(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Io({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function vm(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Io(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wm(s,e={}){return Me(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jm=/^https?/;async function km(s){if(s.config.emulator)return;const{authorizedDomains:e}=await wm(s);for(const t of e)try{if(Nm(t))return}catch{}ye(s,"unauthorized-domain")}function Nm(s){const e=Gr(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const o=new URL(s);return o.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!jm.test(t))return!1;if(_m.test(s))return r===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=new ks(3e4,6e4);function Pi(){const s=Ae().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function Em(s){return new Promise((e,t)=>{var r,i,a;function o(){Pi(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pi(),t(je(s,"network-request-failed"))},timeout:Sm.get()})}if(!((i=(r=Ae().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Ae().gapi)===null||a===void 0)&&a.load)o();else{const c=fh("iframefcb");return Ae()[c]=()=>{gapi.load?o():t(je(s,"network-request-failed"))},co(`${mh()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Gs=null,e})}let Gs=null;function Im(s){return Gs=Gs||Em(s),Gs}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new ks(5e3,15e3),Pm="__/auth/iframe",Cm="emulator/auth/iframe",Am={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Om(s){const e=s.config;I(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?jn(e,Cm):`https://${s.config.authDomain}/${Pm}`,r={apiKey:e.apiKey,appName:s.name,v:js},i=Rm.get(s.config.apiHost);i&&(r.eid=i);const a=s._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${_s(r).slice(1)}`}async function Lm(s){const e=await Im(s),t=Ae().gapi;return I(t,s,"internal-error"),e.open({where:document.body,url:Om(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Am,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=je(s,"network-request-failed"),c=Ae().setTimeout(()=>{a(o)},Tm.get());function l(){Ae().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dm=500,Um=600,$m="_blank",Bm="http://localhost";class Ci{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fm(s,e,t,r=Dm,i=Um){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Mm),{width:r.toString(),height:i.toString(),top:a,left:o}),d=ae().toLowerCase();t&&(c=so(d)?$m:t),eo(d)&&(e=e||Bm,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[f,g])=>`${m}${f}=${g},`,"");if(nh(d)&&c!=="_self")return qm(e||"",c),new Ci(null);const u=window.open(e||"",c,h);I(u,s,"popup-blocked");try{u.focus()}catch{}return new Ci(u)}function qm(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="__/auth/handler",zm="emulator/auth/handler",Hm=encodeURIComponent("fac");async function Ai(s,e,t,r,i,a){I(s.config.authDomain,s,"auth-domain-config-required"),I(s.config.apiKey,s,"invalid-api-key");const o={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:js,eventId:i};if(e instanceof hr){e.setDefaultLanguage(s.languageCode),o.providerId=e.providerId||"",Nd(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,u]of Object.entries({}))o[h]=u}if(e instanceof Ss){const h=e.getScopes().filter(u=>u!=="");h.length>0&&(o.scopes=h.join(","))}s.tenantId&&(o.tid=s.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const l=await s._getAppCheckToken(),d=l?`#${Hm}=${encodeURIComponent(l)}`:"";return`${Vm(s)}?${_s(c).slice(1)}${d}`}function Vm({config:s}){return s.emulator?jn(s,zm):`https://${s.authDomain}/${Wm}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="webStorageSupport";class Gm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bo,this._completeRedirectFn=Eo,this._overrideRedirectResult=fm}async _openPopup(e,t,r,i){var a;Je((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Ai(e,t,r,Gr(),i);return Fm(e,o,In())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Ai(e,t,r,Gr(),i);return Jh(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Je(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Lm(e),r=new bm(e);return t.register("authEvent",i=>(I(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tr,{type:Tr},i=>{var a;const o=(a=i?.[0])===null||a===void 0?void 0:a[Tr];o!==void 0&&t(!!o),ye(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=km(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oo()||to()||Nn()}}const Km=Gm;var Ri="@firebase/auth",Oi="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xm(s){ms(new Gt("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;I(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lo(s)},d=new dh(r,i,a,l);return bh(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ms(new Gt("auth-internal",e=>{const t=De(e.getProvider("auth").getImmediate());return(r=>new Jm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wt(Ri,Oi,Ym(s)),Wt(Ri,Oi,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=300,Zm=Da("authIdTokenMaxAge")||Qm;let Li=null;const ef=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Zm)return;const i=t?.token;Li!==i&&(Li=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function To(s=Eu()){const e=Fa(s,"auth");if(e.isInitialized())return e.getImmediate();const t=yh(s,{popupRedirectResolver:Km,persistence:[nm,Vh,bo]}),r=Da("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=ef(a.toString());qh(t,o,()=>o(t.currentUser)),Fh(t,c=>o(c))}}const i=md("auth");return i&&vh(t,`http://${i}`),t}function tf(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}uh({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=i=>{const a=je("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",tf().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xm("Browser");const sf={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://medmaster-production.up.railway.app",VITE_APP_DOMAIN:"https://app.medmaster.com",VITE_APP_ENV:"production",VITE_FIREBASE_API_KEY:"",VITE_FIREBASE_APP_ID:"1:1073454322288:web:2dd42bd0d731d6c2bb5ab5",VITE_FIREBASE_AUTH_DOMAIN:"medmaster-auth.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:`G-6V494YYG8Z\r
`,VITE_FIREBASE_MESSAGING_SENDER_ID:"1073454322288",VITE_FIREBASE_PROJECT_ID:"medmaster-auth",VITE_FIREBASE_STORAGE_BUCKET:"medmaster-auth.firebasestorage.app",VITE_LANDING_DOMAIN:"https://medmaster.site",VITE_MAIN_APP_URL:"https://med-master-landing-site-2s46mwyfy-haroon-zias-projects.vercel.app",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5bHZiYmJucnlrdWF3YXl2a2F0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1Mzg4MjgsImV4cCI6MjA3MTExNDgyOH0.zs_KlULsvZdXtXeqPJBtGyBEdZF65uGTCX06mvAQfNU",VITE_SUPABASE_URL:"https://fylvbbbnrykuawayvkat.supabase.co"};console.log("🔍 Environment Debug:",{NODE_ENV:"production",API_KEY:"MISSING",AUTH_DOMAIN:"medmaster-auth.firebaseapp.com",PROJECT_ID:"medmaster-auth",STORAGE_BUCKET:"medmaster-auth.firebasestorage.app",MESSAGING_SENDER_ID:"1073454322288",APP_ID:"1:1073454322288:web:2dd42bd0d731d6c2bb5ab5",MEASUREMENT_ID:`G-6V494YYG8Z\r
`});const rf={apiKey:"AIzaSyCsy00m3pl76bitsNcffnGpm9DObgKELcM"},ie={apiKey:rf.apiKey,authDomain:"medmaster-auth.firebaseapp.com",projectId:"medmaster-auth",storageBucket:"medmaster-auth.firebasestorage.app",messagingSenderId:"1073454322288",appId:"1:1073454322288:web:2dd42bd0d731d6c2bb5ab5",measurementId:`G-6V494YYG8Z\r
`};console.log("🌐 Current domain:",window.location.hostname);console.log("🔧 Auth domain configured:",ie.authDomain);console.log("🔧 Final Firebase config:",{apiKey:ie.apiKey?"***":"missing",authDomain:ie.authDomain,projectId:ie.projectId,source:"fallback"});let Mi,re,wt;ie.apiKey?(console.log("🔧 Initializing Firebase with config:",{apiKey:ie.apiKey?"***":"missing",authDomain:ie.authDomain,projectId:ie.projectId}),Mi=qa(ie),re=To(Mi),wt=new qe,wt.setCustomParameters({prompt:"select_account"}),wt.addScope("email"),wt.addScope("profile"),console.log("✅ Firebase initialized successfully")):(console.error("❌ Firebase configuration missing! Check your .env file"),console.log("Missing config:",{apiKey:!ie.apiKey,authDomain:!ie.authDomain,projectId:!ie.projectId,storageBucket:!ie.storageBucket,messagingSenderId:!ie.messagingSenderId,appId:!ie.appId}),console.log("Current environment mode:","production"),console.log("All environment variables:",sf));const Po=async()=>{if(!re||!wt)throw new Error("Firebase not configured");try{console.log("🔄 Attempting Google Sign-In with popup method...");const e=(await cm(re,wt)).user;console.log("✅ Popup sign-in successful:",e.email);const t=await e.getIdToken();return{user:{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL},idToken:t}}catch(s){if(console.error("❌ Popup sign-in failed:",s),s.code==="auth/popup-blocked"||s.code==="auth/popup-closed-by-user"||s.message?.includes("Cross-Origin-Opener-Policy"))try{return console.log("🔄 Popup blocked, trying redirect method..."),await pm(re,wt),{pending:!0}}catch(e){throw console.error("❌ Both popup and redirect failed:",e),new Error("Google Sign-In failed. Please ensure popups are allowed or try again.")}throw s}},pr=async()=>{if(!re)throw new Error("Firebase not configured");try{console.log("🔍 Checking for Google Sign-In redirect result...");const s=await xm(re);if(s){console.log("✅ Google Sign-In redirect result found:",{uid:s.user.uid,email:s.user.email,displayName:s.user.displayName});const e=s.user,t=await e.getIdToken();return console.log("🔑 Firebase ID token obtained, length:",t.length),{user:{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL},idToken:t}}else console.log("ℹ️ No Google Sign-In redirect result found");return null}catch(s){throw console.error("❌ Error handling redirect result:",s),s}},nf=async(s,e,t)=>{if(!re)throw new Error("Firebase not configured");try{const i=(await $h(re,s,e)).user,a={url:`https://medmaster.site/auth/action?continueUrl=${encodeURIComponent("https://medmaster.site/login")}`,handleCodeInApp:!0};await po(i,a);const o=await i.getIdToken();return{user:{uid:i.uid,email:i.email,displayName:t||i.displayName,photoURL:i.photoURL,emailVerified:i.emailVerified},idToken:o,needsVerification:!i.emailVerified}}catch(r){throw console.error("Error signing up with email and password:",r),r}},af=async(s,e)=>{if(!re)throw new Error("Firebase not configured");try{const r=(await Bh(re,s,e)).user;if(!r.emailVerified)throw await Wh(re),new Error("EMAIL_NOT_VERIFIED");const i=await r.getIdToken();return{user:{uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,emailVerified:r.emailVerified},idToken:i}}catch(t){throw console.error("Error signing in with email and password:",t),t}},of=async()=>{if(!re||!re.currentUser)throw new Error("No authenticated user");try{const s={url:`https://medmaster.site/auth/action?continueUrl=${encodeURIComponent("https://medmaster.site/login")}`,handleCodeInApp:!0};await po(re.currentUser,s)}catch(s){throw console.error("Error resending verification email:",s),s}},lf="https://medmaster-production.up.railway.app";let cf=lf;const J=cf;console.log("🌐 API Configuration:",{VITE_API_URL:"https://medmaster-production.up.railway.app",API_BASE_URL:J,environment:"production"});const Xr={auth:{login:`${J}/api/auth/login`,register:`${J}/api/auth/register`,registerFirebase:`${J}/api/auth/register-firebase`,google:`${J}/api/auth/google`,profile:`${J}/api/auth/profile`},subscriptions:{status:`${J}/api/subscriptions/status`,plans:`${J}/api/subscriptions/plans`,checkAccess:`${J}/api/subscriptions/check-access`},subscription:{cancel:`${J}/api/subscriptions/cancel`,upgrade:`${J}/api/subscriptions/upgrade`,downgrade:`${J}/api/subscriptions/downgrade`,status:`${J}/api/subscriptions/status`},payment:{createCheckout:`${J}/api/payment/create-checkout-session`,createSession:`${J}/api/payment/create-session`,methods:`${J}/api/payment/methods`,verify:`${J}/api/payment/verify`,history:`${J}/api/payment/history`,transaction:s=>`${J}/api/payment/transaction/${s}`,success:`${J}/api/payment/success`}},ke={async login(s){try{const{email:e,password:t}=s,r=await af(e,t),i=r.user.email?.split("@")[0]||"User";return{success:!0,user:{id:r.user.uid,email:r.user.email||"",username:i,subscription_status:"demo"},token:r.idToken,userId:r.user.uid}}catch(e){return console.error("Login error:",e),e.code==="auth/user-not-found"||e.code==="auth/wrong-password"?{success:!1,error:"Invalid email or password"}:e.message==="EMAIL_NOT_VERIFIED"?{success:!1,error:"Please verify your email address before logging in. Check your inbox for a verification link.",needsVerification:!0}:e.code==="auth/too-many-requests"?{success:!1,error:"Too many failed attempts. Please try again later."}:{success:!1,error:"Login failed. Please try again."}}},async register(s){try{const{email:e,password:t}=s,r=await nf(e,t),i=r.user.email?.split("@")[0]||"User";try{const a={credential:r.idToken,email:r.user.email||"",username:i};console.log("🔄 Syncing Firebase user with backend database...");const o=await fetch(Xr.auth.registerFirebase,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await o.json();o.ok?console.log("✅ User successfully synced with backend database"):console.warn("Backend sync failed, but Firebase user created:",c.error)}catch(a){console.warn("Backend sync failed, but Firebase user created:",a)}return{success:!0,user:{id:r.user.uid,email:r.user.email||"",username:i,subscription_status:"demo"},token:r.idToken,userId:r.user.uid,isNewUser:!0,message:"Registration successful! Please check your email to verify your account before logging in.",needsVerification:!0}}catch(e){return console.error("Registration error:",e),e.code==="auth/email-already-in-use"?{success:!1,error:"An account with this email already exists"}:e.code==="auth/weak-password"?{success:!1,error:"Password is too weak. Please choose a stronger password."}:e.code==="auth/invalid-email"?{success:!1,error:"Invalid email address"}:{success:!1,error:"Registration failed. Please try again."}}},async registerFirebase(s){try{const e={credential:s.idToken,email:s.email,username:s.displayName||s.email?.split("@")[0]||"User"};console.log("🔄 Sending to backend:",{...e,credential:"[REDACTED]"});const t=await fetch(Xr.auth.registerFirebase,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();return t.ok?{success:!0,user:r.user,token:r.token,userId:r.userId,isNewUser:r.isNewUser}:{success:!1,error:r.error||"Firebase registration failed"}}catch(e){return console.error("Firebase registration error:",e),{success:!1,error:"Firebase registration failed. Please try again."}}},async getProfile(){try{if(!re)throw new Error("Firebase auth not initialized");const s=re.currentUser;if(!s)return{success:!1,error:"User not found or invalid token"};const e=s.email?.split("@")[0]||"User";return{success:!0,user:{id:s.uid,email:s.email||"",username:e,subscription_status:"demo"}}}catch(s){return console.error("Get profile error:",s),{success:!1,error:"Failed to get user profile"}}},async resendVerification(){try{return await of(),{success:!0,message:"Verification email sent! Please check your inbox."}}catch(s){return console.error("Resend verification error:",s),{success:!1,error:"Failed to resend verification email"}}}},df="modulepreload",uf=function(s){return"/"+s},Di={},Is=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");i=l(t.map(d=>{if(d=uf(d),d in Di)return;Di[d]=!0;const h=d.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":df,h||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),h)return new Promise((f,g)=>{m.addEventListener("load",f),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},hf=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Is(async()=>{const{default:r}=await Promise.resolve().then(()=>Zt);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Cn extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class mf extends Cn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ui extends Cn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $i extends Cn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qr;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Qr||(Qr={}));var ff=function(s,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(u){o(u)}}function l(h){try{d(r.throw(h))}catch(u){o(u)}}function d(h){h.done?a(h.value):i(h.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};class pf{constructor(e,{headers:t={},customFetch:r,region:i=Qr.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=hf(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return ff(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=t;let c={},{region:l}=t;l||(l=this.region);const d=new URL(`${this.url}/${e}`);l&&l!=="any"&&(c["x-region"]=l,d.searchParams.set("forceFunctionRegion",l));let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const u=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h}).catch(b=>{throw new mf(b)}),m=u.headers.get("x-relay-error");if(m&&m==="true")throw new Ui(u);if(!u.ok)throw new $i(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield u.json():f==="application/octet-stream"?g=yield u.blob():f==="text/event-stream"?g=u:f==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null,response:u}}catch(i){return{data:null,error:i,response:i instanceof $i||i instanceof Ui?i.context:void 0}}})}}var Z={},Pt={},Ct={},At={},Rt={},Ot={},gf=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Kt=gf();const xf=Kt.fetch,Co=Kt.fetch.bind(Kt),Ao=Kt.Headers,yf=Kt.Request,bf=Kt.Response,Zt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ao,Request:yf,Response:bf,default:Co,fetch:xf},Symbol.toStringTag,{value:"Module"})),vf=ml(Zt);var Ms={},Bi;function Ro(){if(Bi)return Ms;Bi=1,Object.defineProperty(Ms,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ms.default=s,Ms}var Fi;function Oo(){if(Fi)return Ot;Fi=1;var s=Ot&&Ot.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ot,"__esModule",{value:!0});const e=s(vf),t=s(Ro());class r{constructor(a){var o,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let l=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,u,m,f;let g=null,b=null,y=null,x=d.status,N=d.statusText;if(d.ok){if(this.method!=="HEAD"){const w=await d.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?b=w:b=JSON.parse(w))}const k=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),_=(m=d.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");k&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(g={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,y=null,x=406,N="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const k=await d.text();try{g=JSON.parse(k),Array.isArray(g)&&d.status===404&&(b=[],g=null,x=200,N="OK")}catch{d.status===404&&k===""?(x=204,N="No Content"):g={message:k}}if(g&&this.isMaybeSingle&&(!((f=g?.details)===null||f===void 0)&&f.includes("0 rows"))&&(g=null,x=200,N="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:b,count:y,status:x,statusText:N}});return this.shouldThrowOnError||(l=l.catch(d=>{var h,u,m;return{error:{message:`${(h=d?.name)!==null&&h!==void 0?h:"FetchError"}: ${d?.message}`,details:`${(u=d?.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(m=d?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,o)}returns(){return this}overrideTypes(){return this}}return Ot.default=r,Ot}var qi;function Lo(){if(qi)return Rt;qi=1;var s=Rt&&Rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rt,"__esModule",{value:!0});const e=s(Oo());class t extends e.default{select(i){let a=!1;const o=(i??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:c,referencedTable:l=c}={}){const d=l?`${l}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:c=o}={}){const l=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(d,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:c=!1,wal:l=!1,format:d="text"}={}){var h;const u=[i?"analyze":null,a?"verbose":null,o?"settings":null,c?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${m}"; options=${u};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Rt.default=t,Rt}var Wi;function An(){if(Wi)return At;Wi=1;var s=At&&At.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(At,"__esModule",{value:!0});const e=s(Lo());class t extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${d}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}}return At.default=t,At}var zi;function Mo(){if(zi)return Ct;zi=1;var s=Ct&&Ct.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ct,"__esModule",{value:!0});const e=s(An());class t{constructor(i,{headers:a={},schema:o,fetch:c}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=c}select(i,{head:a=!1,count:o}={}){const c=a?"HEAD":"GET";let l=!1;const d=(i??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",d),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var c;const l="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,u)=>h.concat(Object.keys(u)),[]);if(d.length>0){const h=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:c,defaultToNull:l=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),c&&this.headers.append("Prefer",`count=${c}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((m,f)=>m.concat(Object.keys(f)),[]);if(u.length>0){const m=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:a}={}){var o;const c="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Ct.default=t,Ct}var Hi;function wf(){if(Hi)return Pt;Hi=1;var s=Pt&&Pt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pt,"__esModule",{value:!0});const e=s(Mo()),t=s(An());class r{constructor(a,{headers:o={},schema:c,fetch:l}={}){this.url=a,this.headers=new Headers(o),this.schemaName=c,this.fetch=l}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:c=!1,get:l=!1,count:d}={}){var h;let u;const m=new URL(`${this.url}/rpc/${a}`);let f;c||l?(u=c?"HEAD":"GET",Object.entries(o).filter(([b,y])=>y!==void 0).map(([b,y])=>[b,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([b,y])=>{m.searchParams.append(b,y)})):(u="POST",f=o);const g=new Headers(this.headers);return d&&g.set("Prefer",`count=${d}`),new t.default({method:u,url:m,headers:g,schema:this.schemaName,body:f,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Pt.default=r,Pt}var Vi;function _f(){if(Vi)return Z;Vi=1;var s=Z&&Z.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Z,"__esModule",{value:!0}),Z.PostgrestError=Z.PostgrestBuilder=Z.PostgrestTransformBuilder=Z.PostgrestFilterBuilder=Z.PostgrestQueryBuilder=Z.PostgrestClient=void 0;const e=s(wf());Z.PostgrestClient=e.default;const t=s(Mo());Z.PostgrestQueryBuilder=t.default;const r=s(An());Z.PostgrestFilterBuilder=r.default;const i=s(Lo());Z.PostgrestTransformBuilder=i.default;const a=s(Oo());Z.PostgrestBuilder=a.default;const o=s(Ro());return Z.PostgrestError=o.default,Z.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},Z}var jf=_f();const kf=un(jf),{PostgrestClient:Nf,PostgrestQueryBuilder:y0,PostgrestFilterBuilder:b0,PostgrestTransformBuilder:v0,PostgrestBuilder:w0,PostgrestError:_0}=kf;class Sf{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ef="2.15.1",If=`realtime-js/${Ef}`,Tf="1.0.0",Zr=1e4,Pf=1e3,Cf=100;var cs;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(cs||(cs={}));var Y;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Y||(Y={}));var _e;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(_e||(_e={}));var en;(function(s){s.websocket="websocket"})(en||(en={}));var bt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(bt||(bt={}));class Af{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),a=t.getUint8(2);let o=this.HEADER_LENGTH+2;const c=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+a));o=o+a;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}class Do{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(q||(q={}));const Gi=(s,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,o)=>(a[o]=Rf(o,s,e,i),a),{})},Rf=(s,e,t,r)=>{const i=e.find(c=>c.name===s),a=i?.type,o=t[s];return a&&!r.includes(a)?Uo(a,o):tn(o)},Uo=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Df(e,t)}switch(s){case q.bool:return Of(e);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return Lf(e);case q.json:case q.jsonb:return Mf(e);case q.timestamp:return Uf(e);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return tn(e);default:return tn(e)}},tn=s=>s,Of=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Lf=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Mf=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Df=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let a;const o=s.slice(1,t);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(c=>Uo(e,c))}return s},Uf=s=>typeof s=="string"?s.replace(" ","T"):s,$o=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Pr{constructor(e,t,r={},i=Zr){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ki;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Ki||(Ki={}));class ds{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ds.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=ds.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ds.syncDiff(this.state,i,a,o),c())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const a=this.cloneDeep(e),o=this.transformState(t),c={},l={};return this.map(a,(d,h)=>{o[d]||(l[d]=h)}),this.map(o,(d,h)=>{const u=a[d];if(u){const m=h.map(y=>y.presence_ref),f=u.map(y=>y.presence_ref),g=h.filter(y=>f.indexOf(y.presence_ref)<0),b=u.filter(y=>m.indexOf(y.presence_ref)<0);g.length>0&&(c[d]=g),b.length>0&&(l[d]=b)}else c[d]=h}),this.syncDiff(a,{joins:c,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:a,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(c,l)=>{var d;const h=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(l),h.length>0){const u=e[c].map(f=>f.presence_ref),m=h.filter(f=>u.indexOf(f.presence_ref)<0);e[c].unshift(...m)}r(c,h,l)}),this.map(o,(c,l)=>{let d=e[c];if(!d)return;const h=l.map(u=>u.presence_ref);d=d.filter(u=>h.indexOf(u.presence_ref)<0),e[c]=d,i(c,d,l),d.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ji;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Ji||(Ji={}));var us;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(us||(us={}));var Fe;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Fe||(Fe={}));class Rn{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Y.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Pr(this,_e.join,this.params,this.timeout),this.rejoinTimer=new Do(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Y.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Y.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Y.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_e.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new ds(this),this.broadcastEndpointURL=$o(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Y.closed){const{config:{broadcast:a,presence:o,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[us.PRESENCE]&&this.bindings[us.PRESENCE].length>0,h={},u={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e?.(Fe.CHANNEL_ERROR,m)),this._onClose(()=>e?.(Fe.CLOSED)),this.updateJoinPayload(Object.assign({config:u},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){e?.(Fe.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(f=g?.length)!==null&&f!==void 0?f:0,y=[];for(let x=0;x<b;x++){const N=g[x],{filter:{event:v,schema:k,table:_,filter:w}}=N,j=m&&m[x];if(j&&j.event===v&&j.schema===k&&j.table===_&&j.filter===w)y.push(Object.assign(Object.assign({},N),{id:j.id}));else{this.unsubscribe(),this.state=Y.errored,e?.(Fe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Fe.SUBSCRIBED);return}}).receive("error",m=>{this.state=Y.errored,e?.(Fe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.(Fe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Y.joined&&e===us.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,c,l;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Y.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_e.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Pr(this,_e.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Y.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(a),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Pr(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Cf){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,a;const o=e.toLocaleLowerCase(),{close:c,error:l,leave:d,join:h}=_e;if(r&&[c,l,d,h].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,t,r);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,b,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(b=f.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(m,r)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var g,b,y,x,N,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const k=f.id,_=(g=f.filter)===null||g===void 0?void 0:g.event;return k&&((b=t.ids)===null||b===void 0?void 0:b.includes(k))&&(_==="*"||_?.toLocaleLowerCase()===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const k=(N=(x=f?.filter)===null||x===void 0?void 0:x.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return k==="*"||k===((v=t?.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:b,table:y,commit_timestamp:x,type:N,errors:v}=g;m=Object.assign(Object.assign({},{schema:b,table:y,commit_timestamp:x,eventType:N,new:{},old:{},errors:v}),this._getPayloadRecords(g))}f.callback(m,r)})}_isClosed(){return this.state===Y.closed}_isJoined(){return this.state===Y.joined}_isJoining(){return this.state===Y.joining}_isLeaving(){return this.state===Y.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),a={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Rn.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_e.close,{},e)}_onError(e){this._on(_e.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Y.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Gi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Gi(e.columns,e.old_record)),t}}const Yi=()=>{},Ds={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$f=[1e3,2e3,5e3,1e4],Bf=1e4,Ff=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qf{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zr,this.transport=null,this.heartbeatIntervalMs=Ds.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yi,this.ref=0,this.reconnectTimer=null,this.logger=Yi,this.conn=null,this.sendBuffer=[],this.serializer=new Af,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Is(async()=>{const{default:c}=await Promise.resolve().then(()=>Zt);return{default:c}},void 0).then(({default:c})=>c(...o)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${en.websocket}`,this.httpEndpoint=$o(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Sf.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Tf}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case cs.connecting:return bt.Connecting;case cs.open:return bt.Open;case cs.closing:return bt.Closing;default:return bt.Closed}}isConnected(){return this.connectionState()===bt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new Rn(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:i,ref:a}=e,o=()=>{this.encode(e,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${t} ${r} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Pf,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Ds.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:o}=t,c=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${r} ${i} ${c}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,a,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(_e.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Ff],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:If};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(_e.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Do(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ds.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,a,o,c,l,d;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Zr,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Ds.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(h=>$f[h-1]||Bf),this.encode=(l=e?.encode)!==null&&l!==void 0?l:((h,u)=>u(JSON.stringify(h))),this.decode=(d=e?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class On extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function X(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Wf extends On{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sn extends On{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var zf=function(s,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(u){o(u)}}function l(h){try{d(r.throw(h))}catch(u){o(u)}}function d(h){h.done?a(h.value):i(h.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};const Bo=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Is(async()=>{const{default:r}=await Promise.resolve().then(()=>Zt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Hf=()=>zf(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Is(()=>Promise.resolve().then(()=>Zt),void 0)).Response:Response}),rn=s=>{if(Array.isArray(s))return s.map(t=>rn(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=rn(r)}),e},Vf=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var Nt=function(s,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(u){o(u)}}function l(h){try{d(r.throw(h))}catch(u){o(u)}}function d(h){h.done?a(h.value):i(h.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};const Cr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Gf=(s,e,t)=>Nt(void 0,void 0,void 0,function*(){const r=yield Hf();s instanceof r&&!t?.noResolveJson?s.json().then(i=>{const a=s.status||500,o=i?.statusCode||a+"";e(new Wf(Cr(i),a,o))}).catch(i=>{e(new sn(Cr(i),i))}):e(new sn(Cr(s),s))}),Kf=(s,e,t,r)=>{const i={method:s,headers:e?.headers||{}};return s==="GET"||!r?i:(Vf(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Ts(s,e,t,r,i,a){return Nt(this,void 0,void 0,function*(){return new Promise((o,c)=>{s(t,Kf(e,r,i,a)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Gf(l,c,r))})})}function ar(s,e,t,r){return Nt(this,void 0,void 0,function*(){return Ts(s,"GET",e,t,r)})}function Pe(s,e,t,r,i){return Nt(this,void 0,void 0,function*(){return Ts(s,"POST",e,r,i,t)})}function nn(s,e,t,r,i){return Nt(this,void 0,void 0,function*(){return Ts(s,"PUT",e,r,i,t)})}function Jf(s,e,t,r){return Nt(this,void 0,void 0,function*(){return Ts(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Fo(s,e,t,r,i){return Nt(this,void 0,void 0,function*(){return Ts(s,"DELETE",e,r,i,t)})}var ne=function(s,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(u){o(u)}}function l(h){try{d(r.throw(h))}catch(u){o(u)}}function d(h){h.done?a(h.value):i(h.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};const Yf={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xf{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Bo(i)}uploadOrUpdate(e,t,r,i){return ne(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Xi),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(c=Object.assign(Object.assign({},c),i.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),u=yield(e=="PUT"?nn:Pe)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:c},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}upload(e,t,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return ne(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",t);try{let l;const d=Object.assign({upsert:Xi.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const u=yield nn(this.fetch,c.toString(),l,{headers:h});return{data:{path:a,fullPath:u.Key},error:null}}catch(l){if(X(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ne(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const a=yield Pe(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+a.url),c=o.searchParams.get("token");if(!c)throw new On("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}update(e,t,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ne(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}copy(e,t,r){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield Pe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return ne(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield Pe(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return ne(this,void 0,void 0,function*(){try{const i=yield Pe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}download(e,t){return ne(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),o=a?`?${a}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield ar(this.fetch,`${this.url}/${i}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(X(c))return{data:null,error:c};throw c}})}info(e){return ne(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ar(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:rn(r),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}exists(e){return ne(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Jf(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(X(r)&&r instanceof sn){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&i.push(a);const c=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});l!==""&&i.push(l);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return ne(this,void 0,void 0,function*(){try{return{data:yield Fo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}list(e,t,r){return ne(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Yf),t),{prefix:e||""});return{data:yield Pe(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}listV2(e,t){return ne(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Pe(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Qf="2.11.0",Zf={"X-Client-Info":`storage-js/${Qf}`};var Lt=function(s,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(u){o(u)}}function l(h){try{d(r.throw(h))}catch(u){o(u)}}function d(h){h.done?a(h.value):i(h.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};class ep{constructor(e,t={},r,i){const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Zf),t),this.fetch=Bo(r)}listBuckets(){return Lt(this,void 0,void 0,function*(){try{return{data:yield ar(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}getBucket(e){return Lt(this,void 0,void 0,function*(){try{return{data:yield ar(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Lt(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Lt(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(X(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Lt(this,void 0,void 0,function*(){try{return{data:yield Pe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Lt(this,void 0,void 0,function*(){try{return{data:yield Fo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}}class tp extends ep{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Xf(this.url,this.headers,e,this.fetch)}}const sp="2.56.0";let os="";typeof Deno<"u"?os="deno":typeof document<"u"?os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?os="react-native":os="node";const rp={"X-Client-Info":`supabase-js-${os}/${sp}`},np={headers:rp},ip={schema:"public"},ap={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},op={};var lp=function(s,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(u){o(u)}}function l(h){try{d(r.throw(h))}catch(u){o(u)}}function d(h){h.done?a(h.value):i(h.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};const cp=s=>{let e;return s?e=s:typeof fetch>"u"?e=Co:e=fetch,(...t)=>e(...t)},dp=()=>typeof Headers>"u"?Ao:Headers,up=(s,e,t)=>{const r=cp(t),i=dp();return(a,o)=>lp(void 0,void 0,void 0,function*(){var c;const l=(c=yield e())!==null&&c!==void 0?c:s;let d=new i(o?.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},o),{headers:d}))})};var hp=function(s,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(u){o(u)}}function l(h){try{d(r.throw(h))}catch(u){o(u)}}function d(h){h.done?a(h.value):i(h.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};function mp(s){return s.endsWith("/")?s:s+"/"}function fp(s,e){var t,r;const{db:i,auth:a,realtime:o,global:c}=s,{db:l,auth:d,realtime:h,global:u}=e,m={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},u),c),{headers:Object.assign(Object.assign({},(t=u?.headers)!==null&&t!==void 0?t:{}),(r=c?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>hp(this,void 0,void 0,function*(){return""})};return s.accessToken?m.accessToken=s.accessToken:delete m.accessToken,m}const qo="2.71.1",Ft=30*1e3,an=3,Ar=an*Ft,pp="http://localhost:9999",gp="supabase.auth.token",xp={"X-Client-Info":`gotrue-js/${qo}`},on="X-Supabase-Api-Version",Wo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bp=600*1e3;class Ln extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function T(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class vp extends Ln{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function wp(s){return T(s)&&s.name==="AuthApiError"}class zo extends Ln{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ht extends Ln{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class st extends ht{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _p(s){return T(s)&&s.name==="AuthSessionMissingError"}class Us extends ht{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $s extends ht{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bs extends ht{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jp(s){return T(s)&&s.name==="AuthImplicitGrantRedirectError"}class Qi extends ht{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ln extends ht{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rr(s){return T(s)&&s.name==="AuthRetryableFetchError"}class Zi extends ht{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class cn extends ht{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ea=` 	
\r=`.split(""),kp=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<ea.length;e+=1)s[ea[e].charCodeAt(0)]=-2;for(let e=0;e<or.length;e+=1)s[or[e].charCodeAt(0)]=e;return s})();function ta(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(or[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(or[r]),e.queuedBits-=6}}function Ho(s,e,t){const r=kp[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function sa(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{Ep(o,r,t)};for(let o=0;o<s.length;o+=1)Ho(s.charCodeAt(o),i,a);return e.join("")}function Np(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Sp(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}Np(r,e)}}function Ep(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ip(s){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)Ho(s.charCodeAt(i),t,r);return new Uint8Array(e)}function Tp(s){const e=[];return Sp(s,t=>e.push(t)),new Uint8Array(e)}function Pp(s){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return s.forEach(i=>ta(i,t,r)),ta(null,t,r),e.join("")}function Cp(s){return Math.round(Date.now()/1e3)+s}function Ap(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const we=()=>typeof window<"u"&&typeof document<"u",pt={tested:!1,writable:!1},Vo=()=>{if(!we())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pt.tested)return pt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),pt.tested=!0,pt.writable=!0}catch{pt.tested=!0,pt.writable=!1}return pt.writable};function Rp(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const Go=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Is(async()=>{const{default:r}=await Promise.resolve().then(()=>Zt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Op=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",qt=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},gt=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},tt=async(s,e)=>{await s.removeItem(e)};class gr{constructor(){this.promise=new gr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}gr.promiseConstructor=Promise;function Or(s){const e=s.split(".");if(e.length!==3)throw new cn("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yp.test(e[r]))throw new cn("JWT not in base64url format");return{header:JSON.parse(sa(e[0])),payload:JSON.parse(sa(e[1])),signature:Ip(e[2]),raw:{header:e[0],payload:e[1]}}}async function Lp(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Mp(s,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await s(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function Dp(s){return("0"+s.toString(16)).substr(-2)}function Up(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let a=0;a<56;a++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Dp).join("")}async function $p(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Bp(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await $p(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mt(s,e,t=!1){const r=Up();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await qt(s,`${e}-code-verifier`,i);const a=await Bp(r);return[a,r===a?"plain":"s256"]}const Fp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qp(s){const e=s.headers.get(on);if(!e||!e.match(Fp))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Wp(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function zp(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dt(s){if(!Hp.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lr(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ra(s){return JSON.parse(JSON.stringify(s))}var Vp=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};const yt=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Gp=[502,503,504];async function na(s){var e;if(!Op(s))throw new ln(yt(s),0);if(Gp.includes(s.status))throw new ln(yt(s),s.status);let t;try{t=await s.json()}catch(a){throw new zo(yt(a),a)}let r;const i=qp(s);if(i&&i.getTime()>=Wo["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Zi(yt(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new st}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Zi(yt(t),s.status,t.weak_password.reasons);throw new vp(yt(t),s.status||500,r)}const Kp=(s,e,t,r)=>{const i={method:s,headers:e?.headers||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function L(s,e,t,r){var i;const a=Object.assign({},r?.headers);a[on]||(a[on]=Wo["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Jp(s,e,t+c,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function Jp(s,e,t,r,i,a){const o=Kp(e,r,i,a);let c;try{c=await s(t,Object.assign({},o))}catch(l){throw console.error(l),new ln(yt(l),0)}if(c.ok||await na(c),r?.noResolveJson)return c;try{return await c.json()}catch(l){await na(l)}}function Be(s){var e;let t=null;Zp(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Cp(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function ia(s){const e=Be(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function at(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Yp(s){return{data:s,error:null}}function Xp(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a}=s,o=Vp(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:c,user:l},error:null}}function Qp(s){return s}function Zp(s){return s.access_token&&s.refresh_token&&s.expires_in}const Mr=["global","local","others"];var eg=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(s);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(s,r[i])&&(t[r[i]]=s[r[i]]);return t};class tg{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Go(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Mr[0]){if(Mr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mr.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:at})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=eg(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Xp,redirectTo:t?.redirectTo})}catch(t){if(T(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:at})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,a,o,c,l;try{const d={nextPage:null,lastPage:0,total:0},h=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Qp});if(h.error)throw h.error;const u=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const b=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);d[`${y}Page`]=b}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(T(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Dt(e);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:at})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Dt(e);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:at})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Dt(e);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:at})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Dt(e.userId);try{const{data:t,error:r}=await L(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(T(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Dt(e.userId),Dt(e.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}}}function aa(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function sg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ut={debug:!!(globalThis&&Vo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ko extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rg extends Ko{}async function ng(s,e,t){Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw Ut.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new rg(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Ut.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}sg();const ig={url:pp,storageKey:gp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function oa(s,e,t){return await t()}const $t={};class xs{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xs.nextInstanceID,xs.nextInstanceID+=1,this.instanceID>0&&we()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},ig),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new tg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Go(i.fetch),this.lock=i.lock||oa,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:we()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=ng:this.lock=oa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Vo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=aa(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=aa(this.memoryStorage)),we()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=$t[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){$t[this.storageKey]=Object.assign(Object.assign({},$t[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=$t[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){$t[this.storageKey]=Object.assign(Object.assign({},$t[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Rp(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),we()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),jp(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return T(t)?{error:t}:{error:new zo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const a=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Be}),{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(T(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,r,i;try{let a;if("email"in e){const{email:h,password:u,options:m}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Mt(this.storage,this.storageKey)),a=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:h,password:u,data:(t=m?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:f,code_challenge_method:g},xform:Be})}else if("phone"in e){const{phone:h,password:u,options:m}=e;a=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(r=m?.data)!==null&&r!==void 0?r:{},channel:(i=m?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Be})}else throw new $s("You must provide either an email or phone number and a password");const{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(T(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:o,options:c}=e;t=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ia})}else if("phone"in e){const{phone:a,password:o,options:c}=e;t=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ia})}else throw new $s("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Us}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,a,o,c,l,d,h,u,m,f;let g,b;if("message"in e)g=e.message,b=e.signature;else{const{chain:y,wallet:x,statement:N,options:v}=e;let k;if(we())if(typeof x=="object")k=x;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))k=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=x}const _=new URL((t=v?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in k&&k.signIn){const w=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),N?{statement:N}:null));let j;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")j=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)j=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)g=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),b=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(r=v?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=v?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((u=(h=v?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||u===void 0)&&u.length?["Resources",...v.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const w=await k.signMessage(new TextEncoder().encode(g),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=w}}try{const{data:y,error:x}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Pp(b)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Be});if(x)throw x;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Us}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:x})}catch(y){if(T(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await gt(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:a,error:o}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Be});if(await tt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Us}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(T(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:a,nonce:o}=e,c=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Be}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Us}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,a,o;try{if("email"in e){const{email:c,options:l}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Mt(this.storage,this.storageKey));const{error:u}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=l?.data)!==null&&t!==void 0?t:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:c,options:l}=e,{data:d,error:h}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(a=l?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new $s("You must provide either an email or phone number.")}catch(c){if(T(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let i,a;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:c}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Be});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,d=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(T(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Mt(this.storage,this.storageKey)),await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Yp})}catch(a){if(T(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new st;const{error:i}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(T(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:o}=await L(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:o,error:c}=await L(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:c}}throw new $s("You must provide either an email or phone number and a type")}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await gt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ar:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await gt(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=Lr()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,h))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:at}):await this._useSession(async t=>{var r,i,a;const{data:o,error:c}=t;if(c)throw c;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new st}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:at})})}catch(t){if(T(t))return _p(t)&&(await this._removeSession(),await tt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new st;const o=i.session;let c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await Mt(this.storage,this.storageKey));const{data:d,error:h}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:o.access_token,xform:at});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new st;const t=Date.now()/1e3;let r=t,i=!0,a=null;const{payload:o}=Or(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(T(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:c}=t;if(c)throw c;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new st;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!we())throw new Bs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Qi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bs("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qi("No code detected.");const{data:N,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:c,expires_at:l,token_type:d}=e;if(!a||!c||!o||!d)throw new Bs("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(c);let m=h+u;l&&(m=parseInt(l));const f=m-h;f*1e3<=Ft&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${u}s`);const g=m-u;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,h);const{data:b,error:y}=await this._getUser(a);if(y)throw y;const x={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:u,expires_at:m,refresh_token:o,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(T(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{error:a};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(wp(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await tt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Ap(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:a},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Mt(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(T(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async a=>{var o,c,l,d,h;const{data:u,error:m}=a;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return we()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(T(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:o}=t;if(o)throw o;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Mp(async i=>(i>0&&await Lp(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Be})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Rr(a)&&Date.now()+o-r<Ft})}catch(r){if(this._debug(t,"error",r),T(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),we()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await gt(this.storage,this.storageKey);if(i&&this.userStorage){let o=await gt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await qt(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o?.user)!==null&&e!==void 0?e:Lr()}else if(i&&!i.user&&!i.user){const o=await gt(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await tt(this.storage,this.storageKey+"-user"),await qt(this.storage,this.storageKey,i)):i.user=Lr()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ar;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Ar}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Rr(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(i.access_token);!c&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new st;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new gr;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new st;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),T(a)){const o={session:null,error:a};return Rr(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await qt(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const a=ra(i);await qt(this.storage,this.storageKey,a)}else{const i=ra(t);await qt(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await tt(this.storage,this.storageKey),await tt(this.storage,this.storageKey+"-code-verifier"),await tt(this.storage,this.storageKey+"-user"),this.userStorage&&await tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&we()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ft);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ft);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ft}ms, refresh threshold is ${an} ticks`),i<=an&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ko)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!we()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Mt(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await L(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:a,error:o}=t;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await L(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(T(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:c}=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(t){if(T(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:a}=t;return a?{data:null,error:a}:await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(T(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Or(i.access_token);let c=null;o.aal&&(c=o.aal);let l=c;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+bp>i)return r;const{data:a,error:o}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};r=f.session.access_token}const{header:i,payload:a,signature:o,raw:{header:c,payload:l}}=Or(r);t?.allowExpired||Wp(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:a,header:i,signature:o},error:null}}const h=zp(i.alg),u=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,u,o,Tp(`${c}.${l}`)))throw new cn("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(r){if(T(r))return{data:null,error:r};throw r}}}xs.nextInstanceID=0;const ag=xs;class og extends ag{constructor(e){super(e)}}var lg=function(s,e,t,r){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function c(h){try{d(r.next(h))}catch(u){o(u)}}function l(h){try{d(r.throw(h))}catch(u){o(u)}}function d(h){h.done?a(h.value):i(h.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};class cg{constructor(e,t,r){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=mp(e),l=new URL(c);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:ip,realtime:op,auth:Object.assign(Object.assign({},ap),{storageKey:d}),global:np},u=fp(r??{},h);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=up(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Nf(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new tp(this.storageUrl.href,this.headers,this.fetch,r?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new pf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return lg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:a,flowType:o,lock:c,debug:l},d,h){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new og({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:c,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new qf(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dg=(s,e,t)=>new cg(s,e,t);function ug(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ug()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jo="https://fylvbbbnrykuawayvkat.supabase.co",hg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5bHZiYmJucnlrdWF3YXl2a2F0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1Mzg4MjgsImV4cCI6MjA3MTExNDgyOH0.zs_KlULsvZdXtXeqPJBtGyBEdZF65uGTCX06mvAQfNU",ee=dg(Jo,hg,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),ge={async getUserByUsername(s){const{data:e,error:t}=await ee.from("users").select("*").eq("username",s).single();return{data:e,error:t}},async getUserByEmail(s){const{data:e,error:t}=await ee.from("users").select("*").eq("email",s).single();return{data:e,error:t}},async getUserById(s){const{data:e,error:t}=await ee.from("users").select("*").eq("id",s).single();return{data:e,error:t}},async createUser(s){const{data:e,error:t}=await ee.from("users").insert(s).select().single();return{data:e,error:t}},async updateUser(s,e){const{data:t,error:r}=await ee.from("users").update(e).eq("id",s).select().single();return{data:t,error:r}},async getSubscriptionPlans(){const{data:s,error:e}=await ee.from("subscription_plans").select("*").eq("is_active",!0).order("price_pkr",{ascending:!0});return{data:s,error:e}},async getUserSubscription(s){const{data:e,error:t}=await ee.from("user_subscriptions").select(`
        *,
        subscription_plans(*)
      `).eq("user_id",s).eq("status","active").single();return{data:e,error:t}},async createUserSubscription(s){const{data:e,error:t}=await ee.from("user_subscriptions").insert(s).select().single();return{data:e,error:t}},async updateUserSubscription(s,e){const{data:t,error:r}=await ee.from("user_subscriptions").update(e).eq("id",s).select().single();return{data:t,error:r}},async createPaymentTransaction(s){const{data:e,error:t}=await ee.from("payment_transactions").insert(s).select().single();return{data:e,error:t}},async getPaymentTransaction(s){const{data:e,error:t}=await ee.from("payment_transactions").select("*").eq("transaction_id",s).single();return{data:e,error:t}},async getPaymentTransactionBySession(s){const{data:e,error:t}=await ee.from("payment_transactions").select("*").eq("session_id",s).single();return{data:e,error:t}},async getUserPaymentHistory(s){const{data:e,error:t}=await ee.from("payment_transactions").select(`
        *,
        subscription_plans(name)
      `).eq("user_id",s).order("created_at",{ascending:!1});return{data:e,error:t}},async getUserAnalytics(s){const{data:e,error:t}=await ee.from("user_analytics").select("*").eq("user_id",s).single();return{data:e,error:t}},async cancelUserSubscription(s){try{const{data:e,error:t}=await ee.from("user_subscriptions").update({status:"cancelled"}).eq("user_id",s).eq("status","active").select().single();if(t)return{success:!1,error:t.message};const{error:r}=await ee.from("users").update({subscription_status:"demo"}).eq("id",s);return r?{success:!1,error:r.message}:{success:!0,data:e}}catch(e){return{success:!1,error:e.message}}},async updateUserSubscriptionByUserId(s,e){try{const{data:t,error:r}=await ee.from("user_subscriptions").update({plan_id:e.plan_id,status:"active"}).eq("user_id",s).eq("status","active").select().single();if(r)return{success:!1,error:r.message};const{error:i}=await ee.from("users").update({subscription_status:e.subscription_type}).eq("id",s);return i?{success:!1,error:i.message}:{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}}};console.log("🔗 Supabase Configuration:",{url:Jo,hasAnonKey:!0,environment:"production"});class mg{isDevMode(){return new URLSearchParams(window.location.search).get("dev")==="true"}async getSubscriptionStatus(e){if(this.isDevMode())return console.log("Running in dev mode, returning premium subscription"),{subscription_type:"premium",status:"active",plan_name:"Premium Plan (Dev Mode)",end_date:new Date(Date.now()+365*24*60*60*1e3).toISOString(),days_remaining:365};try{const t=localStorage.getItem("medMasterToken");if(!t)return{subscription_type:"demo",status:null};const r=await fetch(Xr.subscription.status,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)return console.warn("Could not fetch subscription status:",r.status,r.statusText),{subscription_type:"demo",status:null};const i=await r.json();return{subscription_type:i.subscription_type||"demo",status:i.status||null,plan_name:i.plan_name,end_date:i.end_date,days_remaining:i.days_remaining}}catch(t){return console.error("Error fetching subscription status:",t),{subscription_type:"demo",status:null}}}async getUsageStats(e){if(this.isDevMode())return{questions_today:0,clinical_cases_today:0,questions_limit:999,clinical_cases_limit:999,subscription_type:"premium"};if(!e)return{questions_today:0,clinical_cases_today:0,questions_limit:10,clinical_cases_limit:2,subscription_type:"demo"};try{const t=await this.getSubscriptionStatus(e),{data:r,error:i}=await ge.getUserAnalytics(e);let a=0,o=0;!i&&r&&(a=r.questions_answered_today||0,o=r.clinical_cases_completed_today||0);const c=this.getFeatureLimits(t.subscription_type);return{questions_today:a,clinical_cases_today:o,questions_limit:c.questions_per_day,clinical_cases_limit:c.clinical_cases_per_day,subscription_type:t.subscription_type}}catch(t){return console.error("Error fetching usage stats:",t),{questions_today:0,clinical_cases_today:0,questions_limit:10,clinical_cases_limit:2,subscription_type:"demo"}}}async checkFeatureAccess(e,t=1){if(this.isDevMode())return{allowed:!0,remaining_usage:-1,upgrade_required:!1,message:"Dev mode - unlimited access"};try{return localStorage.getItem("medMasterToken")?{allowed:!0,remaining_usage:-1,upgrade_required:!1,message:"Access granted"}:{allowed:!1,upgrade_required:!0,message:"Please log in to access this feature"}}catch(r){return console.error("Error checking feature access:",r),{allowed:!1,upgrade_required:!0,message:"Unable to verify access. Please try again."}}}async getSubscriptionPlans(){try{const{data:e,error:t}=await ge.getSubscriptionPlans();if(t)throw new Error("Failed to fetch subscription plans");return{success:!0,plans:e||[]}}catch(e){return console.error("Error fetching subscription plans:",e),{success:!0,plans:[{id:1,name:"Starter",price:9.99,duration:"1 month",features:["Basic features","Limited questions"]},{id:2,name:"Popular",price:19.99,duration:"1 month",features:["All features","Unlimited questions"]},{id:3,name:"Premium",price:29.99,duration:"1 month",features:["All features","Priority support"]}]}}}isDemoUser(e){return e==="demo"}hasPremiumAccess(e){return e==="starter"||e==="popular"}getFeatureLimits(e){const t={demo:{questions_per_day:-1,clinical_cases_per_day:-1,flashcards_access:!0,analytics_access:!1},starter:{questions_per_day:-1,clinical_cases_per_day:-1,flashcards_access:!0,analytics_access:!0},popular:{questions_per_day:-1,clinical_cases_per_day:-1,flashcards_access:!0,analytics_access:!0}};return t[e]||t.demo}}const kt=new mg;function fg(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}const pg=s=>{switch(s){case"success":return yg;case"info":return vg;case"warning":return bg;case"error":return wg;default:return null}},gg=Array(12).fill(0),xg=({visible:s,className:e})=>S.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},S.createElement("div",{className:"sonner-spinner"},gg.map((t,r)=>S.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),yg=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},S.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),bg=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},S.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),vg=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},S.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wg=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},S.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_g=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},S.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),S.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),jg=()=>{const[s,e]=S.useState(document.hidden);return S.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s};let dn=1;class kg{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,a=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:dn++,o=this.toasts.find(l=>l.id===a),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:c,title:r}):l):this.addToast({title:r,...i,dismissible:c,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let a=r!==void 0,o;const c=i.then(async d=>{if(o=["resolve",d],S.isValidElement(d))a=!1,this.create({id:r,type:"default",message:d});else if(Sg(d)&&!d.ok){a=!1;const u=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description,g=typeof u=="object"&&!S.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:m,...g})}else if(d instanceof Error){a=!1;const u=typeof t.error=="function"?await t.error(d):t.error,m=typeof t.description=="function"?await t.description(d):t.description,g=typeof u=="object"&&!S.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:m,...g})}else if(t.success!==void 0){a=!1;const u=typeof t.success=="function"?await t.success(d):t.success,m=typeof t.description=="function"?await t.description(d):t.description,g=typeof u=="object"&&!S.isValidElement(u)?u:{message:u};this.create({id:r,type:"success",description:m,...g})}}).catch(async d=>{if(o=["reject",d],t.error!==void 0){a=!1;const h=typeof t.error=="function"?await t.error(d):t.error,u=typeof t.description=="function"?await t.description(d):t.description,f=typeof h=="object"&&!S.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:u,...f})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),l=()=>new Promise((d,h)=>c.then(()=>o[0]==="reject"?h(o[1]):d(o[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{const r=t?.id||dn++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const le=new kg,Ng=(s,e)=>{const t=e?.id||dn++;return le.addToast({title:s,...e,id:t}),t},Sg=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",Eg=Ng,Ig=()=>le.toasts,Tg=()=>le.getActiveToasts(),R=Object.assign(Eg,{success:le.success,info:le.info,warning:le.warning,error:le.error,custom:le.custom,message:le.message,promise:le.promise,dismiss:le.dismiss,loading:le.loading},{getHistory:Ig,getToasts:Tg});fg("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Fs(s){return s.label!==void 0}const Pg=3,Cg="24px",Ag="16px",la=4e3,Rg=356,Og=14,Lg=45,Mg=200;function Te(...s){return s.filter(Boolean).join(" ")}function Dg(s){const[e,t]=s.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const Ug=s=>{var e,t,r,i,a,o,c,l,d;const{invert:h,toast:u,unstyled:m,interacting:f,setHeights:g,visibleToasts:b,heights:y,index:x,toasts:N,expanded:v,removeToast:k,defaultRichColors:_,closeButton:w,style:j,cancelButtonStyle:E,actionButtonStyle:C,className:O="",descriptionClassName:z="",duration:G,position:W,gap:ce,expandByDefault:fe,classNames:A,icons:$,closeButtonAriaLabel:Se="Close toast"}=s,[Ue,de]=S.useState(null),[Ee,mt]=S.useState(null),[M,H]=S.useState(!1),[V,oe]=S.useState(!1),[Ie,F]=S.useState(!1),[Xe,D]=S.useState(!1),[U,Qe]=S.useState(!1),[xr,es]=S.useState(0),[tl,Dn]=S.useState(0),ts=S.useRef(u.duration||G||la),Un=S.useRef(null),$e=S.useRef(null),sl=x===0,rl=x+1<=b,ue=u.type,Et=u.dismissible!==!1,nl=u.className||"",il=u.descriptionClassName||"",Ps=S.useMemo(()=>y.findIndex(P=>P.toastId===u.id)||0,[y,u.id]),al=S.useMemo(()=>{var P;return(P=u.closeButton)!=null?P:w},[u.closeButton,w]),$n=S.useMemo(()=>u.duration||G||la,[u.duration,G]),yr=S.useRef(0),It=S.useRef(0),Bn=S.useRef(0),Tt=S.useRef(null),[ol,ll]=W.split("-"),Fn=S.useMemo(()=>y.reduce((P,Q,se)=>se>=Ps?P:P+Q.height,0),[y,Ps]),qn=jg(),cl=u.invert||h,br=ue==="loading";It.current=S.useMemo(()=>Ps*ce+Fn,[Ps,Fn]),S.useEffect(()=>{ts.current=$n},[$n]),S.useEffect(()=>{H(!0)},[]),S.useEffect(()=>{const P=$e.current;if(P){const Q=P.getBoundingClientRect().height;return Dn(Q),g(se=>[{toastId:u.id,height:Q,position:u.position},...se]),()=>g(se=>se.filter(he=>he.toastId!==u.id))}},[g,u.id]),S.useLayoutEffect(()=>{if(!M)return;const P=$e.current,Q=P.style.height;P.style.height="auto";const se=P.getBoundingClientRect().height;P.style.height=Q,Dn(se),g(he=>he.find(te=>te.toastId===u.id)?he.map(te=>te.toastId===u.id?{...te,height:se}:te):[{toastId:u.id,height:se,position:u.position},...he])},[M,u.title,u.description,g,u.id,u.jsx,u.action,u.cancel]);const Ze=S.useCallback(()=>{oe(!0),es(It.current),g(P=>P.filter(Q=>Q.toastId!==u.id)),setTimeout(()=>{k(u)},Mg)},[u,k,g,It]);S.useEffect(()=>{if(u.promise&&ue==="loading"||u.duration===1/0||u.type==="loading")return;let P;return v||f||qn?(()=>{if(Bn.current<yr.current){const he=new Date().getTime()-yr.current;ts.current=ts.current-he}Bn.current=new Date().getTime()})():(()=>{ts.current!==1/0&&(yr.current=new Date().getTime(),P=setTimeout(()=>{u.onAutoClose==null||u.onAutoClose.call(u,u),Ze()},ts.current))})(),()=>clearTimeout(P)},[v,f,u,ue,qn,Ze]),S.useEffect(()=>{u.delete&&(Ze(),u.onDismiss==null||u.onDismiss.call(u,u))},[Ze,u.delete]);function dl(){var P;if($?.loading){var Q;return S.createElement("div",{className:Te(A?.loader,u==null||(Q=u.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":ue==="loading"},$.loading)}return S.createElement(xg,{className:Te(A?.loader,u==null||(P=u.classNames)==null?void 0:P.loader),visible:ue==="loading"})}const ul=u.icon||$?.[ue]||pg(ue);var Wn,zn;return S.createElement("li",{tabIndex:0,ref:$e,className:Te(O,nl,A?.toast,u==null||(e=u.classNames)==null?void 0:e.toast,A?.default,A?.[ue],u==null||(t=u.classNames)==null?void 0:t[ue]),"data-sonner-toast":"","data-rich-colors":(Wn=u.richColors)!=null?Wn:_,"data-styled":!(u.jsx||u.unstyled||m),"data-mounted":M,"data-promise":!!u.promise,"data-swiped":U,"data-removed":V,"data-visible":rl,"data-y-position":ol,"data-x-position":ll,"data-index":x,"data-front":sl,"data-swiping":Ie,"data-dismissible":Et,"data-type":ue,"data-invert":cl,"data-swipe-out":Xe,"data-swipe-direction":Ee,"data-expanded":!!(v||fe&&M),"data-testid":u.testId,style:{"--index":x,"--toasts-before":x,"--z-index":N.length-x,"--offset":`${V?xr:It.current}px`,"--initial-height":fe?"auto":`${tl}px`,...j,...u.style},onDragEnd:()=>{F(!1),de(null),Tt.current=null},onPointerDown:P=>{P.button!==2&&(br||!Et||(Un.current=new Date,es(It.current),P.target.setPointerCapture(P.pointerId),P.target.tagName!=="BUTTON"&&(F(!0),Tt.current={x:P.clientX,y:P.clientY})))},onPointerUp:()=>{var P,Q,se;if(Xe||!Et)return;Tt.current=null;const he=Number(((P=$e.current)==null?void 0:P.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Cs=Number(((Q=$e.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),te=new Date().getTime()-((se=Un.current)==null?void 0:se.getTime()),pe=Ue==="x"?he:Cs,As=Math.abs(pe)/te;if(Math.abs(pe)>=Lg||As>.11){es(It.current),u.onDismiss==null||u.onDismiss.call(u,u),mt(Ue==="x"?he>0?"right":"left":Cs>0?"down":"up"),Ze(),D(!0);return}else{var be,ve;(be=$e.current)==null||be.style.setProperty("--swipe-amount-x","0px"),(ve=$e.current)==null||ve.style.setProperty("--swipe-amount-y","0px")}Qe(!1),F(!1),de(null)},onPointerMove:P=>{var Q,se,he;if(!Tt.current||!Et||((Q=window.getSelection())==null?void 0:Q.toString().length)>0)return;const te=P.clientY-Tt.current.y,pe=P.clientX-Tt.current.x;var As;const be=(As=s.swipeDirections)!=null?As:Dg(W);!Ue&&(Math.abs(pe)>1||Math.abs(te)>1)&&de(Math.abs(pe)>Math.abs(te)?"x":"y");let ve={x:0,y:0};const Hn=ft=>1/(1.5+Math.abs(ft)/20);if(Ue==="y"){if(be.includes("top")||be.includes("bottom"))if(be.includes("top")&&te<0||be.includes("bottom")&&te>0)ve.y=te;else{const ft=te*Hn(te);ve.y=Math.abs(ft)<Math.abs(te)?ft:te}}else if(Ue==="x"&&(be.includes("left")||be.includes("right")))if(be.includes("left")&&pe<0||be.includes("right")&&pe>0)ve.x=pe;else{const ft=pe*Hn(pe);ve.x=Math.abs(ft)<Math.abs(pe)?ft:pe}(Math.abs(ve.x)>0||Math.abs(ve.y)>0)&&Qe(!0),(se=$e.current)==null||se.style.setProperty("--swipe-amount-x",`${ve.x}px`),(he=$e.current)==null||he.style.setProperty("--swipe-amount-y",`${ve.y}px`)}},al&&!u.jsx&&ue!=="loading"?S.createElement("button",{"aria-label":Se,"data-disabled":br,"data-close-button":!0,onClick:br||!Et?()=>{}:()=>{Ze(),u.onDismiss==null||u.onDismiss.call(u,u)},className:Te(A?.closeButton,u==null||(r=u.classNames)==null?void 0:r.closeButton)},(zn=$?.close)!=null?zn:_g):null,(ue||u.icon||u.promise)&&u.icon!==null&&($?.[ue]!==null||u.icon)?S.createElement("div",{"data-icon":"",className:Te(A?.icon,u==null||(i=u.classNames)==null?void 0:i.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||dl():null,u.type!=="loading"?ul:null):null,S.createElement("div",{"data-content":"",className:Te(A?.content,u==null||(a=u.classNames)==null?void 0:a.content)},S.createElement("div",{"data-title":"",className:Te(A?.title,u==null||(o=u.classNames)==null?void 0:o.title)},u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title),u.description?S.createElement("div",{"data-description":"",className:Te(z,il,A?.description,u==null||(c=u.classNames)==null?void 0:c.description)},typeof u.description=="function"?u.description():u.description):null),S.isValidElement(u.cancel)?u.cancel:u.cancel&&Fs(u.cancel)?S.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||E,onClick:P=>{Fs(u.cancel)&&Et&&(u.cancel.onClick==null||u.cancel.onClick.call(u.cancel,P),Ze())},className:Te(A?.cancelButton,u==null||(l=u.classNames)==null?void 0:l.cancelButton)},u.cancel.label):null,S.isValidElement(u.action)?u.action:u.action&&Fs(u.action)?S.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||C,onClick:P=>{Fs(u.action)&&(u.action.onClick==null||u.action.onClick.call(u.action,P),!P.defaultPrevented&&Ze())},className:Te(A?.actionButton,u==null||(d=u.classNames)==null?void 0:d.actionButton)},u.action.label):null)};function ca(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function $g(s,e){const t={};return[s,e].forEach((r,i)=>{const a=i===1,o=a?"--mobile-offset":"--offset",c=a?Ag:Cg;function l(d){["top","right","bottom","left"].forEach(h=>{t[`${o}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?t[`${o}-${d}`]=c:t[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):l(c)}),t}const Bg=S.forwardRef(function(e,t){const{id:r,invert:i,position:a="bottom-right",hotkey:o=["altKey","KeyT"],expand:c,closeButton:l,className:d,offset:h,mobileOffset:u,theme:m="light",richColors:f,duration:g,style:b,visibleToasts:y=Pg,toastOptions:x,dir:N=ca(),gap:v=Og,icons:k,containerAriaLabel:_="Notifications"}=e,[w,j]=S.useState([]),E=S.useMemo(()=>r?w.filter(M=>M.toasterId===r):w.filter(M=>!M.toasterId),[w,r]),C=S.useMemo(()=>Array.from(new Set([a].concat(E.filter(M=>M.position).map(M=>M.position)))),[E,a]),[O,z]=S.useState([]),[G,W]=S.useState(!1),[ce,fe]=S.useState(!1),[A,$]=S.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Se=S.useRef(null),Ue=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),de=S.useRef(null),Ee=S.useRef(!1),mt=S.useCallback(M=>{j(H=>{var V;return(V=H.find(oe=>oe.id===M.id))!=null&&V.delete||le.dismiss(M.id),H.filter(({id:oe})=>oe!==M.id)})},[]);return S.useEffect(()=>le.subscribe(M=>{if(M.dismiss){requestAnimationFrame(()=>{j(H=>H.map(V=>V.id===M.id?{...V,delete:!0}:V))});return}setTimeout(()=>{Zc.flushSync(()=>{j(H=>{const V=H.findIndex(oe=>oe.id===M.id);return V!==-1?[...H.slice(0,V),{...H[V],...M},...H.slice(V+1)]:[M,...H]})})})}),[w]),S.useEffect(()=>{if(m!=="system"){$(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;const M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:H})=>{$(H?"dark":"light")})}catch{M.addListener(({matches:V})=>{try{$(V?"dark":"light")}catch(oe){console.error(oe)}})}},[m]),S.useEffect(()=>{w.length<=1&&W(!1)},[w]),S.useEffect(()=>{const M=H=>{var V;if(o.every(F=>H[F]||H.code===F)){var Ie;W(!0),(Ie=Se.current)==null||Ie.focus()}H.code==="Escape"&&(document.activeElement===Se.current||(V=Se.current)!=null&&V.contains(document.activeElement))&&W(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[o]),S.useEffect(()=>{if(Se.current)return()=>{de.current&&(de.current.focus({preventScroll:!0}),de.current=null,Ee.current=!1)}},[Se.current]),S.createElement("section",{ref:t,"aria-label":`${_} ${Ue}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((M,H)=>{var V;const[oe,Ie]=M.split("-");return E.length?S.createElement("ol",{key:M,dir:N==="auto"?ca():N,tabIndex:-1,ref:Se,className:d,"data-sonner-toaster":!0,"data-sonner-theme":A,"data-y-position":oe,"data-x-position":Ie,style:{"--front-toast-height":`${((V=O[0])==null?void 0:V.height)||0}px`,"--width":`${Rg}px`,"--gap":`${v}px`,...b,...$g(h,u)},onBlur:F=>{Ee.current&&!F.currentTarget.contains(F.relatedTarget)&&(Ee.current=!1,de.current&&(de.current.focus({preventScroll:!0}),de.current=null))},onFocus:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||Ee.current||(Ee.current=!0,de.current=F.relatedTarget)},onMouseEnter:()=>W(!0),onMouseMove:()=>W(!0),onMouseLeave:()=>{ce||W(!1)},onDragEnd:()=>W(!1),onPointerDown:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||fe(!0)},onPointerUp:()=>fe(!1)},E.filter(F=>!F.position&&H===0||F.position===M).map((F,Xe)=>{var D,U;return S.createElement(Ug,{key:F.id,icons:k,index:Xe,toast:F,defaultRichColors:f,duration:(D=x?.duration)!=null?D:g,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:i,visibleToasts:y,closeButton:(U=x?.closeButton)!=null?U:l,interacting:ce,position:M,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,closeButtonAriaLabel:x?.closeButtonAriaLabel,removeToast:mt,toasts:E.filter(Qe=>Qe.position==F.position),heights:O.filter(Qe=>Qe.position==F.position),setHeights:z,expandByDefault:c,gap:v,expanded:G,swipeDirections:e.swipeDirections})})):null}))}),Mn=({onSuccess:s,onError:e,disabled:t=!1,text:r="Continue with Google"})=>{const[i,a]=p.useState(!1);p.useEffect(()=>{(async()=>{try{const l=await pr();l&&l.idToken&&l.user&&(console.log("Redirect result found:",l),s({uid:l.user.uid,email:l.user.email,displayName:l.user.displayName,photoURL:l.user.photoURL,idToken:l.idToken}))}catch(l){console.error("Error handling redirect result:",l),e?.("Authentication failed after redirect. Please try again.")}})()},[]);const o=async()=>{if(!(t||i)){a(!0);try{const c=await Po();if(c.pending){console.log("Redirecting to Google Sign-In...");return}c.idToken&&c.user?s({uid:c.user.uid,email:c.user.email,displayName:c.user.displayName,photoURL:c.user.photoURL,idToken:c.idToken}):e?.("Failed to get authentication token")}catch(c){console.error("Google Sign-In error:",c);let l="Failed to sign in with Google";c.code==="auth/popup-closed-by-user"?l="Sign-in was cancelled":c.code==="auth/popup-blocked"?l="Pop-up was blocked. Please try again.":c.code==="auth/unauthorized-domain"?l="This domain is not authorized for Google Sign-In. Please check your Firebase configuration.":c.code==="auth/operation-not-allowed"?l="Google Sign-In is not enabled. Please check your Firebase project settings.":c.message==="Firebase not configured"&&(l="Google Sign-In is not configured. Please check your Firebase settings."),e?.(l),a(!1)}}};return n.jsxs("button",{type:"button",onClick:o,disabled:t||i,className:"w-full bg-white hover:bg-gray-50 text-gray-900 font-medium py-3 px-6 rounded-lg border border-gray-300 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 group",children:[i?n.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),i?"Signing in...":r]})},Fg=({onAuthSuccess:s,onBackToLanding:e,initialMode:t="login"})=>{const[r,i]=p.useState(t==="login"),[a,o]=p.useState(""),[c,l]=p.useState(""),[d,h]=p.useState(null),[u,m]=p.useState(!1);p.useEffect(()=>{(async()=>{try{const x=await pr();x&&x.idToken&&(console.log("Processing Google Sign-In redirect result for auth page:",x),await f(x.idToken))}catch(x){console.error("Error handling Google Sign-In redirect:",x),h("Authentication failed after redirect. Please try again.")}})()},[]);const f=async y=>{h(null),m(!0);try{throw new Error("Google sign-in not implemented yet")}catch(x){const N=x.message||"An error occurred during Google sign-in";h(N),R.error(N)}finally{m(!1)}},g=y=>{h(`Google Sign-In error: ${y}`)},b=async y=>{y.preventDefault(),h(null),m(!0);try{let x;if(r?x=await ke.login({email:a,password:c}):x=await ke.register({email:a,password:c}),!x.success||!x.user||!x.token)throw new Error(x.error||"Authentication failed");localStorage.setItem("medMasterToken",x.token);try{const N=await kt.getSubscriptionStatus(x.user.id);s(x.token,x.user.email,x.user.username,N.subscription_type,x.user.id),R.success(`Welcome ${x.user.username}! ${r?"Logged in":"Account created"} successfully.`)}catch(N){console.warn("Could not fetch subscription status:",N),s(x.token,x.user.email,x.user.username,"demo",x.user.id),R.success("Welcome! Logged in successfully.")}}catch(x){h(x.message||"Authentication failed")}finally{m(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-900",children:n.jsxs("div",{className:"w-full max-w-md bg-gray-800 border border-gray-700 rounded-xl p-8 shadow-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx(dr,{className:"h-16 w-16 mx-auto mb-4 text-blue-500"}),n.jsxs("h2",{className:"text-3xl font-extrabold text-white",children:["Welcome to ",n.jsx("span",{className:"text-blue-500",children:"Med"}),"Master"]}),n.jsx("p",{className:"text-lg text-gray-300 mt-2",children:r?"Log in to continue your journey":"Create an account to start"})]}),n.jsxs("form",{onSubmit:b,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",htmlFor:"email",children:"Email"}),n.jsx("input",{id:"email",type:"email",value:a,onChange:y=>o(y.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",htmlFor:"password",children:"Password"}),n.jsx("input",{id:"password",type:"password",value:c,onChange:y=>l(y.target.value),required:!0,className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"})]}),d&&n.jsx("div",{className:"text-center text-red-400 bg-red-500/10 border border-red-500/30 rounded-lg p-3 text-sm",children:d}),n.jsx("div",{children:n.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-300 disabled:opacity-50 disabled:cursor-wait",children:u?"Loading...":r?"Log In":"Register"})})]}),n.jsx("div",{className:"mt-8 mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-600"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-4 bg-gray-800 text-gray-400",children:"or"})})]})}),n.jsx("div",{className:"mb-6",children:n.jsx(Mn,{onSuccess:f,onError:g,disabled:u,text:r?"Sign in with Google":"Sign up with Google"})}),n.jsxs("div",{className:"mt-6 text-center space-y-3",children:[n.jsx("button",{onClick:()=>i(!r),className:"block w-full text-sm font-medium text-gray-400 hover:text-blue-500",children:r?"Need an account? Register":"Already have an account? Log in"}),e&&n.jsx("button",{onClick:e,className:"block w-full text-sm font-medium text-gray-400 hover:text-blue-500 transition-colors",children:"← Back to Landing Page"})]})]})})},Yo=({email:s,onBackToLogin:e,onResendSuccess:t})=>{const[r,i]=p.useState(!1),[a,o]=p.useState(null),c=async()=>{const l=Date.now();if(a&&l-a<6e4){const d=Math.ceil((6e4-(l-a))/1e3);R.error(`Please wait ${d} seconds before resending.`);return}i(!0);try{const d=await ke.resendVerification();if(!d.success)throw new Error(d.error||"Failed to resend verification email");o(l),R.success(d.message||"Verification email sent! Please check your inbox."),t?.()}catch(d){console.error("Error resending verification email:",d),R.error(d.message||"Failed to resend verification email.")}finally{i(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[e&&n.jsxs("button",{onClick:e,className:"mb-6 flex items-center gap-2 text-gray-300 hover:text-white transition-colors group",children:[n.jsx(ct,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Back to Login"]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700 shadow-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:n.jsx(ma,{className:"w-10 h-10 text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Check Your Email"}),n.jsx("p",{className:"text-gray-300 mb-2",children:"We've sent a verification link to:"}),n.jsx("p",{className:"text-blue-400 font-medium text-lg mb-6",children:s}),n.jsx("p",{className:"text-gray-400 text-sm mb-8",children:"Click the link in the email to verify your account. You won't be able to sign in until your email is verified."})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("button",{onClick:c,disabled:r,className:"w-full bg-gray-700/50 hover:bg-gray-600/50 text-gray-300 hover:text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[r?n.jsx(Vn,{className:"w-5 h-5 animate-spin"}):n.jsx(Vn,{className:"w-5 h-5"}),r?"Sending...":"Resend Verification Email"]})}),n.jsx("div",{className:"mt-8 text-center",children:n.jsx("p",{className:"text-gray-400 text-sm",children:"Didn't receive an email? Check your spam folder or try resending."})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("button",{onClick:e,className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Already verified? Sign in"})})]})]})})},Xo=({onSuccess:s,onBackToLanding:e,onSwitchToSignup:t,onAuthSuccess:r})=>{const[i,a]=p.useState(""),[o,c]=p.useState(""),[l,d]=p.useState(!1),[h,u]=p.useState(null),[m,f]=p.useState(!1),[g,b]=p.useState(!1);p.useEffect(()=>{const v=document.createElement("style");return v.textContent=`
      input[type="password"]::-ms-reveal,
      input[type="password"]::-ms-clear,
      input[type="password"]::-webkit-credentials-auto-fill-button {
        display: none;
      }
    `,document.head.appendChild(v),()=>{document.head.removeChild(v)}},[]),p.useEffect(()=>{(async()=>{try{console.log("🚀 Login page loaded, checking for redirect result...");const k=await pr();k&&k.idToken&&(console.log("📧 Processing Google Sign-In redirect result:",k),console.log("🔄 Calling handleGoogleSignIn with token..."),await y(k.idToken))}catch(k){console.error("❌ Error handling Google Sign-In redirect:",k),u("Authentication failed after redirect. Please try again.")}})()},[]);const y=async v=>{u(null),f(!0);try{console.log("🔐 Sending Google user data to auth service...");const k=await ke.registerFirebase(v);if(console.log("✅ Supabase response:",k),!k.success||!k.user||!k.token)throw new Error(k.error||"Google authentication failed");const{token:_,user:w}=k,{email:j,username:E}=w,C=k.userId||w.id||0,O=k.isNewUser||!1;localStorage.setItem("landingPageToken",_),localStorage.setItem("medMasterToken",_),localStorage.setItem("medMasterEmail",j),localStorage.setItem("medMasterUsername",E);try{const z=await kt.getSubscriptionStatus();r?.(_,j,E,z.subscription_type,C),O?R.success("Welcome to MedMaster! Your Google account has been connected."):R.success("Successfully signed in with Google!"),s?.()}catch(z){console.warn("Could not fetch subscription status:",z),r?.(_,j,E,"demo",C),O?R.success("Welcome to MedMaster! Your Google account has been connected."):R.success("Successfully signed in with Google!"),s?.()}}catch(k){console.error("Google Sign-In backend error:",k);let _="An error occurred during Google sign-in";k.message?_=k.message:(k.code==="ERR_NETWORK"||k.code==="ERR_NAME_NOT_RESOLVED")&&(_="Unable to connect to the server. Please check your internet connection and try again."),u(_),R.error(_)}finally{f(!1)}},x=v=>{u(`Google Sign-In error: ${v}`)},N=async v=>{v.preventDefault(),u(null),f(!0);try{const k=ke.login({email:i,password:o}),_=new Promise((G,W)=>setTimeout(()=>W(new Error("Login timeout - please try again")),15e3)),w=await Promise.race([k,_]);if(!w.success||!w.user||!w.token)throw new Error(w.error||"Login failed");const j=w.token,E=w.user.email,C=w.user.username,O=w.user.id||0;localStorage.setItem("landingPageToken",j),localStorage.setItem("medMasterToken",j),localStorage.setItem("medMasterEmail",E),localStorage.setItem("medMasterUsername",C);let z="demo";try{const G=kt.getSubscriptionStatus(parseInt(O,10)),W=new Promise((fe,A)=>setTimeout(()=>A(new Error("Subscription fetch timeout")),5e3));z=(await Promise.race([G,W])).subscription_type||"demo"}catch(G){console.warn("Could not fetch subscription status, using demo:",G)}r?.(j,E,C,z,parseInt(O,10)),R.success("Welcome! Logged in successfully."),s?.()}catch(k){u(k.message||"Authentication failed"),b(k.needsVerification||!1)}finally{f(!1)}};return g?n.jsx(Yo,{email:i,onBackToLogin:()=>{b(!1),u(null)},onResendSuccess:()=>{R.success("Verification email sent! Please check your inbox.")}}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[e&&n.jsxs("button",{onClick:e,className:"mb-6 flex items-center gap-2 text-gray-300 hover:text-white transition-colors group",children:[n.jsx(ct,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Back to Landing Page"]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700 shadow-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:n.jsx(dr,{className:"w-8 h-8 text-white"})})}),n.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome Back to ",n.jsx("span",{className:"text-blue-400",children:"Med"}),"Master"]}),n.jsx("p",{className:"text-gray-300",children:"Sign in to access your landing page account"})]}),n.jsxs("form",{onSubmit:N,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",htmlFor:"landing-login-email",children:"Email"}),n.jsx("input",{id:"landing-login-email",type:"email",value:i,onChange:v=>a(v.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300",placeholder:"Enter your email"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",htmlFor:"landing-login-password",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"landing-login-password",type:l?"text":"password",value:o,onChange:v=>c(v.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-lg p-3 pr-12 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 appearance-none",placeholder:"Enter your password"}),n.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:l?n.jsx(Ks,{className:"w-5 h-5"}):n.jsx(Js,{className:"w-5 h-5"})})]})]}),h&&n.jsx("div",{className:"text-center text-red-400 bg-red-500/10 border border-red-500/30 rounded-lg p-3 text-sm",children:h}),n.jsx("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 group",children:m?n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsxs(n.Fragment,{children:["Sign In",n.jsx(hn,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),n.jsx("div",{className:"mt-8 mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-600"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-4 bg-gray-800/50 text-gray-400",children:"or"})})]})}),n.jsx("div",{className:"mb-6",children:n.jsx(Mn,{onSuccess:y,onError:x,disabled:m,text:"Sign in with Google"})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("button",{onClick:t,className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Don't have an account? Sign up"})})]})]})})})},qg={landingDomain:"medmaster.site",appDomain:"app.medmaster.com",tokenKey:"medMasterToken",userKey:"medMasterUser"};class Wg{config;constructor(e={}){this.config={...qg,...e}}storeAuthData(e){localStorage.setItem("landingPageToken",e.token),localStorage.setItem("landingPageUser",JSON.stringify({username:e.username,email:e.email,userId:e.userId,subscriptionType:e.subscriptionType||"demo"})),localStorage.setItem(this.config.tokenKey,e.token),localStorage.setItem(this.config.userKey,JSON.stringify({username:e.username,email:e.email,userId:e.userId,subscriptionType:e.subscriptionType||"demo"}))}getAuthData(){const e=localStorage.getItem("landingPageToken")||localStorage.getItem(this.config.tokenKey),t=localStorage.getItem("landingPageUser")||localStorage.getItem(this.config.userKey);if(!e||!t)return null;try{const r=JSON.parse(t);return{token:e,email:r.email,username:r.username,userId:r.userId||0,subscriptionType:r.subscriptionType}}catch(r){return console.error("Error parsing stored auth data:",r),null}}clearAuthData(){localStorage.removeItem("landingPageToken"),localStorage.removeItem("landingPageUser"),localStorage.removeItem(this.config.tokenKey),localStorage.removeItem(this.config.userKey)}generateAppRedirectUrl(e,t="/"){const r=`https://${this.config.appDomain}`,i=new URLSearchParams({token:e.token,email:e.email,username:e.username,subscriptionType:e.subscriptionType||"demo",redirect:t});return`${r}/auth/callback?${i.toString()}`}parseAuthFromUrl(){const e=new URLSearchParams(window.location.search),t=e.get("token"),r=e.get("email"),i=e.get("username"),a=e.get("userId"),o=e.get("subscriptionType");return!t||!r||!i?null:{token:t,email:r,username:i,userId:a?parseInt(a,10):0,subscriptionType:o||"demo"}}handleAuthSuccess(e,t="/"){this.storeAuthData(e);const r=this.generateAppRedirectUrl(e,t);window.location.href=r}isLandingSite(){return window.location.hostname.includes(this.config.landingDomain.replace("https://",""))}isMainApp(){return window.location.hostname.includes(this.config.appDomain.replace("https://",""))}postAuthMessage(e){window.parent&&window.parent!==window&&window.parent.postMessage({type:"AUTH_SUCCESS",data:e},"*")}listenForAuthMessages(e){const t=r=>{r.data.type==="AUTH_SUCCESS"&&r.data.data&&e(r.data.data)};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}}const Bt=new Wg({landingDomain:"https://medmaster.site",appDomain:"https://app.medmaster.com"}),Qo=p.createContext(void 0),zg=({children:s})=>{const[e,t]=p.useState(null),[r,i]=p.useState(!1),a=(d,h,u,m,f="demo")=>{console.log("🔐 LandingAuthContext.login called with:",{token:d.substring(0,20)+"...",email:h,username:u,userId:m,subscriptionType:f});const g={id:m,username:u,email:h,subscriptionType:f},b={token:d,email:h,username:u,userId:m,subscriptionType:f};Bt.storeAuthData(b),t(g),i(!0),console.log("✅ LandingAuthContext state updated - isAuthenticated:",!0)},o=()=>{Bt.clearAuthData(),t(null),i(!1)},c=async()=>{const d=Bt.getAuthData(),h=e;if(!(!d||!h))try{console.log("🔄 Refreshing subscription status...");const u=localStorage.getItem("medMasterToken");localStorage.setItem("medMasterToken",d.token);const m=new Promise((x,N)=>setTimeout(()=>N(new Error("Subscription status request timeout")),5e3)),f=kt.getSubscriptionStatus(),g=await Promise.race([f,m]);u?localStorage.setItem("medMasterToken",u):localStorage.removeItem("medMasterToken");const b={...h,subscriptionType:g.subscription_type,subscriptionStatus:g.status,planName:g.plan_name,endDate:g.end_date,daysRemaining:g.days_remaining};console.log("✅ Subscription status updated:",g.subscription_type),t(b);const y={...d,subscriptionType:g.subscription_type};Bt.storeAuthData(y)}catch(u){console.error("❌ Error refreshing subscription status:",u);const m=localStorage.getItem("medMasterToken");m&&localStorage.setItem("medMasterToken",m)}};p.useEffect(()=>{const d=async()=>{console.log("🔍 Checking existing auth...");try{localStorage.setItem("test","working");const f=localStorage.getItem("test");console.log("🧪 localStorage test:",f==="working"?"Working":"Failed"),localStorage.removeItem("test")}catch(f){console.error("❌ localStorage access error:",f)}let m=Bt.getAuthData();if(console.log("📋 Cross-origin auth data:",m?"Found":"Not found"),!m){const f=localStorage.getItem("medMasterToken"),g=localStorage.getItem("medMasterEmail"),b=localStorage.getItem("medMasterUsername");console.log("🔑 Main app tokens:",{token:f?f.substring(0,20)+"...":"None",email:g||"None",username:b||"None"}),console.log("📦 All localStorage keys:",Object.keys(localStorage)),f&&g&&b&&(m={token:f,email:g,username:b,userId:0,subscriptionType:"demo"},console.log("✅ Created authData from main app tokens"))}if(m){console.log("🎯 Auth data found, setting user state...");try{const f={id:m.userId||0,username:m.username,email:m.email,subscriptionType:m.subscriptionType||"demo"};t(f),i(!0),console.log("✅ User state set - isAuthenticated: true, user:",f);try{console.log("🔄 Refreshing subscription status on mount...");const g=localStorage.getItem("medMasterToken");localStorage.setItem("medMasterToken",m.token);const b=await kt.getSubscriptionStatus();g?localStorage.setItem("medMasterToken",g):localStorage.removeItem("medMasterToken");const y={...f,id:m.userId||0,subscriptionType:b.subscription_type,subscriptionStatus:b.status,planName:b.plan_name,endDate:b.end_date,daysRemaining:b.days_remaining};console.log("✅ Subscription status updated on mount:",b.subscription_type),t(y);const x={...m,subscriptionType:b.subscription_type};Bt.storeAuthData(x)}catch(g){console.error("Error refreshing subscription on mount:",g)}}catch(f){console.error("Error parsing stored user data:",f),o()}}else console.log("❌ No auth data found")};d();const h=m=>{console.log("📦 localStorage change detected:",m.key),(m.key==="medMasterToken"||m.key==="landingPageToken")&&(console.log("🔄 Triggering auth check due to localStorage change"),d())};window.addEventListener("storage",h);const u=setTimeout(d,100);return()=>{window.removeEventListener("storage",h),clearTimeout(u)}},[]);const l={user:e,isAuthenticated:r,login:a,logout:o,refreshSubscriptionStatus:c};return n.jsx(Qo.Provider,{value:l,children:s})},St=()=>{const s=p.useContext(Qo);if(s===void 0)throw new Error("useLandingAuth must be used within a LandingAuthProvider");return s},Zo=({onSuccess:s,onBackToLanding:e,onSwitchToLogin:t,onAuthSuccess:r})=>{const[i,a]=p.useState(""),[o,c]=p.useState(""),[l,d]=p.useState(!1),[h,u]=p.useState(null),[m,f]=p.useState(!1),[g,b]=p.useState(!1),[y,x]=p.useState(""),{login:N}=St();p.useEffect(()=>{(async()=>{try{const j=await pr();j&&j.idToken&&(console.log("Processing Google Sign-In redirect result:",j),await v(j.idToken))}catch(j){console.error("Error handling Google Sign-In redirect:",j),u("Authentication failed after redirect. Please try again.")}})()},[]),p.useEffect(()=>{const w=document.createElement("style");return w.textContent=`
      input[type="password"]::-ms-reveal,
      input[type="password"]::-ms-clear,
      input[type="password"]::-webkit-credentials-auto-fill-button {
        display: none;
      }
    `,document.head.appendChild(w),()=>{document.head.removeChild(w)}},[]);const v=async w=>{u(null),f(!0);try{const j=await ke.registerFirebase(w);if(!j.success||!j.user||!j.token)throw new Error(j.error||"Google authentication failed");const{token:E,user:C}=j,{email:O,username:z}=C,G=j.userId||C.id||0,W=j.isNewUser||!1;localStorage.setItem("landingPageToken",E),localStorage.setItem("medMasterToken",E),localStorage.setItem("medMasterEmail",O),localStorage.setItem("medMasterUsername",z);try{const ce=await kt.getSubscriptionStatus();N(E,O,z,G,ce.subscription_type),r&&r(E,O,z,ce.subscription_type,G),W?R.success("Welcome to MedMaster! Your Google account has been connected."):R.success("Successfully signed in with Google!"),s?.()}catch(ce){console.warn("Could not fetch subscription status:",ce),N(E,O,z,G,"demo"),r&&r(E,O,z,"demo",G),W?R.success("Welcome to MedMaster! Your Google account has been connected."):R.success("Successfully signed in with Google!"),s?.()}}catch(j){console.error("Google Sign-In backend error:",j),j.message?u(j.message):j.code==="ERR_NETWORK"||j.code==="ERR_NAME_NOT_RESOLVED"?u("Unable to connect to the server. Please check your internet connection and try again."):u("An unknown error occurred during Google sign-in.")}finally{f(!1)}},k=w=>{u(`Google Sign-In error: ${w}`)},_=async w=>{w.preventDefault(),u(null),f(!0);try{const j=await ke.register({email:i,password:o});if(!j.success)throw new Error(j.error||"Registration failed");if(j.needsVerification){x(i),b(!0),R.success(j.message||"Account created! Please check your email to verify your account before logging in."),f(!1);return}const E=await ke.login({email:i,password:o});if(!E.success||!E.token)throw new Error("Registration successful but login failed");const{token:C}=E,O=E.userId||E.user?.id||0,z=localStorage.getItem("medMasterToken");localStorage.setItem("medMasterToken",C);try{const G=await kt.getSubscriptionStatus();z?localStorage.setItem("medMasterToken",z):localStorage.removeItem("medMasterToken");const W=i.split("@")[0];N(C,i,W,O,G.subscription_type),r?.(C,i,W,G.subscription_type,O),R.success("Welcome to MedMaster! Your account has been created and verified."),s?.()}catch(G){console.warn("Could not fetch subscription status:",G);const W=i.split("@")[0];N(C,i,W,O,"demo"),r?.(C,i,W,"demo",O),R.success("Welcome to MedMaster! Account created successfully."),s?.()}}catch(j){console.error("Signup error:",j);let E="An error occurred during signup.";j.code==="auth/email-already-in-use"?E="An account with this email already exists.":j.code==="auth/weak-password"?E="Password is too weak. Please choose a stronger password.":j.code==="auth/invalid-email"?E="Please enter a valid email address.":j.message&&(E=j.message),u(E)}finally{f(!1)}};return g?n.jsx(Yo,{email:y,onBackToLogin:()=>{b(!1),t?.()},onResendSuccess:()=>{R.success("Verification email sent! Please check your inbox.")}}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-md",children:[e&&n.jsxs("button",{onClick:e,className:"mb-6 flex items-center gap-2 text-gray-300 hover:text-white transition-colors group",children:[n.jsx(ct,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Back to Landing Page"]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700 shadow-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:n.jsx(dr,{className:"w-8 h-8 text-white"})})}),n.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Join ",n.jsx("span",{className:"text-blue-400",children:"Med"}),"Master"]}),n.jsx("p",{className:"text-gray-300",children:"Create your landing page account to get started"})]}),n.jsxs("form",{onSubmit:_,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",htmlFor:"landing-signup-email",children:"Email"}),n.jsx("input",{id:"landing-signup-email",type:"email",value:i,onChange:w=>a(w.target.value),required:!0,className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-lg p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300",placeholder:"Enter your email"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",htmlFor:"landing-signup-password",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"landing-signup-password",type:l?"text":"password",value:o,onChange:w=>c(w.target.value),required:!0,autoComplete:"new-password",className:"w-full bg-gray-700/50 border border-gray-600 text-white rounded-lg p-3 pr-12 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 appearance-none",placeholder:"Create a password"}),n.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:l?n.jsx(Ks,{className:"w-5 h-5"}):n.jsx(Js,{className:"w-5 h-5"})})]})]}),h&&n.jsx("div",{className:"text-center text-red-400 bg-red-500/10 border border-red-500/30 rounded-lg p-3 text-sm",children:h}),n.jsx("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 group",children:m?n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsxs(n.Fragment,{children:["Create Account",n.jsx(hn,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),n.jsx("div",{className:"mt-8 mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-600"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-4 bg-gray-800/50 text-gray-400",children:"or"})})]})}),n.jsx("div",{className:"mb-6",children:n.jsx(Mn,{onSuccess:v,onError:k,disabled:m,text:"Sign up with Google"})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx("button",{onClick:t,className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Already have an account? Sign in"})})]})]})})})},da=({onGoToApp:s})=>{const{user:e,logout:t}=St(),[r,i]=p.useState(!1),a=p.useRef(null);if(p.useEffect(()=>{const d=h=>{a.current&&!a.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),!e)return null;const o=()=>{switch(e.subscriptionType){case"premium":return n.jsx(gl,{className:"w-4 h-4 text-yellow-400"});case"starter":return n.jsx(pl,{className:"w-4 h-4 text-blue-400"});default:return n.jsx(Gn,{className:"w-4 h-4 text-gray-400"})}},c=()=>{switch(e.subscriptionType){case"premium":return"Premium Plan";case"starter":return"Starter Plan";default:return"Demo Account"}},l=()=>{switch(e.subscriptionType){case"premium":return"text-yellow-400";case"starter":return"text-blue-400";default:return"text-gray-400"}};return n.jsxs("div",{className:"relative",ref:a,children:[n.jsxs("button",{onClick:()=>i(!r),className:"flex items-center gap-3 bg-gray-800/50 hover:bg-gray-700/50 border border-gray-600 rounded-lg px-4 py-2 transition-all duration-300 hover:scale-105",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:n.jsx(Dr,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"hidden md:block text-left",children:[n.jsx("div",{className:"text-white font-medium text-sm",children:e.username}),n.jsxs("div",{className:`text-xs ${l()} flex items-center gap-1`,children:[o(),c()]})]}),n.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&n.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-gray-800 border border-gray-600 rounded-xl shadow-2xl z-50 overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Dr,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-white font-bold text-lg",children:e.username}),n.jsx("div",{className:"text-blue-100 text-sm",children:e.email})]})]})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[n.jsx("div",{className:"text-gray-300 text-sm mb-1",children:"Current Plan"}),n.jsxs("div",{className:`font-medium flex items-center gap-2 ${l()}`,children:[o(),c()]}),e.subscriptionType!=="demo"&&e.daysRemaining!==void 0&&n.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:[n.jsxs("div",{children:["Days remaining: ",n.jsx("span",{className:"text-white font-medium",children:e.daysRemaining})]}),e.endDate&&n.jsxs("div",{children:["Expires: ",n.jsx("span",{className:"text-white font-medium",children:new Date(e.endDate).toLocaleDateString()})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[s&&n.jsxs("button",{onClick:()=>{i(!1),s()},className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center gap-2",children:[n.jsx(Gn,{className:"w-4 h-4"}),"Go to App"]}),n.jsxs("button",{onClick:()=>{i(!1),t()},className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center gap-2",children:[n.jsx(fl,{className:"w-4 h-4"}),"Sign Out"]})]})]})]})]})};class Hg{async getAvailablePaymentMethods(){try{return console.warn("Using default payment methods - getAvailablePaymentMethods not implemented"),this.getDefaultPaymentMethods()}catch(e){return console.error("Error fetching payment methods:",e),this.getDefaultPaymentMethods()}}getDefaultPaymentMethods(){return[{id:"payfast_card",name:"Debit/Credit Card",type:"card",icon:"💳",description:"Pay securely with your debit or credit card via PayFast",available:!0},{id:"payfast_bank",name:"Bank Transfer",type:"bank",icon:"🏦",description:"Direct bank transfer via PayFast",available:!0},{id:"paddle_card",name:"International Card",type:"card",icon:"🌍",description:"Pay with international cards via Paddle",available:!0}]}async createPaymentSession(e,t,r){try{if(!t)return{success:!1,error:"User ID required"};const{data:i,error:a}=await ge.getSubscriptionPlans(),o=i?.find(l=>l.id===e);if(a||!o)return{success:!1,error:"Invalid subscription plan"};const c=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{success:!0,sessionId:c,url:`/payment/checkout?session=${c}&plan=${e}`,paymentMethod:r||"paddle"}}catch(i){return console.error("Error creating payment session:",i),{success:!1,error:"Failed to create payment session"}}}async createCheckoutSession(e){try{return localStorage.getItem("medMasterToken")?{success:!1,error:"User ID required for payment session"}:{success:!1,error:"Authentication required"}}catch(t){return console.error("Error creating checkout session:",t),{success:!1,error:t.message||"Failed to create checkout session"}}}async redirectToCheckout(e){try{const t=await this.createCheckoutSession(e);return t.success&&t.url?(window.location.href=t.url,!0):(console.error("Failed to create checkout session:",t.error),!1)}catch(t){return console.error("Error redirecting to checkout:",t),!1}}async handlePaymentSuccess(e){try{return console.warn("handlePaymentSuccess not implemented, sessionId:",e),!1}catch(t){return console.error("Error handling payment success:",t),!1}}async verifyPayment(e,t){try{if(!t)return{success:!1,error:"User ID required"};const{data:r,error:i}=await ge.getPaymentTransactionBySession(e);if(i||!r)return{success:!1,error:"Transaction not found"};const{data:a,error:o}=await ge.getUserSubscription(t),c=r.status,l=a?.status==="active";return{success:!0,data:{transaction:r,subscription:a,paymentStatus:c,subscriptionActive:l}}}catch(r){return console.error("Error verifying payment:",r),{success:!1,error:"Payment verification failed"}}}async getPaymentHistory(e){try{if(!e)return{success:!1,data:[]};const{data:t,error:r}=await ge.getUserPaymentHistory(e);return r?{success:!1,data:[]}:{success:!0,data:t||[]}}catch(t){return console.error("Error fetching payment history:",t),{success:!1,data:[]}}}async getTransaction(e){try{const{data:t,error:r}=await ge.getPaymentTransactionBySession(e);return r||!t?null:t}catch(t){return console.error("Error getting transaction:",t),null}}formatCurrency(e,t="PKR"){return t==="PKR"?`₨${e.toLocaleString()}`:`${t} ${e.toLocaleString()}`}getStatusDisplay(e){switch(e.toLowerCase()){case"completed":return{text:"Completed",color:"text-green-600"};case"pending":return{text:"Pending",color:"text-yellow-600"};case"failed":return{text:"Failed",color:"text-red-600"};case"cancelled":return{text:"Cancelled",color:"text-gray-600"};default:return{text:e,color:"text-gray-600"}}}isPaymentSuccessful(e){return e.toLowerCase()==="completed"}getSuccessPageUrl(e){return`/payment/success?session_id=${e}`}getCancelPageUrl(){return"/payment/cancel"}}const ua=new Hg,Vg=({planId:s,planName:e,planPrice:t,onPaymentInitiated:r,onError:i})=>{const{user:a}=St(),[o,c]=p.useState([]),[l,d]=p.useState(""),[h,u]=p.useState(!0),[m,f]=p.useState(!1),[g,b]=p.useState(null);p.useEffect(()=>{y()},[]);const y=async()=>{try{const _=await ua.getAvailablePaymentMethods();c(_),_.length>0&&_[0].available&&d(_[0].id)}catch(_){console.error("Error fetching payment methods:",_),R.error("Failed to load payment methods")}finally{u(!1)}},x=_=>{d(_),b(null)},N=async()=>{if(!l){R.error("Please select a payment method");return}try{if(f(!0),!a?.id)throw new Error("User authentication required");const _=await ua.createPaymentSession(s,a.id,l);if(_.success)b(_),r?.(_),_.url&&l.includes("paddle")&&(window.location.href=_.url);else{const w=_.error||"Failed to create payment session";R.error(w),i?.(w)}}catch(_){const w=_.message||"Payment initialization failed";R.error(w),i?.(w)}finally{f(!1)}},v=_=>{switch(_.type){case"card":return _.id.includes("paddle")?n.jsx(vl,{className:"w-6 h-6"}):n.jsx(Kn,{className:"w-6 h-6"});case"bank":return n.jsx(bl,{className:"w-6 h-6"});default:return n.jsx(Kn,{className:"w-6 h-6"})}},k=_=>_.id.includes("payfast")?"border-blue-500 bg-blue-50":_.id.includes("paddle")?"border-green-500 bg-green-50":"border-gray-300 bg-gray-50";return h?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Qs,{size:"md",color:"blue"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Selected Plan"}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-700",children:e}),n.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["₨",t]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Choose Payment Method"}),n.jsx("div",{className:"space-y-3",children:o.map(_=>n.jsx("div",{className:`relative border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ${l===_.id?`${k(_)} border-opacity-100`:"border-gray-200 hover:border-gray-300"} ${_.available?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>_.available&&x(_.id),children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:`p-2 rounded-full ${l===_.id?"text-blue-600":"text-gray-500"}`,children:v(_)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:_.name}),_.id.includes("payfast")&&n.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full font-medium",children:"PayFast"}),_.id.includes("paddle")&&n.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium",children:"Paddle"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description}),!_.available&&n.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[n.jsx(xl,{className:"w-4 h-4 text-yellow-500"}),n.jsx("span",{className:"text-xs text-yellow-600",children:"Currently unavailable"})]})]}),l===_.id&&n.jsx(yl,{className:"w-6 h-6 text-blue-600"})]})},_.id))})]}),g&&l.includes("payfast")&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Payment Instructions"}),g.qrCode&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Scan QR Code to Pay:"}),n.jsx("div",{className:"bg-white p-3 rounded-lg inline-block",children:n.jsx("img",{src:g.qrCode,alt:"Payment QR Code",className:"w-32 h-32"})})]}),g.bankDetails&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Bank Transfer Details:"}),n.jsxs("div",{className:"bg-white p-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Account Number:"}),n.jsx("span",{className:"text-sm",children:g.bankDetails.accountNumber})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Bank Name:"}),n.jsx("span",{className:"text-sm",children:g.bankDetails.bankName})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm font-medium",children:"Account Title:"}),n.jsx("span",{className:"text-sm",children:g.bankDetails.accountTitle})]})]})]}),g.url&&n.jsx("div",{children:n.jsx("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Complete Payment"})})]}),!g&&n.jsx("button",{onClick:N,disabled:!l||m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200",children:m?n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx(Qs,{size:"sm",color:"white"}),n.jsx("span",{children:"Processing..."})]}):"Proceed to Payment"})]})};function Gg({onAuthSuccess:s,onNavigateToPricing:e,onNavigateToDocumentation:t,onNavigateToDownloads:r}){const i=Xt(),[a,o]=p.useState(0),[c,l]=p.useState(!1),[d,h]=p.useState(0),[u,m]=p.useState(!0),[f,g]=p.useState(!1),[b,y]=p.useState(null),[x,N]=p.useState(!1),[v]=p.useState("login"),[k,_]=p.useState(!1),[w,j]=p.useState(!1),{isAuthenticated:E}=St();console.log("🏠 LandingPage render - isAuthenticated:",E);const{trackPageView:C,trackEvent:O}=ed(),{targetRef:z,isIntersecting:G}=Xs({threshold:.5}),{targetRef:W,isIntersecting:ce}=Xs({threshold:.3});p.useEffect(()=>{C("/landing"),m(!1)},[]),p.useEffect(()=>{G&&O("hero_section_viewed")},[G]),p.useEffect(()=>{ce&&O("features_section_viewed")},[ce]);const fe=[{src:"/screenshots/dashboard.svg",alt:"Dashboard Overview",title:"Personalized Dashboard"},{src:"/screenshots/quiz.svg",alt:"Quiz Interface",title:"Interactive Quizzes"},{src:"/screenshots/flashcards.svg",alt:"Flashcards Interface",title:"Smart Flashcards"},{src:"/screenshots/clinical-case.svg",alt:"Clinical Case Study",title:"Clinical Cases"},{src:"/screenshots/analytics.svg",alt:"Analytics Dashboard",title:"Detailed Analytics"},{src:"/screenshots/leaderboard.svg",alt:"Leaderboard Rankings",title:"Global Leaderboard"}],A=[{name:"Ahmed Hassan",college:"Dow University of Health Sciences",year:"3rd Year",image:"/testimonials/ahmed.svg",comment:"MedMaster transformed my study routine! The spaced repetition system helped me retain complex microbiology concepts effortlessly."},{name:"Fatima Khan",college:"Aga Khan University",year:"4th Year",image:"/testimonials/fatima.svg",comment:"The clinical cases are incredibly realistic. I feel much more confident approaching real patients after practicing here."},{name:"Ali Raza",college:"King Edward Medical University",year:"2nd Year",image:"/testimonials/ali.svg",comment:"Gamification made studying fun! I'm actually excited to learn pharmacology now. The leaderboard keeps me motivated."},{name:"Ayesha Malik",college:"Allama Iqbal Medical College",year:"5th Year",image:"/testimonials/ayesha.svg",comment:"The analytics feature helped me identify my weak areas. My exam scores improved by 25% in just 2 months!"},{name:"Hassan Ali",college:"Lahore Medical College",year:"3rd Year",image:"/testimonials/hassan.svg",comment:"Quick Fire mode is addictive! I can study anywhere, anytime. Perfect for busy medical students like us."}];p.useEffect(()=>{const D=setInterval(()=>{o(U=>(U+1)%fe.length)},4e3);return()=>clearInterval(D)},[fe.length]),p.useEffect(()=>{const D=setInterval(()=>{h(U=>(U+1)%A.length)},5e3);return()=>clearInterval(D)},[A.length]);const $=D=>{const U=document.getElementById(D);U&&(U.scrollIntoView({behavior:"smooth",block:"start"}),U.classList.add("section-highlight"),setTimeout(()=>{U.classList.remove("section-highlight")},1500),O("navigation_click",{section:D})),c&&l(!1)},Se=D=>{O("payment_initiated",{method:D.paymentMethod,sessionId:D.sessionId}),D.paymentMethod==="paddle"&&D.url?g(!1):R.success("Payment session created! Follow the instructions to complete payment.")},Ue=D=>{O("payment_error",{plan:b?.name,error:D}),R.error(D)},de=()=>{g(!1),y(null)},Ee=()=>{_(!1),j(!1),b&&g(!0)},mt=()=>{i("/login")},M=()=>{i("/signup")},H=()=>{_(!1),j(!1)},V=()=>{_(!0),j(!1)},oe=()=>{_(!1),j(!0)},Ie=()=>{window.open("https://med-master-landing-site-2s46mwyfy-haroon-zias-projects.vercel.app","_blank")},F=(D,U,Qe,xr,es)=>{N(!1),s?.(D,U,Qe,xr,es)},Xe=()=>{N(!1),y(null)};return p.useEffect(()=>{const D=U=>{U.clientY<=0&&O("exit_intent_detected")};return document.addEventListener("mouseleave",D),()=>document.removeEventListener("mouseleave",D)},[]),k?n.jsx(Xo,{onSuccess:Ee,onBackToLanding:H,onSwitchToSignup:oe,onAuthSuccess:s}):w?n.jsx(Zo,{onSuccess:Ee,onBackToLanding:H,onSwitchToLogin:V,onAuthSuccess:s}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 transition-all duration-500",style:{scrollBehavior:"smooth"},children:[n.jsx("style",{children:`
        .section-highlight {
          animation: highlight 1.5s ease-in-out;
        }
        @keyframes highlight {
          0%, 100% { box-shadow: 0 0 0 rgba(59, 130, 246, 0); }
          50% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.5); }
        }
      `}),n.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gray-900/95 backdrop-blur-sm border-b border-gray-800 shadow-lg",children:[n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs("h1",{className:"text-2xl font-bold text-white",children:["Med",n.jsx("span",{className:"text-blue-400",children:"Master"})]})}),n.jsxs("nav",{className:"hidden md:flex space-x-8",children:[n.jsx("button",{onClick:()=>$("hero"),className:"text-gray-300 hover:text-white transition-all duration-300 hover:scale-105 cursor-pointer",children:"Home"}),n.jsx("button",{onClick:()=>$("features"),className:"text-gray-300 hover:text-white transition-all duration-300 hover:scale-105 cursor-pointer",children:"Features"}),n.jsx("button",{onClick:()=>$("preview"),className:"text-gray-300 hover:text-white transition-all duration-300 hover:scale-105 cursor-pointer",children:"Preview"}),n.jsx("button",{onClick:t,className:"text-gray-300 hover:text-white transition-all duration-300 hover:scale-105 cursor-pointer",children:"Documentation"}),n.jsx("button",{onClick:e,className:"text-gray-300 hover:text-white transition-all duration-300 hover:scale-105 cursor-pointer",children:"Pricing"}),n.jsx("button",{onClick:()=>$("contact"),className:"text-gray-300 hover:text-white transition-all duration-300 hover:scale-105 cursor-pointer",children:"Contact"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[E?n.jsx(da,{onGoToApp:Ie}):n.jsxs(n.Fragment,{children:["                  ",n.jsx("button",{onClick:mt,className:"text-gray-300 hover:text-white transition-all duration-300 hover:scale-105 hidden md:block",children:"Login"}),n.jsx("button",{onClick:M,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all duration-300 hover:scale-105 shadow-lg hidden md:block",children:"Sign Up"})]}),n.jsx("button",{className:"md:hidden text-gray-300 hover:text-white transition-colors",onClick:()=>l(!c),children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})}),c&&n.jsx("div",{className:"md:hidden bg-gray-900/98 backdrop-blur-sm border-t border-gray-800 animate-fadeIn",children:n.jsxs("div",{className:"px-4 py-4 space-y-4",children:[n.jsx("button",{className:"block w-full text-left text-gray-300 hover:text-white transition-colors",onClick:()=>{$("hero"),l(!1)},children:"Home"}),n.jsx("button",{className:"block w-full text-left text-gray-300 hover:text-white transition-colors",onClick:()=>{$("features"),l(!1)},children:"Features"}),n.jsx("button",{className:"block w-full text-left text-gray-300 hover:text-white transition-colors",onClick:()=>{$("preview"),l(!1)},children:"Preview"}),n.jsx("button",{className:"block w-full text-left text-gray-300 hover:text-white transition-colors",onClick:()=>{t?.(),l(!1)},children:"Documentation"}),n.jsx("button",{className:"block w-full text-left text-gray-300 hover:text-white transition-colors",onClick:()=>{e?.(),l(!1)},children:"Pricing"}),n.jsx("button",{className:"block w-full text-left text-gray-300 hover:text-white transition-colors",onClick:()=>{$("contact"),l(!1)},children:"Contact"}),n.jsx("div",{className:"pt-4 border-t border-gray-700 space-y-2",children:E?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-4 py-2",children:n.jsx(da,{onGoToApp:Ie})}),n.jsx("button",{onClick:()=>{l(!1),Ie()},className:"block w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition-all duration-300 hover:scale-105",children:"Go to App"})]}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{l(!1),mt()},className:"block w-full text-left text-gray-300 hover:text-white transition-colors",children:"Login"}),n.jsx("button",{onClick:()=>{l(!1),M()},className:"block w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-all duration-300 hover:scale-105",children:"Sign Up"})]})})]})})]}),n.jsxs("div",{id:"hero",ref:z,className:"relative min-h-screen flex items-center overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 via-blue-900/50 to-purple-900/30"}),n.jsxs("div",{className:"absolute inset-0 opacity-30",children:[n.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),n.jsx("div",{className:"absolute top-40 right-20 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000"}),n.jsx("div",{className:"absolute bottom-20 left-1/3 w-80 h-80 bg-green-500/10 rounded-full blur-3xl animate-pulse delay-2000"})]})]}),n.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"text-left",children:[n.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-500/10 border border-blue-500/20 rounded-full text-blue-400 text-sm font-medium mb-6 animate-fadeIn",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse"}),"The Future of Medical Education"]}),n.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold mb-6 animate-slideDown",children:[n.jsx("span",{className:"text-white",children:"Master"}),n.jsx("br",{}),n.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-purple-500 to-green-400 bg-clip-text text-transparent",children:"Medical Knowledge"})]}),n.jsxs("p",{className:"text-xl md:text-2xl text-gray-300 mb-8 leading-relaxed animate-slideUp",children:["Stop cramming. Start mastering. Get",n.jsx("span",{className:"text-blue-400 font-semibold",children:"practice questions"}),",",n.jsx("span",{className:"text-purple-400 font-semibold",children:"real clinical cases"}),", and",n.jsx("span",{className:"text-green-400 font-semibold",children:"personalized study insights"})," that actually help you learn."]}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-4 animate-slideUp",children:n.jsxs("button",{onClick:r,className:"group relative px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-xl text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl",children:[n.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Download Now",n.jsx(hn,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-400 rounded-xl blur opacity-30 group-hover:opacity-50 transition-opacity -z-10"})]})})]}),n.jsx("div",{className:"relative lg:block hidden",children:n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"relative w-full h-96 bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-8 shadow-2xl",children:[n.jsx("div",{className:"absolute top-4 right-4 w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg animate-float",children:n.jsx(ns,{className:"w-8 h-8 text-white"})}),n.jsx("div",{className:"absolute bottom-4 left-4 w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl flex items-center justify-center shadow-lg animate-float delay-1000",children:n.jsx(ns,{className:"w-8 h-8 text-white"})}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-xl animate-pulse",children:n.jsx(ii,{className:"w-10 h-10 text-white"})}),n.jsx("div",{className:"absolute inset-0 opacity-10",children:n.jsx("div",{className:"grid grid-cols-8 grid-rows-8 gap-2 h-full",children:Array.from({length:64}).map((D,U)=>n.jsx("div",{className:"bg-blue-400 rounded-sm animate-pulse",style:{animationDelay:`${U*50}ms`}},U))})})]}),n.jsx("div",{className:"absolute -top-4 -left-4 w-24 h-24 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),n.jsx("div",{className:"absolute -bottom-4 -right-4 w-32 h-32 bg-purple-500/20 rounded-full blur-xl animate-pulse delay-1000"})]})})]})})]}),n.jsx("section",{ref:W,id:"features",className:"py-20 bg-gray-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16 animate-fadeIn",children:[n.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"Why Choose MedMaster?"}),n.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Everything you need to ace your medical exams, all in one place"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 hover:bg-gray-750 transition-all duration-500 transform hover:scale-105 hover:shadow-xl animate-slideRight",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg flex items-center justify-center mb-6 transition-all duration-300 hover:rotate-12",children:n.jsx(ns,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Quick Fire Mode"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Blast through 7,000+ questions at lightning speed. Perfect your timing and accuracy with our smart spaced repetition system that actually works."}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[n.jsx("li",{children:"• Customizable difficulty levels"}),n.jsx("li",{children:"• Subject-specific filtering"}),n.jsx("li",{children:"• Real-time scoring"})]})]}),n.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 hover:bg-gray-750 transition-all duration-300 transform hover:scale-105",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center mb-6",children:n.jsx(ns,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Clinical Cases"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Work through 3,000+ cases that feel like the real thing. Practice your clinical reasoning before you step into the hospital."}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[n.jsx("li",{children:"• Real-world scenarios"}),n.jsx("li",{children:"• Step-by-step diagnosis"}),n.jsx("li",{children:"• Detailed explanations"})]})]}),n.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 hover:bg-gray-750 transition-all duration-300 transform hover:scale-105",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mb-6",children:n.jsx(ii,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Gamified Learning"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Level up while you study. Earn points, unlock cool themes, and see how you stack up against other med students. Who said studying can't be fun?"}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[n.jsx("li",{children:"• XP and leveling system"}),n.jsx("li",{children:"• Unlockable themes"}),n.jsx("li",{children:"• Achievement badges"})]})]}),n.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 hover:bg-gray-750 transition-all duration-300 transform hover:scale-105",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-teal-500 rounded-lg flex items-center justify-center mb-6",children:n.jsx(ai,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Smart Learning"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Never forget what you've learned. Our smart review system brings back topics right when you're about to forget them."}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[n.jsx("li",{children:"• Adaptive scheduling"}),n.jsx("li",{children:"• Progress tracking"}),n.jsx("li",{children:"• Personalized review"})]})]}),n.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 hover:bg-gray-750 transition-all duration-300 transform hover:scale-105",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center mb-6",children:n.jsx(ai,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Advanced Analytics"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"See exactly where you're crushing it and where you need work. No more guessing what to study next."}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[n.jsx("li",{children:"• Real-time performance tracking"}),n.jsx("li",{children:"• Predictive learning insights"}),n.jsx("li",{children:"• Personalized study recommendations"})]})]}),n.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 hover:bg-gray-750 transition-all duration-300 transform hover:scale-105",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center mb-6",children:n.jsx(wl,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Compete & Excel"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"Track your progress and compete with peers. See how you rank and stay motivated with our comprehensive leaderboard system."}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[n.jsx("li",{children:"• Global rankings"}),n.jsx("li",{children:"• Daily goals"}),n.jsx("li",{children:"• Social learning"})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border-2 border-dashed border-yellow-500/50 rounded-xl p-8 hover:border-yellow-400/70 transition-all duration-300 transform hover:scale-105",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center mb-6",children:n.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"More Content to be Added"}),n.jsx("p",{className:"text-gray-400 mb-4",children:"We're constantly expanding our platform with new features, subjects, and learning tools to enhance your medical education journey."}),n.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[n.jsx("li",{children:"• New subject areas"}),n.jsx("li",{children:"• Enhanced AI features"}),n.jsx("li",{children:"• Community features"})]})]})]})]})}),n.jsx("section",{id:"preview",className:"py-20 bg-gray-800",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"See MedMaster in Action"}),n.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Experience our intuitive interface and powerful features designed for medical students"})]}),n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsx("div",{className:"relative bg-gray-900 rounded-2xl p-8 shadow-2xl",children:n.jsxs("div",{className:"relative overflow-hidden rounded-xl",children:[n.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${a*100}%)`},children:fe.map((D,U)=>n.jsx("div",{className:"w-full flex-shrink-0",children:n.jsx(sd,{src:D.src,alt:D.alt,className:"w-full h-auto rounded-lg shadow-lg",onLoad:()=>O("screenshot_loaded",{slide:U})})},U))}),n.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:fe.map((D,U)=>n.jsx("button",{onClick:()=>o(U),className:`w-3 h-3 rounded-full transition-all duration-300 ${U===a?"bg-blue-500 scale-125":"bg-gray-600 hover:bg-gray-500"}`},U))}),n.jsx("div",{className:"text-center mt-4",children:n.jsx("h3",{className:"text-xl font-semibold text-white",children:fe[a].title})})]})})})]})}),n.jsx("section",{id:"stats",className:"py-20 bg-gradient-to-r from-blue-900 to-purple-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"Trusted by Medical Students"}),n.jsx("p",{className:"text-xl text-gray-300",children:"Join thousands of students mastering microbiology and pharmacology"})]}),n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-gray-900 rounded-2xl p-8 shadow-2xl relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10"}),n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-full overflow-hidden border-4 border-gradient-to-r from-blue-400 to-purple-400 shadow-lg",children:n.jsx("img",{src:A[d].image,alt:A[d].name,className:"w-full h-full object-cover",onError:D=>{D.currentTarget.src=`data:image/svg+xml;base64,${btoa(`
                            <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 128 128">
                              <rect width="128" height="128" fill="#4F46E5"/>
                              <circle cx="64" cy="45" r="20" fill="white"/>
                              <circle cx="64" cy="105" r="35" fill="white"/>
                              <text x="64" y="70" text-anchor="middle" fill="#4F46E5" font-size="16" font-weight="bold">
                                ${A[d].name.split(" ").map(U=>U[0]).join("")}
                              </text>
                            </svg>
                          `)}`}})})}),n.jsxs("div",{className:"flex-1 text-center md:text-left",children:[n.jsxs("blockquote",{className:"text-lg md:text-xl text-gray-200 mb-4 italic",children:['"',A[d].comment,'"']}),n.jsxs("div",{className:"text-white",children:[n.jsx("div",{className:"font-bold text-xl",children:A[d].name}),n.jsx("div",{className:"text-blue-400 font-medium",children:A[d].college}),n.jsx("div",{className:"text-gray-400",children:A[d].year})]})]})]}),n.jsx("div",{className:"flex justify-center mt-8 space-x-2",children:A.map((D,U)=>n.jsx("button",{onClick:()=>h(U),className:`w-3 h-3 rounded-full transition-all duration-300 ${U===d?"bg-blue-400 scale-125":"bg-gray-600 hover:bg-gray-500"}`},U))})]})]})}),n.jsx("div",{className:"max-w-4xl mx-auto mt-16",children:n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-8 shadow-2xl relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/20 to-blue-500/20"}),n.jsxs("div",{className:"relative z-10 text-center",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center",children:n.jsx(_l,{className:"w-8 h-8 text-purple-600"})})}),n.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"Questions Based on Famous Resources"}),n.jsx("p",{className:"text-xl text-blue-100 mb-6",children:"Questions pulled from the resources you already know and trust"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[n.jsx("div",{className:"text-white font-bold text-lg",children:"Sketchy"}),n.jsx("div",{className:"text-blue-200 text-sm",children:"Visual Learning"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[n.jsx("div",{className:"text-white font-bold text-lg",children:"Pixorize"}),n.jsx("div",{className:"text-blue-200 text-sm",children:"Memory Palace"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[n.jsx("div",{className:"text-white font-bold text-lg",children:"First Aid"}),n.jsx("div",{className:"text-blue-200 text-sm",children:"USMLE Prep"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[n.jsx("div",{className:"text-white font-bold text-lg",children:"Anki"}),n.jsx("div",{className:"text-blue-200 text-sm",children:"Spaced Repetition"})]})]})]})]})})]})}),n.jsx("section",{id:"about-developer",className:"py-20 bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"About the Developer"}),n.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Meet the mind behind MedMaster"})]}),n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsx("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-2xl p-8 md:p-12 shadow-2xl border border-gray-700",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-gradient-to-r from-blue-400 to-purple-400 shadow-xl",children:n.jsx("img",{src:"/developer/haroon.jpg",alt:"Muhammad Haroon - Developer",className:"w-full h-full object-cover",onError:D=>{D.currentTarget.src=`data:image/svg+xml;base64,${btoa(`
                          <svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160">
                            <rect width="160" height="160" fill="#4F46E5"/>
                            <circle cx="80" cy="60" r="25" fill="white"/>
                            <circle cx="80" cy="130" r="45" fill="white"/>
                            <text x="80" y="85" text-anchor="middle" fill="#4F46E5" font-size="20" font-weight="bold">
                              MH
                            </text>
                          </svg>
                        `)}`}})})}),n.jsxs("div",{className:"flex-1 text-center md:text-left",children:[n.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"Muhammad Haroon"}),n.jsx("div",{className:"text-blue-400 font-semibold text-lg mb-4",children:"4th Year Medical Student"}),n.jsx("div",{className:"text-purple-400 font-medium mb-6",children:"Saidu Medical College, Swat"}),n.jsx("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:"As a passionate 4th-year medical student at Saidu Medical College Swat, I created MedMaster to revolutionize how we learn microbiology and pharmacology. Having experienced the challenges of medical education firsthand, I designed this platform to make complex medical concepts more accessible, engaging, and memorable through gamification and innovative learning techniques."}),n.jsx("p",{className:"text-gray-400 leading-relaxed",children:"My goal is to empower fellow medical students with tools that not only help them excel in their studies but also prepare them to become better healthcare professionals. MedMaster represents my commitment to improving medical education and making learning an enjoyable journey rather than a burden."}),n.jsxs("div",{className:"flex justify-center md:justify-start gap-4 mt-8",children:[n.jsx("a",{href:"mailto:contact@medmaster.site",className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full transition-all duration-300 hover:scale-110",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),n.jsx("a",{href:"https://www.linkedin.com/in/haroon-zia-a3a516369/",target:"_blank",rel:"noopener noreferrer",className:"bg-blue-800 hover:bg-blue-900 text-white p-3 rounded-full transition-all duration-300 hover:scale-110",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]})]})})})]})}),n.jsx(id,{}),n.jsx("section",{id:"contact",className:"py-20 bg-gray-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16 animate-fadeIn",children:[n.jsx("h2",{className:"text-4xl font-bold mb-4 text-white",children:"Get In Touch"}),n.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Have questions or feedback? We'd love to hear from you!"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-12 max-w-6xl mx-auto",children:[n.jsx("div",{className:"space-y-8",children:n.jsxs("div",{className:"bg-gray-800 rounded-xl p-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Contact Information"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:n.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Email"}),n.jsx("p",{className:"text-white font-semibold",children:"contact@medmaster.site"})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center",children:n.jsxs("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Office Address"}),n.jsxs("p",{className:"text-white font-semibold",children:["Peshawar, Khyber Pakhtunkhwa, 25000",n.jsx("br",{}),"Pakistan"]})]})]})]})]})}),n.jsxs("div",{className:"flex flex-col justify-center space-y-6",children:[n.jsxs("a",{href:"mailto:contact@medmaster.site",className:"w-full bg-gradient-to-r from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-3 group",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),n.jsx("span",{children:"Send us an Email"})]}),n.jsxs("a",{href:"https://linkedin.com/company/medmaster",target:"_blank",rel:"noopener noreferrer",className:"w-full bg-gradient-to-r from-blue-800 to-indigo-800 hover:from-blue-900 hover:to-indigo-900 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center gap-3 group",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 group-hover:scale-110",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),n.jsx("span",{children:"Connect on LinkedIn"})]})]})]})]})}),n.jsx("footer",{className:"bg-black py-12",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[n.jsxs("div",{className:"md:col-span-1",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center mr-3",children:n.jsx(dr,{className:"w-4 h-4 text-white"})}),n.jsx("span",{className:"text-xl font-bold text-white",children:"MedMaster"})]}),n.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Empowering the next generation of medical professionals with innovative learning solutions."}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-400",children:[n.jsx("p",{children:"MedMaster"}),n.jsx("p",{children:"Peshawar, Khyber Pakhtunkhwa, 25000"}),n.jsx("p",{children:"Pakistan"}),n.jsx("p",{children:"Email: contact@medmaster.site"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-semibold mb-4",children:"Quick Links"}),n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsx("li",{children:n.jsx("button",{onClick:()=>$("features"),className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:"Features"})}),n.jsx("li",{children:n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:"Pricing"})}),n.jsx("li",{children:n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:"Documentation"})}),n.jsx("li",{children:n.jsx("button",{onClick:()=>$("contact"),className:"text-gray-400 hover:text-white transition-colors cursor-pointer",children:"Contact"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-semibold mb-4",children:"Legal"}),n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsx("li",{children:n.jsx("a",{href:"/privacy-policy",className:"text-gray-400 hover:text-white transition-colors",children:"Privacy Policy"})}),n.jsx("li",{children:n.jsx("a",{href:"/terms-conditions",className:"text-gray-400 hover:text-white transition-colors",children:"Terms & Conditions"})}),n.jsx("li",{children:n.jsx("a",{href:"/refund-policy",className:"text-gray-400 hover:text-white transition-colors",children:"Return/Refund Policy"})}),n.jsx("li",{children:n.jsx("a",{href:"/service-policy",className:"text-gray-400 hover:text-white transition-colors",children:"Service Policy"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-semibold mb-4",children:"Our Services"}),n.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[n.jsx("li",{children:"Quick Fire Mode (7,000+ Questions)"}),n.jsx("li",{children:"Clinical Cases (3,000+ Cases)"}),n.jsx("li",{children:"Gamified Learning System"}),n.jsx("li",{children:"Smart Spaced Repetition"}),n.jsx("li",{children:"Advanced Analytics"}),n.jsx("li",{children:"Competitive Leaderboards"}),n.jsx("li",{children:"Personalized Study Plans"}),n.jsx("li",{children:"Progress Tracking"})]})]})]}),n.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center",children:[n.jsx("p",{className:"text-gray-500 text-sm mb-4 md:mb-0",children:"© 2025 MedMaster. All rights reserved. Empowering the next generation of medical professionals."}),n.jsxs("div",{className:"flex space-x-6",children:[n.jsx("a",{href:"https://linkedin.com/company/medmaster",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})}),n.jsx("a",{href:"mailto:contact@medmaster.site",className:"text-gray-400 hover:text-white transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]})]})]})}),x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-[var(--bg-secondary)] rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto border border-[var(--border-color)]",children:[n.jsxs("div",{className:"sticky top-0 bg-[var(--bg-secondary)] border-b border-[var(--border-color)] px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[n.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:v==="login"?"Login to Continue":"Create Account"}),n.jsx("button",{onClick:Xe,className:"p-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-tertiary)] rounded-full transition-colors",children:n.jsx(Ur,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6",children:n.jsx(Fg,{onAuthSuccess:F,initialMode:v})})]})}),f&&b&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Choose Payment Method"}),n.jsx("button",{onClick:de,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(Ur,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6",children:n.jsx(Vg,{planId:b.id,planName:b.name,planPrice:b.price,onPaymentInitiated:Se,onError:Ue})})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx(Qs,{size:"lg",color:"white"})})]})}const Kg=({onGetStarted:s,onLogin:e,onNavigateToPricing:t,onNavigateToDocumentation:r,onNavigateToDownloads:i,onAuthSuccess:a})=>n.jsx(Gg,{onGetStarted:s,onLogin:e,onNavigateToPricing:t,onNavigateToDocumentation:r,onNavigateToDownloads:i,onAuthSuccess:a}),el=p.createContext(void 0),Jg=()=>{const s=p.useContext(el);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Yg=({children:s})=>{const[e,t]=p.useState(null),[r,i]=p.useState(!0),a=!!e,o=async()=>{try{if(!localStorage.getItem("medMasterToken")){i(!1);return}({success:!1}).success}catch{localStorage.removeItem("medMasterToken"),localStorage.removeItem("medMasterEmail"),localStorage.removeItem("medMasterUsername")}finally{i(!1)}},c=async(u,m)=>{try{const f=await ke.login({email:u,password:m});if(f.success&&f.user){const g={id:parseInt(f.user.id),username:f.user.username,email:f.user.email,subscriptionType:f.user.subscription_status};return localStorage.setItem("medMasterToken",f.token||""),localStorage.setItem("medMasterEmail",g.email),localStorage.setItem("medMasterUsername",g.username),t(g),{success:!0,token:f.token,user:g}}else return{success:!1,message:f.error||"Login failed"}}catch{return{success:!1,message:"Login failed"}}},l=async(u,m)=>{try{const f=await ke.register({email:u,password:m});return f.success?await c(u,m):{success:!1,message:f.error||"Registration failed"}}catch{return{success:!1,message:"Registration failed"}}},d=()=>{localStorage.removeItem("medMasterToken"),localStorage.removeItem("medMasterEmail"),localStorage.removeItem("medMasterUsername"),t(null)};p.useEffect(()=>{o()},[]);const h={user:e,isAuthenticated:a,isLoading:r,login:c,register:l,logout:d,checkAuthStatus:o};return n.jsx(el.Provider,{value:h,children:s})},Xg=({mode:s,onClose:e,onAuthSuccess:t,onSwitchMode:r})=>{const[i,a]=p.useState({username:"",email:"",password:"",confirmPassword:""}),[o,c]=p.useState(!1),[l,d]=p.useState(!1),[h,u]=p.useState(!1),[m,f]=p.useState(!1),[g,b]=p.useState({}),{login:y,register:x}=Jg(),N=()=>{const w={};return i.username.trim()||(w.username="Username is required"),s==="signup"?(i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(w.email="Please enter a valid email address"):w.email="Email is required",i.password?i.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",i.password!==i.confirmPassword&&(w.confirmPassword="Passwords do not match")):i.password||(w.password="Password is required"),b(w),Object.keys(w).length===0},v=async w=>{if(w.preventDefault(),!!N()){u(!0);try{let j;s==="login"?j=await y(i.email,i.password):j=await x(i.email,i.password),j.success&&j.token&&j.user?(R.success(s==="login"?"Welcome back!":"Account created successfully!"),t(j.token,j.user.email,j.user.username,"demo",j.user.id)):R.error(j.message||`${s==="login"?"Login":"Registration"} failed`)}catch{R.error("An unexpected error occurred. Please try again.")}finally{u(!1)}}},k=async()=>{f(!0);try{const w=await Po();if(w.pending){R.info("Redirecting to Google...");return}if(w.user&&w.idToken){console.log("🔄 Sending Firebase data to backend:",{email:w.user.email,displayName:w.user.displayName,uid:w.user.uid});const j={idToken:w.idToken,email:w.user.email,displayName:w.user.displayName||w.user.email?.split("@")[0]||"User"},E=await ke.registerFirebase(j);E.success&&E.token&&E.user?(R.success("Google authentication successful!"),t(E.token,E.user.email,E.user.username,E.user.subscription_status||"demo",parseInt(E.user.id))):R.error(E.error||"Google authentication failed")}}catch(w){console.error("Google auth error:",w),R.error(w.message||"Google authentication failed")}finally{f(!1)}},_=w=>{const{name:j,value:E}=w.target;a(C=>({...C,[j]:E})),g[j]&&b(C=>({...C,[j]:""}))};return n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-gray-900 rounded-lg border border-gray-700 w-full max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:s==="login"?"Welcome Back":"Create Account"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:n.jsx(Ur,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),n.jsxs("div",{className:"relative",children:[n.jsx(Dr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",id:"username",name:"username",value:i.username,onChange:_,className:`w-full pl-10 pr-4 py-3 bg-gray-800 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${g.username?"border-red-500":"border-gray-600"}`,placeholder:"Enter your username",disabled:h})]}),g.username&&n.jsx("p",{className:"mt-1 text-sm text-red-400",children:g.username})]}),s==="signup"&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(ma,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:_,className:`w-full pl-10 pr-4 py-3 bg-gray-800 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${g.email?"border-red-500":"border-gray-600"}`,placeholder:"Enter your email",disabled:h})]}),g.email&&n.jsx("p",{className:"mt-1 text-sm text-red-400",children:g.email})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:o?"text":"password",id:"password",name:"password",value:i.password,onChange:_,className:`w-full pl-10 pr-12 py-3 bg-gray-800 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${g.password?"border-red-500":"border-gray-600"}`,placeholder:"Enter your password",disabled:h}),n.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:o?n.jsx(Ks,{className:"w-5 h-5"}):n.jsx(Js,{className:"w-5 h-5"})})]}),g.password&&n.jsx("p",{className:"mt-1 text-sm text-red-400",children:g.password})]}),s==="signup"&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),n.jsxs("div",{className:"relative",children:[n.jsx(Jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:l?"text":"password",id:"confirmPassword",name:"confirmPassword",value:i.confirmPassword,onChange:_,className:`w-full pl-10 pr-12 py-3 bg-gray-800 border rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${g.confirmPassword?"border-red-500":"border-gray-600"}`,placeholder:"Confirm your password",disabled:h}),n.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:l?n.jsx(Ks,{className:"w-5 h-5"}):n.jsx(Js,{className:"w-5 h-5"})})]}),g.confirmPassword&&n.jsx("p",{className:"mt-1 text-sm text-red-400",children:g.confirmPassword})]}),n.jsx("button",{type:"submit",disabled:h||m,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white py-3 rounded-lg font-semibold transition-colors flex items-center justify-center",children:h?n.jsxs(n.Fragment,{children:[n.jsx(Yn,{className:"w-5 h-5 animate-spin mr-2"}),s==="login"?"Signing In...":"Creating Account..."]}):s==="login"?"Sign In":"Create Account"}),n.jsxs("div",{className:"flex items-center my-4",children:[n.jsx("div",{className:"flex-1 border-t border-gray-600"}),n.jsx("span",{className:"px-4 text-gray-400 text-sm",children:"or"}),n.jsx("div",{className:"flex-1 border-t border-gray-600"})]}),n.jsx("button",{type:"button",onClick:k,disabled:h||m,className:"w-full bg-white hover:bg-gray-100 disabled:bg-gray-300 disabled:cursor-not-allowed text-gray-900 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center border border-gray-300",children:m?n.jsxs(n.Fragment,{children:[n.jsx(Yn,{className:"w-5 h-5 animate-spin mr-2"}),"Connecting to Google..."]}):n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),n.jsx("div",{className:"text-center pt-4 border-t border-gray-700",children:n.jsxs("p",{className:"text-gray-400",children:[s==="login"?"Don't have an account?":"Already have an account?",n.jsx("button",{type:"button",onClick:()=>r(s==="login"?"signup":"login"),className:"ml-2 text-blue-400 hover:text-blue-300 font-semibold transition-colors",disabled:h,children:s==="login"?"Sign Up":"Sign In"})]})})]})]})})},Qg=({className:s})=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:s,children:[n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),n.jsx("path",{d:"M8.5 8.5c0-1.5 1-3 2.5-3.5 0 1 .5 2 1.5 2.5C13.5 8 14 9 14 10c0 1.5-1 2.5-2.5 2.5S9 11.5 9 10c0-.5.2-1 .5-1.5z"})]}),Zg=({className:s})=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:s,children:n.jsx("path",{d:"M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5zm2.7-2h8.6l.9-5.4-2.1 1.4L12 8l-3.1 2L6.8 8.6L7.7 14z"})});function e0({onShowLandingLogin:s,onBackToLanding:e}){const[t,r]=p.useState(null),{user:i,isAuthenticated:a,refreshSubscriptionStatus:o}=St(),c=Xt();p.useEffect(()=>{a&&o()},[a,o]);const l=u=>i?u==="demo"?i.subscriptionType==="demo":u==="starter"?i.subscriptionType==="starter":u==="popular"?i.subscriptionType==="premium"||i.subscriptionType==="popular":!1:!1,d=u=>{if(!a){if(u==="demo")return"Try Demo - FREE";if(u==="starter")return"Start Learning - ₨700";if(u==="popular")return"Choose Premium - ₨1200"}if(l(u))return u==="demo"?"Current Plan":"Active Plan";if(i?.subscriptionType==="demo"){if(u==="starter")return"Upgrade to Starter - ₨700";if(u==="popular")return"Upgrade to Premium - ₨1200"}if(i?.subscriptionType==="starter"){if(u==="popular")return"Upgrade to Premium - ₨1200";if(u==="demo")return"Downgrade to Demo"}if(i?.subscriptionType==="premium"||i?.subscriptionType==="popular"){if(u==="starter")return"Downgrade to Starter";if(u==="demo")return"Downgrade to Demo"}return"Select Plan"},h=async u=>{console.log("🔄 handlePayment called with planType:",u),console.log("🔐 isAuthenticated:",a),console.log("👤 user:",i),r(u);try{if(!a){console.log("❌ User not authenticated, showing login"),s?s():console.log("⚠️ onShowLandingLogin not provided");return}const m=localStorage.getItem("medMasterToken")||localStorage.getItem("authToken");if(console.log("🔑 Token check:",m?"Found":"Not found"),!m){console.log("❌ No token found, redirecting to login"),s?s():console.log("⚠️ onShowLandingLogin not provided");return}if(l(u)&&u!=="demo"){if(window.confirm("Do you want to unsubscribe from your current plan?")){if(!i?.id)throw new Error("User not found");const g=await ge.cancelUserSubscription(i.id);if(g.success)await o(),alert("Unsubscribed successfully! You now have demo access.");else throw new Error(g.error||"Failed to unsubscribe")}return}if(i){const f=i.subscriptionType,g={starter:1,popular:2,premium:2};if(console.log("💳 Processing plan change:",{planType:u,currentPlan:f,user:i.username}),u==="demo"&&f!=="demo"){if(window.confirm("Are you sure you want to downgrade to Demo? You will lose access to premium features.")){if(!i?.id)throw new Error("User not found");const y=await ge.cancelUserSubscription(i.id);if(y.success)await o(),alert("Successfully downgraded to Demo plan!");else throw new Error(y.error||"Failed to downgrade")}}else if(u==="starter"&&(f==="premium"||f==="popular")){if(window.confirm("Are you sure you want to downgrade to Starter? You will lose some premium features.")){if(!i?.id)throw new Error("User not found");const y=await ge.updateUserSubscriptionByUserId(i.id,{plan_id:g.starter,subscription_type:"starter"});if(y.success)await o(),alert("Successfully downgraded to Starter plan!");else throw new Error(y.error||"Failed to downgrade")}}else if(u==="popular"&&f!=="premium"&&f!=="popular")if(f==="demo")console.log("🚀 Navigating to payment page for premium plan"),console.log("📍 Current location before navigation:",window.location.href),c("/payment?plan=premium"),console.log("✅ Navigation command executed");else{if(!i?.id)throw new Error("User not found");const b=await ge.updateUserSubscriptionByUserId(i.id,{plan_id:g.popular,subscription_type:"premium"});if(b.success)await o(),alert("Successfully upgraded to Premium plan!");else throw new Error(b.error||"Failed to upgrade")}else u==="starter"&&f==="demo"&&(console.log("🚀 Navigating to payment page for starter plan"),console.log("📍 Current location before navigation:",window.location.href),c("/payment?plan=starter"),console.log("✅ Navigation command executed"))}}catch(m){console.error("❌ Payment error:",m);const f=m instanceof Error?m.message:"Unknown error",g=m instanceof Error?m.stack:void 0,b=m instanceof Error?m.name:"Error";console.error("Error details:",{message:f,stack:g,name:b}),f&&(f.includes("token")||f.includes("auth")||f.includes("login"))?(console.log("🔐 Authentication error, redirecting to login"),s&&s()):alert(`Operation failed: ${f||"Please try again."}`)}finally{console.log("🏁 Payment process finished, clearing loading state"),r(null)}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[n.jsx("div",{className:"bg-gray-900/50 backdrop-blur-sm border-b border-gray-700",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"flex items-center justify-between h-16",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{onClick:e||(()=>window.history.back()),className:"text-gray-300 hover:text-white transition-colors",children:"← Back"}),n.jsx("h1",{className:"text-xl font-bold text-white",children:"Pricing Plans"})]})})})}),n.jsx("section",{className:"py-20",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsxs("h2",{className:"text-5xl font-bold mb-6 text-white",children:["Choose Your ",n.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Learning Plan"})]}),n.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Unlock your medical education potential with our comprehensive study platform. Join thousands of medical students who've transformed their learning experience."})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:`bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border transition-all duration-300 transform hover:scale-105 hover:shadow-2xl flex flex-col relative ${l("demo")?"border-green-400 border-2 shadow-green-400/20 shadow-2xl":"border-gray-700 hover:border-green-500"}`,children:[l("demo")&&n.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:n.jsx("div",{className:"bg-green-500 text-white px-4 py-1 rounded-full text-sm font-bold flex items-center shadow-lg",children:"✓ Active Plan"})}),n.jsxs("div",{className:"text-center flex flex-col h-full",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:n.jsx("span",{className:"text-white text-2xl font-bold",children:"🎯"})}),n.jsx("h3",{className:"text-2xl font-bold mb-2 text-white",children:"Demo Plan"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("span",{className:"text-4xl font-bold text-green-400",children:"FREE"}),n.jsx("span",{className:"text-gray-400 ml-2",children:"/limited access"})]}),n.jsxs("ul",{className:"text-left space-y-3 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"Limited Content Access"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"Basic Analytics"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"50 Practice Questions"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"5 Case Studies"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-yellow-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs",children:"⏰"})}),n.jsx("span",{className:"text-white font-semibold",children:"7 days trial"})]})]}),n.jsx("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),console.log("🖱️ Demo button clicked"),h("demo")},disabled:t==="demo"||l("demo")&&i?.subscriptionType==="demo",className:`mt-auto w-full font-bold py-4 px-6 rounded-full transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl relative z-10 ${l("demo")?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed text-white cursor-pointer"}`,style:{pointerEvents:"auto"},children:t==="demo"?n.jsx("span",{children:"Processing..."}):n.jsxs(n.Fragment,{children:[l("demo")&&n.jsx("span",{className:"mr-2",children:"✓"}),d("demo")]})})]})]}),n.jsxs("div",{className:`bg-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border transition-all duration-300 transform hover:scale-105 hover:shadow-2xl flex flex-col relative ${l("starter")?"border-blue-400 border-2 shadow-blue-400/20 shadow-2xl":"border-gray-700 hover:border-blue-500"}`,children:[l("starter")&&n.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:n.jsx("div",{className:"bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-bold flex items-center shadow-lg",children:"✓ Active Plan"})}),n.jsxs("div",{className:"text-center flex flex-col h-full",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:n.jsx(ns,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold mb-2 text-white",children:"Starter Plan"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("span",{className:"text-4xl font-bold text-white",children:"₨700"}),n.jsx("span",{className:"text-gray-400 ml-2",children:"/3 months"})]}),n.jsxs("ul",{className:"text-left space-y-3 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"Full Content"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"Analytics"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-white text-xs font-bold",children:"3"})}),n.jsx("span",{className:"text-white font-semibold",children:"3 months"})]})]}),n.jsx("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),console.log("🖱️ Starter button clicked"),h("starter")},disabled:t==="starter",className:`mt-auto w-full font-bold py-4 px-6 rounded-full transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl relative z-10 ${l("starter")?"bg-blue-700 text-blue-100 border-2 border-blue-400":"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 disabled:opacity-50 disabled:cursor-not-allowed text-white cursor-pointer"}`,style:{pointerEvents:"auto"},children:t==="starter"?n.jsx("span",{children:"Processing..."}):n.jsxs(n.Fragment,{children:[l("starter")&&n.jsx("span",{className:"mr-2",children:"✓"}),d("starter")]})})]})]}),n.jsxs("div",{className:`bg-gradient-to-br from-orange-500/20 to-red-500/20 backdrop-blur-sm rounded-2xl p-8 border-2 transform scale-105 relative shadow-2xl flex flex-col ${l("popular")?"border-orange-300 shadow-orange-400/30":"border-orange-400"}`,children:[n.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:l("popular")?n.jsx("div",{className:"bg-orange-500 text-white px-6 py-2 rounded-full text-sm font-bold flex items-center shadow-lg",children:"✓ ACTIVE PLAN"}):n.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-6 py-2 rounded-full text-sm font-bold flex items-center shadow-lg",children:[n.jsx(Qg,{className:"w-4 h-4 mr-1"}),"MOST POPULAR"]})}),n.jsxs("div",{className:"text-center flex flex-col h-full",children:[n.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:n.jsx(Zg,{className:"w-8 h-8 text-orange-500"})}),n.jsx("h3",{className:"text-2xl font-bold mb-2 text-white",children:"Premium Plan"}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-center mb-2",children:[n.jsx("span",{className:"text-2xl text-orange-200 line-through mr-2",children:"₨1500"}),n.jsx("span",{className:"text-4xl font-bold text-white",children:"₨1200"})]}),n.jsx("div",{className:"text-sm text-yellow-300 mb-1 font-semibold",children:"Save 20% • Best Value"}),n.jsx("span",{className:"text-gray-300 text-sm",children:"/6 months"})]}),n.jsxs("ul",{className:"text-left space-y-3 mb-6",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-orange-500 text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"Full Content"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-orange-500 text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"Analytics"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-orange-500 text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200",children:"Priority Access to New Content"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-orange-500 text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200 font-semibold",children:"Custom questions"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-orange-500 text-xs",children:"✓"})}),n.jsx("span",{className:"text-gray-200 font-semibold",children:"Custom avatars"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("div",{className:"w-5 h-5 bg-white rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:n.jsx("span",{className:"text-orange-500 text-xs font-bold",children:"6"})}),n.jsx("span",{className:"text-white font-semibold",children:"6 months"})]})]}),n.jsx("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),console.log("🖱️ Premium button clicked"),h("popular")},disabled:t==="popular",className:`mt-auto w-full font-bold py-4 px-6 rounded-full transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl relative z-10 ${l("popular")?"bg-orange-600 text-orange-100 border-2 border-orange-400":"bg-white text-orange-500 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer"}`,style:{pointerEvents:"auto"},children:t==="popular"?n.jsx("span",{children:"Processing..."}):n.jsxs(n.Fragment,{children:[l("popular")&&n.jsx("span",{className:"mr-2",children:"✓"}),d("popular")]})})]})]})]})]})})]})}const t0=({onBackToLanding:s})=>{const[e,t]=p.useState("overview"),r=[{id:"overview",title:"Overview",icon:"📚"},{id:"study-modes",title:"Study Modes",icon:"🧠"},{id:"srs-system",title:"Spaced Repetition",icon:"⏰"},{id:"gamification",title:"Gamification",icon:"🎮"},{id:"analytics",title:"Analytics & Progress",icon:"📊"},{id:"leaderboards",title:"Leaderboards",icon:"🏆"},{id:"achievements",title:"Achievements",icon:"🏅"},{id:"tips",title:"Study Tips",icon:"🎯"},{id:"support",title:"Support",icon:"🔗"}];return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center mb-8",children:[n.jsx("button",{onClick:s||(()=>window.history.back()),className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors mr-4",children:"← Back"}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"MedMaster Complete Guide"})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 max-w-7xl mx-auto",children:[n.jsx("div",{className:"lg:w-64 flex-shrink-0",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sticky top-8",children:[n.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Navigation"}),n.jsx("nav",{className:"space-y-2",children:r.map(i=>n.jsxs("button",{onClick:()=>t(i.id),className:`w-full flex items-center px-3 py-2 rounded-lg text-left transition-colors ${e===i.id?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[n.jsx("span",{className:"mr-3",children:i.icon}),i.title]},i.id))})]})}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:n.jsxs("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:[e==="overview"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"📚"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"What is MedMaster?"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"MedMaster is a study companion built specifically for medical students. It combines evidence‑based learning methods with a clean, motivating experience so you can learn faster, remember longer, and study with purpose."}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:["Inside, you'll find a growing library of more than ",n.jsx("strong",{children:"7,000"})," QuickFire questions, ",n.jsx("strong",{children:"3,000"})," realistic clinical cases, ",n.jsx("strong",{children:"500+"})," smart flashcards, and hundreds of concise, high‑yield articles—curated to reflect how medicine is learned and tested."]}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Subject Coverage"}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:["Current content focuses on ",n.jsx("strong",{children:"Microbiology"})," and ",n.jsx("strong",{children:"Pharmacology"}),". In Microbiology, you'll review core organisms across bacteria (Gram‑positive and Gram‑negative), viruses (DNA and RNA), fungi (yeasts and molds), and parasites (protozoa and helminths). In Pharmacology, you'll connect mechanisms of action with PK/PD principles, drug interactions and adverse effects, and real clinical applications."]}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Why Choose MedMaster?"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:[n.jsx("strong",{children:"Scientifically grounded:"})," Our spaced‑repetition engine implements the SM‑2 algorithm to schedule reviews at the moment they're most effective—helping you convert short‑term knowledge into durable memory."]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:[n.jsx("strong",{children:"Motivating by design:"})," Achievements, streaks, and leaderboards turn consistency into a habit without distracting from what matters—mastery."]}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:[n.jsx("strong",{children:"Driven by insight:"})," Clear analytics highlight strengths and blind spots so you always know what to study next."]})]})]}),e==="study-modes"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"🧠"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"Study Modes"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"MedMaster offers four distinct study modes, each designed for different learning objectives and study preferences. Whether you need quick knowledge checks or deep clinical reasoning practice, there's a mode that fits your current study goals."}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-3xl mr-3",children:"⚡"}),n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white m-0",children:"QuickFire Mode"})]}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"QuickFire delivers rapid‑fire multiple choice questions designed to test your knowledge quickly and efficiently. You can customize difficulty levels from Easy to Hard, filter by specific subjects, and track your performance with real‑time scoring and combo multipliers. Each question comes with instant feedback and detailed explanations, making it perfect for active recall and identifying knowledge gaps."}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:[n.jsx("strong",{children:"Best for:"})," Quick knowledge assessment, warm‑up sessions before studying, reviewing specific topics, and building confidence before exams. The timer options also make it excellent for exam simulation practice."]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-3xl mr-3",children:"🏥"}),n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white m-0",children:"Clinical Cases"})]}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Clinical Cases present realistic patient scenarios that test your clinical reasoning and diagnostic skills. Each case unfolds progressively, revealing patient history, symptoms, and diagnostic information step‑by‑step. You'll work through multiple diagnostic pathways with detailed explanations and reasoning, all within a difficulty progression system that grows with your expertise."}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:[n.jsx("strong",{children:"Best for:"})," Developing clinical reasoning skills, exam‑style practice, bridging theory to practice, and building diagnostic confidence. These cases mirror real‑world scenarios you'll encounter in clinical settings."]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-3xl mr-3",children:"🧠"}),n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white m-0",children:"Smart Flashcards"})]}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Smart Flashcards use intelligent spaced repetition scheduling to focus on high‑yield facts, drug mechanisms, and organism characteristics. Each card contains detailed profiles with multiple information layers, organized by category with individual progress tracking. The system automatically schedules reviews based on your performance, ensuring optimal retention."}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:[n.jsx("strong",{children:"Best for:"})," Long‑term retention, memorizing key facts, daily review sessions, and reinforcing weak areas. The spaced repetition algorithm makes this the most effective mode for building lasting knowledge."]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-lg",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-3xl mr-3",children:"📚"}),n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white m-0",children:"Article Review"})]}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Article Review offers concise, focused articles covering essential medical topics in bite‑sized summaries. Each article includes integrated comprehension checks and highlighted key takeaways, with progressive difficulty and cross‑referenced content that connects related concepts across different topics."}),n.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:[n.jsx("strong",{children:"Best for:"})," Topic introduction, quick revision, concept reinforcement, and building comprehensive understanding. These articles serve as excellent primers before diving into more intensive study modes."]})]})]})]}),e==="srs-system"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"⏰"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"Spaced Repetition System (SRS)"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"MedMaster uses the scientifically‑proven SM‑2 algorithm (the same one used by Anki) to optimize your learning schedule and maximize long‑term retention. This evidence‑based approach ensures you review material at precisely the right intervals to strengthen memory consolidation."}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"How It Works"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"The system intelligently schedules cards based on your performance and memory strength. Difficult cards appear more frequently while mastered cards show up less often, creating a personalized learning rhythm that adapts to your individual pace. This ensures optimal challenge without overwhelming you, making every study session as effective as possible."})]}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Customization Options"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"You have complete control over your study experience. Set daily limits for new cards (1‑50) and maximum reviews (1‑200) to match your schedule and capacity. Choose specific medical categories and subcategories, select difficulty levels from Easy to Hard, and see real‑time question counts for each selection. The system provides comprehensive statistics including total, due, learning, and mature cards, with visual progress bars and real‑time updates available anytime."}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"The study load preview feature estimates your daily study time, helping you plan sessions that fit your schedule. Whether you're preparing for exams or maintaining long‑term retention, the SRS adapts to support your goals while tracking your progress every step of the way."}),n.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 p-4 rounded-lg mt-6",children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"💡 Pro Tip"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:"Start with 5‑10 new cards per day and gradually increase as you get comfortable. Consistency is more important than volume—daily practice with fewer cards beats sporadic sessions with many cards."})]})]}),e==="gamification"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"🎮"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"Gamification Features"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"Stay motivated and engaged with MedMaster's comprehensive gamification system designed to make learning fun and rewarding. Our carefully crafted progression mechanics transform studying into an engaging experience that keeps you coming back."}),n.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-3xl mr-3",children:"⭐"}),n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white m-0",children:"XP & Scoring System"})]}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Earn experience points for every learning activity—correct answers in QuickFire mode, completing clinical cases, reviewing flashcards, reading articles, and maintaining daily study streaks. The system rewards consistency and accuracy with combo multipliers that scale from 2x for 5 correct answers in a row up to 5x for 15+ consecutive correct responses. These multipliers persist between sessions, encouraging sustained performance and making each study session feel rewarding."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-3xl mr-3",children:"👥"}),n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white m-0",children:"Avatar & Customization"})]}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Personalize your learning journey with 8 unique avatar designs and unlock special frames as you progress. Choose from Bronze, Silver, Gold, and Platinum frames, plus exclusive special event frames that commemorate your achievements. Your avatar becomes a visual representation of your dedication and progress, creating a sense of identity within your learning experience."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-6 rounded-lg mb-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("span",{className:"text-3xl mr-3",children:"🎯"}),n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white m-0",children:"Daily Challenges & Streaks"})]}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Build lasting study habits with daily goals that challenge you to complete questions, maintain accuracy rates, and sustain study streaks. Milestone rewards include bonus XP multipliers at 7 days, special achievements at 30 days, and exclusive avatar frames for reaching 100‑day streaks. The system includes streak protection for missed days, ensuring that life's interruptions don't derail your long‑term progress."})]})]}),e==="analytics"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"📊"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"Analytics & Progress Tracking"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"Get detailed insights into your learning progress with comprehensive analytics that help you identify strengths, weaknesses, and optimize your study strategy. Our data‑driven approach transforms your study patterns into actionable insights."}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Performance Metrics"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Track your overall statistics including total questions answered, accuracy rates, study time, and session completion rates. Visual progress charts show weekly and monthly trends, revealing accuracy improvements over time and study consistency patterns. Subject‑specific breakdowns highlight performance by area, difficulty level analysis, and topic‑specific weak spots, providing clear recommendations for focus areas that need attention."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"AI‑Powered Learning Insights"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Our intelligent system provides personalized recommendations for study topics based on your performance, suggests optimal study session timing, and recommends appropriate difficulty levels. Weekly performance summaries and detailed learning pattern analysis track retention rates and goal achievement progress, while the AI optimizes your review schedule to maximize learning efficiency and long‑term retention."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Study Pattern Analysis"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Discover your peak performance hours and optimize session lengths with intelligent break time recommendations. The system identifies your most effective study modes, analyzes question type performance, and tracks memory retention patterns to measure spaced repetition effectiveness. These insights help you understand when, how, and what to study for maximum learning efficiency, creating a personalized study strategy that adapts to your unique learning patterns."})]})]}),e==="leaderboards"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"🏆"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"Leaderboards & Competition"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"Compete with fellow medical students worldwide and climb the ranks through consistent study and high performance. Our competitive environment motivates excellence while fostering a global community of learners."}),n.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Global Rankings"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Our dual ranking system features weekly leaderboards that reset every Monday for fresh competition, based on XP earned during the week, alongside all‑time rankings that track cumulative XP from all sessions. Weekly winners receive exclusive rewards and special recognition, while top 10 players earn special leaderboard badges. The all‑time rankings feature prestigious titles for top performers, a Hall of Fame for legendary players, and special avatar frames for the top 100 students worldwide."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Scoring System"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Points are earned through multiple activities with sophisticated scoring mechanics. QuickFire mode awards base points per correct answer, enhanced by combo multiplier bonuses, difficulty level multipliers, and speed bonuses for quick responses. Clinical cases provide higher points for complex scenarios, with perfect completion bonuses, diagnostic accuracy rewards, and time efficiency bonuses. Additional activity bonuses include daily study streak multipliers, flashcard review bonuses, article completion points, and achievement unlock bonuses."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Weekly Prizes & Recognition"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:`Weekly winners receive exclusive "Champion" avatar frames, special winner badges for their profiles, featured placement on the winner's showcase, and bonus XP for the following week. Top 10 finishers earn special leaderboard badges, priority access to new features, exclusive avatar frame options, and recognition in our weekly newsletter. This recognition system celebrates achievement while encouraging continued excellence and community engagement.`})]})]}),e==="achievements"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"🏅"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"Achievements & Badges"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"Unlock achievements as you progress through your medical studies. Each achievement represents a significant milestone in your learning journey, celebrating your dedication and mastery of medical knowledge."}),n.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Question Mastery Achievements"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Progress through subject-specific achievement tiers as you master medical knowledge. In Microbiology, advance from Bug Hunter (100 questions) to Microbe Slayer (1,000), Infection Fighter (2,500), and ultimately Microbe Master (5,000 questions). Similarly, Pharmacology achievements progress from Drug Discoverer (100 questions) through Pill Pusher (1,000), Pharma Expert (2,500), to Medicine Maestro (5,000 questions). These achievements track your growing expertise in each medical discipline."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Clinical Excellence"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Clinical case achievements celebrate your diagnostic skills and case-solving abilities. Case completion milestones progress from Case Cracker (first case) through Case Solver (50 cases), Case Expert (250 cases), Case Virtuoso (500 cases), to Senior Resident (1,000 cases). Performance excellence achievements recognize diagnostic accuracy, including Top of the Class (perfect case score), Diagnostic Genius (90%+ accuracy on 10 cases), Clinical Reasoning Master (perfect scores on 5 complex cases), and Future Doctor (85%+ accuracy over 100 cases)."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Performance & Consistency"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Consistency achievements reward regular study habits with streak milestones from Study Starter (3 days) through Consistent Learner (7 days), Dedicated Student (30 days), Study Machine (100 days), to Legend (365 days). Speed and accuracy achievements celebrate exceptional performance, including Quick Draw (10 questions under 2 minutes), Sharpshooter (95% session accuracy), and consecutive correct answer streaks from Perfect Storm (20 in a row) to Unstoppable (50) and Legendary (100 consecutive correct answers)."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Special & Milestone Achievements"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Ultimate achievements represent the pinnacle of dedication, including Med Master (10,000 correct answers combined), Knowledge Seeker (complete all content), Perfectionist (100% in all categories), and Hall of Fame (top 10 all-time leaderboard). Milestone rewards celebrate community engagement and loyalty, featuring Early Adopter (beta participation), Community Builder (5 referrals), Feedback Champion (valuable contributions), and Anniversary (one full year of study). These special achievements recognize both exceptional performance and meaningful participation in the MedMaster community."})]})]}),e==="tips"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"🎯"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"Study Tips & Best Practices"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"Maximize your learning efficiency with these proven study strategies and tips from successful medical students. These evidence-based approaches will help you build lasting knowledge and achieve your academic goals."}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"General Study Strategy"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Develop an effective study routine by starting with QuickFire mode to identify weak areas and warm up your brain, then deep dive with clinical cases to practice reasoning on challenging topics. Reinforce your learning by converting mistakes into flashcards for daily review, and consolidate knowledge gaps by reading comprehensive article summaries. For optimal time management, prioritize short, frequent 15-30 minute sessions over marathon study periods, as daily 20-minute sessions consistently outperform weekly 3-hour cramming sessions. Study during your peak alert hours (typically morning), and take 5-10 minute breaks between sessions to maintain focus and retention."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Mode-Specific Strategies"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"For QuickFire mode, read questions carefully without rushing, use elimination methods for difficult questions, and pay special attention to explanations for wrong answers. Start with easier difficulties and gradually increase complexity while using filters to focus on specific weak areas. In clinical cases, think systematically through History → Physical → Tests → Diagnosis, consider differential diagnoses before settling on one, and pay attention to patient demographics and risk factors. Always review explanations even for correct answers and practice pattern recognition for common presentations. When using flashcards, be honest with confidence ratings, review cards daily even for just 5 minutes, focus on understanding rather than memorization, create mental associations and mnemonics, and never skip difficult cards as they require the most attention."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"SRS Optimization"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Begin your spaced repetition journey by starting small with 5-10 new cards per day, then build gradually by increasing 2-5 cards weekly as you become comfortable. Find your sustainable limit by stopping increases when reviews become overwhelming, remembering that consistency trumps intensity—it's better to do fewer cards daily than many sporadically. For advanced optimization, rate cards based on actual confidence rather than desired outcomes, prioritize overdue reviews over new cards, embrace difficult cards rather than avoiding them, and take regular study breaks to prevent burnout and maintain long-term motivation."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Motivation & Mindset"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:`Maintain motivation by setting small, achievable daily goals rather than distant milestones, using analytics to track your improvement over time, celebrating achievements and streaks, and connecting with other medical students for community support. Cultivate a growth mindset by embracing mistakes as learning opportunities, focusing on consistent process over perfect outcomes, being patient as medical knowledge takes time to build, and staying curious by asking "why" and "how" for deeper understanding. Remember that every expert was once a beginner, and your consistent effort today builds the foundation for tomorrow's clinical expertise.`})]})]}),e==="support"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("span",{className:"text-4xl mr-3",children:"🔗"}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white m-0",children:"Support & Help"})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed",children:"Need help or have questions? We're here to support your learning journey with comprehensive assistance and a vibrant community of medical students."}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Get in Touch"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Our dedicated support team is ready to assist you with any questions or issues. For general support and technical assistance, reach out to support@medmaster.site. Have ideas for new features or improvements? Send your suggestions to features@medmaster.site. Encountered a bug or technical problem? Report it to bugs@medmaster.site for quick resolution. For all other inquiries, including partnerships and general questions, contact us at hello@medmaster.site. We pride ourselves on responsive support with technical issues resolved within 24 hours, account problems addressed within 12 hours, feature requests acknowledged within 48 hours, and general questions answered within 24 hours."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Common Issues & Solutions"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"If you're experiencing sync issues where your progress isn't updating across devices, start by checking your internet connection, then try logging out and back in, clearing your browser cache and cookies, and contacting support if problems persist. For performance issues where the app runs slowly, close other browser tabs to free up memory, update your browser to the latest version, temporarily disable browser extensions that might interfere, and try using a different browser if issues continue. Most technical problems can be resolved quickly with these troubleshooting steps, but our support team is always available for additional assistance."})]}),n.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 p-6 rounded-lg mb-6",children:[n.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Community & Resources"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4 leading-relaxed",children:"Join our thriving Discord community to connect with fellow medical students in study groups, participate in weekly study challenges, share effective tips and strategies, and find motivation from peers on similar academic journeys. Beyond community support, we provide extensive additional resources including comprehensive study guides and cheat sheets, detailed video tutorials and walkthroughs, valuable medical school preparation tips, and career guidance and advice from experienced professionals. Our community-driven approach ensures you're never studying alone and always have access to the collective wisdom of successful medical students and professionals."})]})]})]})})})]})]})})},s0=({onBackToLanding:s})=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[n.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gray-900/95 backdrop-blur-sm border-b border-gray-800 shadow-lg",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"flex items-center justify-between h-16",children:n.jsxs("div",{className:"flex items-center",children:[n.jsxs("button",{onClick:s||(()=>window.history.back()),className:"flex items-center gap-2 text-gray-300 hover:text-white transition-all duration-300 hover:scale-105 mr-4",children:[n.jsx(ct,{className:"w-5 h-5"}),"Back"]}),n.jsxs("h1",{className:"text-2xl font-bold text-white",children:["Med",n.jsx("span",{className:"text-blue-400",children:"Master"})," Downloads"]})]})})})}),n.jsx("div",{className:"pt-20 pb-20",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16 pt-20",children:[n.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-500/10 border border-blue-500/20 rounded-full text-blue-400 text-sm font-medium mb-6 animate-fadeIn",children:[n.jsx(jl,{className:"w-4 h-4 mr-2"}),"Available on Multiple Platforms"]}),n.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-6 text-white",children:["Download ",n.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-purple-500 to-green-400 bg-clip-text text-transparent",children:"MedMaster"})]}),n.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Get MedMaster on your preferred platform and study anywhere, anytime. Access thousands of medical questions, clinical cases, and study tools offline."})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto mb-16",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl p-8 hover:from-blue-700 hover:to-blue-900 transition-all duration-300 transform hover:scale-105 shadow-xl",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx("svg",{className:"w-12 h-12 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-13.051-1.351"})})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Windows App"}),n.jsx("p",{className:"text-blue-100 mb-6",children:"Download the desktop version for Windows with full offline support and enhanced performance."}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{className:"flex items-center text-blue-100 text-sm",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Offline access to all content"]}),n.jsxs("div",{className:"flex items-center text-blue-100 text-sm",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Enhanced performance"]}),n.jsxs("div",{className:"flex items-center text-blue-100 text-sm",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Auto-sync with cloud"]})]}),n.jsxs("button",{className:"w-full bg-white text-blue-600 hover:bg-gray-100 font-bold py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-3",children:[n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),"Download for Windows"]}),n.jsx("p",{className:"text-blue-200 text-sm mt-2",children:"Coming Soon"})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-600 to-green-800 rounded-2xl p-8 hover:from-green-700 hover:to-green-900 transition-all duration-300 transform hover:scale-105 shadow-xl",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-6",children:n.jsx("svg",{className:"w-12 h-12 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M17.523 15.3414c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993.0001.5511-.4482.9997-.9993.9997m-11.046 0c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993 0 .5511-.4482.9997-.9993.9997m11.4045-6.02l1.9973-3.4592a.416.416 0 00-.1521-.5676.416.416 0 00-.5676.1521l-2.0223 3.503C15.5902 8.2439 13.8533 7.8508 12 7.8508s-3.5902.3931-5.1367 1.0989L4.841 5.4467a.4161.4161 0 00-.5677-.1521.4157.4157 0 00-.1521.5676l1.9973 3.4592C2.6889 11.1867.3432 14.6589 0 18.761h24c-.3435-4.1021-2.6892-7.5743-6.1185-9.4396"})})}),n.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Android App"}),n.jsx("p",{className:"text-green-100 mb-6",children:"Get the mobile app for Android with push notifications, offline mode, and seamless sync."}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{className:"flex items-center text-green-100 text-sm",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Push notifications"]}),n.jsxs("div",{className:"flex items-center text-green-100 text-sm",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Offline study mode"]}),n.jsxs("div",{className:"flex items-center text-green-100 text-sm",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Cross-device sync"]})]}),n.jsxs("button",{className:"w-full bg-white text-green-600 hover:bg-gray-100 font-bold py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-3",children:[n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),"Download APK"]}),n.jsx("p",{className:"text-green-200 text-sm mt-2",children:"Coming Soon"})]})})]})]})})]}),r0=({onBackToLanding:s})=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[n.jsx("header",{className:"bg-gray-900/50 backdrop-blur-sm border-b border-gray-700",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[n.jsx(ct,{className:"h-5 w-5"}),n.jsx("span",{children:"Back to Home"})]})}),n.jsx("div",{className:"text-2xl font-bold text-white",children:"MedMaster"})]})})}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-gray-700",children:[n.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Privacy Policy"}),n.jsxs("div",{className:"text-gray-300 space-y-6",children:[n.jsxs("p",{className:"text-sm text-gray-400",children:[n.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Information We Collect"}),n.jsx("p",{className:"mb-4",children:"At MedMaster, we collect information you provide directly to us, such as when you create an account, subscribe to our services, or contact us for support."}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Personal information (name, email address)"}),n.jsx("li",{children:"Account credentials and preferences"}),n.jsx("li",{children:"Payment information (processed securely through third-party providers)"}),n.jsx("li",{children:"Usage data and learning progress"}),n.jsx("li",{children:"Device information and IP address"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. How We Use Your Information"}),n.jsx("p",{className:"mb-4",children:"We use the information we collect to:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Provide, maintain, and improve our educational services"}),n.jsx("li",{children:"Process payments and manage subscriptions"}),n.jsx("li",{children:"Send you technical notices and support messages"}),n.jsx("li",{children:"Personalize your learning experience"}),n.jsx("li",{children:"Analyze usage patterns to enhance our platform"}),n.jsx("li",{children:"Comply with legal obligations"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. Information Sharing"}),n.jsx("p",{className:"mb-4",children:"We do not sell, trade, or otherwise transfer your personal information to third parties except:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"With your explicit consent"}),n.jsx("li",{children:"To trusted service providers who assist in operating our platform"}),n.jsx("li",{children:"When required by law or to protect our rights"}),n.jsx("li",{children:"In connection with a business transfer or acquisition"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Data Security"}),n.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the internet is 100% secure."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Data Retention"}),n.jsx("p",{children:"We retain your personal information for as long as necessary to provide our services and fulfill the purposes outlined in this policy, unless a longer retention period is required by law."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Your Rights"}),n.jsx("p",{className:"mb-4",children:"Depending on your location, you may have the following rights:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Access to your personal information"}),n.jsx("li",{children:"Correction of inaccurate data"}),n.jsx("li",{children:"Deletion of your personal information"}),n.jsx("li",{children:"Restriction of processing"}),n.jsx("li",{children:"Data portability"}),n.jsx("li",{children:"Objection to processing"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Cookies and Tracking"}),n.jsx("p",{children:"We use cookies and similar tracking technologies to enhance your experience, analyze usage, and provide personalized content. You can control cookie settings through your browser preferences."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Third-Party Services"}),n.jsx("p",{children:"Our platform may contain links to third-party websites or integrate with third-party services. We are not responsible for the privacy practices of these external services."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Children's Privacy"}),n.jsx("p",{children:"Our services are not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Changes to This Policy"}),n.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on this page and updating the "Last Updated" date.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Contact Information"}),n.jsx("p",{className:"mb-4",children:"If you have any questions about this Privacy Policy, please contact us:"}),n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," contact@medmaster.site"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," Peshawar, Khyber Pakhtunkhwa, 25000, Pakistan"]})]})]})]})]})})]}),n0=({onBackToLanding:s})=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[n.jsx("header",{className:"bg-gray-900/50 backdrop-blur-sm border-b border-gray-700",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[n.jsx(ct,{className:"h-5 w-5"}),n.jsx("span",{children:"Back to Home"})]})}),n.jsx("div",{className:"text-2xl font-bold text-white",children:"MedMaster"})]})})}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-gray-700",children:[n.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Terms & Conditions"}),n.jsxs("div",{className:"text-gray-300 space-y-6",children:[n.jsxs("p",{className:"text-sm text-gray-400",children:[n.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Acceptance of Terms"}),n.jsx("p",{children:"By accessing and using MedMaster's educational platform and services, you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Description of Service"}),n.jsx("p",{className:"mb-4",children:"MedMaster provides online medical education services including:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Interactive medical question banks and practice tests"}),n.jsx("li",{children:"Clinical case studies and scenarios"}),n.jsx("li",{children:"Spaced repetition learning system (SRS)"}),n.jsx("li",{children:"Progress tracking and analytics"}),n.jsx("li",{children:"Educational content for medical professionals and students"}),n.jsx("li",{children:"Subscription-based premium features"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. User Accounts and Registration"}),n.jsx("p",{className:"mb-4",children:"To access certain features of our service, you must register for an account. You agree to:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Provide accurate, current, and complete information during registration"}),n.jsx("li",{children:"Maintain and promptly update your account information"}),n.jsx("li",{children:"Maintain the security of your password and account"}),n.jsx("li",{children:"Accept responsibility for all activities under your account"}),n.jsx("li",{children:"Notify us immediately of any unauthorized use of your account"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Subscription and Payment Terms"}),n.jsx("p",{className:"mb-4",children:"Our premium services are available through subscription plans:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Subscription fees are charged in advance on a monthly or annual basis"}),n.jsx("li",{children:"All fees are non-refundable except as required by law"}),n.jsx("li",{children:"We reserve the right to change subscription prices with 30 days notice"}),n.jsx("li",{children:"Subscriptions automatically renew unless cancelled before the renewal date"}),n.jsx("li",{children:"You may cancel your subscription at any time through your account settings"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Acceptable Use Policy"}),n.jsx("p",{className:"mb-4",children:"You agree not to use the service to:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Violate any applicable laws or regulations"}),n.jsx("li",{children:"Share your account credentials with others"}),n.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),n.jsx("li",{children:"Distribute malware or engage in harmful activities"}),n.jsx("li",{children:"Copy, reproduce, or distribute our content without permission"}),n.jsx("li",{children:"Use automated tools to access our service"}),n.jsx("li",{children:"Interfere with the proper functioning of the service"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Intellectual Property Rights"}),n.jsx("p",{className:"mb-4",children:"All content, features, and functionality of MedMaster are owned by us and are protected by:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Copyright, trademark, and other intellectual property laws"}),n.jsx("li",{children:"International copyright treaties and conventions"})]}),n.jsx("p",{className:"mt-4",children:"You may not reproduce, distribute, modify, or create derivative works of our content without explicit written permission."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Educational Purpose Disclaimer"}),n.jsx("p",{children:"MedMaster is designed for educational purposes only. Our content should not be used as a substitute for professional medical advice, diagnosis, or treatment. Always seek the advice of qualified healthcare providers with questions regarding medical conditions."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Limitation of Liability"}),n.jsx("p",{children:"To the maximum extent permitted by law, MedMaster shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, or other intangible losses resulting from your use of the service."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Service Availability"}),n.jsx("p",{children:"We strive to maintain high service availability but do not guarantee uninterrupted access. We may temporarily suspend service for maintenance, updates, or due to circumstances beyond our control."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Termination"}),n.jsx("p",{className:"mb-4",children:"We may terminate or suspend your account and access to the service:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"For violation of these terms"}),n.jsx("li",{children:"For non-payment of subscription fees"}),n.jsx("li",{children:"At our sole discretion with or without notice"})]}),n.jsx("p",{className:"mt-4",children:"Upon termination, your right to use the service will cease immediately."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Governing Law"}),n.jsx("p",{children:"These terms shall be governed by and construed in accordance with the laws of Pakistan, without regard to its conflict of law provisions."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"12. Changes to Terms"}),n.jsx("p",{children:"We reserve the right to modify these terms at any time. We will notify users of material changes via email or through our service. Continued use of the service after changes constitutes acceptance of the new terms."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"13. Contact Information"}),n.jsx("p",{className:"mb-4",children:"For questions about these Terms & Conditions, please contact us:"}),n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," contact@medmaster.site"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," Peshawar, Khyber Pakhtunkhwa, 25000, Pakistan"]})]})]})]})]})})]}),i0=({onBackToLanding:s})=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[n.jsx("header",{className:"bg-gray-900/50 backdrop-blur-sm border-b border-gray-700",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[n.jsx(ct,{className:"h-5 w-5"}),n.jsx("span",{children:"Back to Home"})]})}),n.jsx("div",{className:"text-2xl font-bold text-white",children:"MedMaster"})]})})}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-gray-700",children:[n.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Return & Refund Policy"}),n.jsxs("div",{className:"text-gray-300 space-y-6",children:[n.jsxs("p",{className:"text-sm text-gray-400",children:[n.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Overview"}),n.jsx("p",{children:"At MedMaster, we are committed to providing high-quality educational services. This Return & Refund Policy outlines the circumstances under which refunds may be provided for our digital educational services."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Digital Service Nature"}),n.jsx("p",{className:"mb-4",children:"MedMaster provides digital educational services including:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Online access to medical question banks"}),n.jsx("li",{children:"Interactive learning modules and case studies"}),n.jsx("li",{children:"Progress tracking and analytics"}),n.jsx("li",{children:"Spaced repetition learning system"}),n.jsx("li",{children:"Premium educational content"})]}),n.jsx("p",{className:"mt-4",children:"As these are digital services that are immediately accessible upon purchase, different refund terms apply compared to physical products."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. 7-Day Money-Back Guarantee"}),n.jsx("p",{className:"mb-4",children:"We offer a 7-day money-back guarantee for new subscribers under the following conditions:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Request must be made within 7 days of initial subscription purchase"}),n.jsx("li",{children:"Account must not have excessive usage (more than 50% of available content accessed)"}),n.jsx("li",{children:"No previous refunds have been issued for the same user"}),n.jsx("li",{children:"Request must be made in good faith with valid reason"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Eligible Refund Scenarios"}),n.jsx("p",{className:"mb-4",children:"Refunds may be considered in the following circumstances:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Technical Issues:"})," Persistent technical problems preventing service access"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Billing Errors:"})," Incorrect charges or duplicate payments"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Service Unavailability:"})," Extended service outages beyond our control"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Accidental Purchases:"})," Unintended subscription activations (within 24 hours)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Medical Circumstances:"})," Documented medical emergencies preventing service use"]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Non-Refundable Situations"}),n.jsx("p",{className:"mb-4",children:"Refunds will not be provided in the following cases:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Change of mind after the 7-day guarantee period"}),n.jsx("li",{children:"Failure to use the service due to personal circumstances"}),n.jsx("li",{children:"Dissatisfaction with exam results or academic performance"}),n.jsx("li",{children:"Account suspension due to terms of service violations"}),n.jsx("li",{children:"Requests made after significant content consumption"}),n.jsx("li",{children:"Subscription renewals (automatic or manual) after the initial period"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Refund Process"}),n.jsx("p",{className:"mb-4",children:"To request a refund:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:["Contact our support team at ",n.jsx("strong",{children:"support@medmaster.site"})]}),n.jsx("li",{children:"Provide your account email and subscription details"}),n.jsx("li",{children:"Explain the reason for your refund request"}),n.jsx("li",{children:"Include any relevant documentation (for technical issues)"}),n.jsx("li",{children:"Allow 3-5 business days for review and processing"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Refund Timeline"}),n.jsx("p",{className:"mb-4",children:"Once a refund is approved:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Credit/Debit Cards:"})," 5-10 business days"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"PayFast:"})," 3-7 business days"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Bank Transfer:"})," 7-14 business days"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Mobile Wallets (JazzCash/EasyPaisa):"})," 1-3 business days"]})]}),n.jsx("p",{className:"mt-4",children:"Refund processing times may vary depending on your bank or payment provider."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Partial Refunds"}),n.jsx("p",{children:"In certain circumstances, we may offer partial refunds calculated on a pro-rata basis for the unused portion of your subscription, particularly in cases of extended service outages or technical issues that significantly impact service availability."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Subscription Cancellation"}),n.jsx("p",{className:"mb-4",children:"You can cancel your subscription at any time:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Access your account settings"}),n.jsx("li",{children:"Navigate to subscription management"}),n.jsx("li",{children:'Select "Cancel Subscription"'}),n.jsx("li",{children:"Confirm cancellation"})]}),n.jsx("p",{className:"mt-4",children:"Cancellation stops future billing but does not automatically trigger a refund for the current period."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Dispute Resolution"}),n.jsxs("p",{children:["If you disagree with our refund decision, you may escalate the matter by contacting our management team at ",n.jsx("strong",{children:"contact@medmaster.site"}),". We will review your case within 7 business days."]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Policy Changes"}),n.jsx("p",{children:"We reserve the right to modify this refund policy at any time. Changes will be communicated via email and posted on our website. The updated policy will apply to future purchases."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"12. Contact Information"}),n.jsx("p",{className:"mb-4",children:"For refund requests or questions about this policy:"}),n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," contact@medmaster.site"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," Peshawar, Khyber Pakhtunkhwa, 25000, Pakistan"]})]})]})]})]})})]}),a0=({onBackToLanding:s})=>n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[n.jsx("header",{className:"bg-gray-900/50 backdrop-blur-sm border-b border-gray-700",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("button",{onClick:s,className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[n.jsx(ct,{className:"h-5 w-5"}),n.jsx("span",{children:"Back to Home"})]})}),n.jsx("div",{className:"text-2xl font-bold text-white",children:"MedMaster"})]})})}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-gray-700",children:[n.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"Service Delivery Policy"}),n.jsxs("div",{className:"text-gray-300 space-y-6",children:[n.jsxs("p",{className:"text-sm text-gray-400",children:[n.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Service Overview"}),n.jsx("p",{children:"MedMaster provides digital educational services delivered entirely online. As a digital platform, we do not ship physical products. This policy outlines how our digital services are delivered and what you can expect from our service delivery process."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Digital Service Delivery"}),n.jsx("p",{className:"mb-4",children:"Our services are delivered digitally through our web platform and include:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Instant Access:"})," Immediate access to subscribed content upon payment confirmation"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"24/7 Availability:"})," Round-the-clock access to all educational materials"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cross-Platform Access:"})," Available on desktop, tablet, and mobile devices"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Cloud-Based Storage:"})," Your progress and data are securely stored in the cloud"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Real-Time Updates:"})," Automatic content updates and new feature releases"]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. Service Activation Timeline"}),n.jsx("p",{className:"mb-4",children:"Service activation times vary by payment method:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Credit/Debit Cards:"})," Instant activation upon payment confirmation"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"PayFast:"})," Instant to 5 minutes after successful payment"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"JazzCash/EasyPaisa:"})," Instant to 10 minutes after payment confirmation"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Bank Transfer:"})," 1-3 business days after payment verification"]})]}),n.jsx("p",{className:"mt-4",children:"If your service is not activated within the expected timeframe, please contact our support team."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Service Features and Content"}),n.jsx("p",{className:"mb-4",children:"Upon subscription activation, you will have access to:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Question Banks:"})," Comprehensive medical question databases"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Clinical Cases:"})," Interactive case studies and scenarios"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Spaced Repetition System:"})," Personalized learning algorithm"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Progress Analytics:"})," Detailed performance tracking and insights"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Mobile App:"})," Full-featured mobile application"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Offline Mode:"})," Download content for offline study"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Expert Support:"})," Access to educational support team"]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Technical Requirements"}),n.jsx("p",{className:"mb-4",children:"To ensure optimal service delivery, please ensure your device meets these requirements:"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Web Browser"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:"Chrome 90+ (Recommended)"}),n.jsx("li",{children:"Firefox 88+"}),n.jsx("li",{children:"Safari 14+"}),n.jsx("li",{children:"Edge 90+"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Internet Connection"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4 text-sm",children:[n.jsx("li",{children:"Minimum: 1 Mbps"}),n.jsx("li",{children:"Recommended: 5+ Mbps"}),n.jsx("li",{children:"Stable connection required"})]})]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Service Availability"}),n.jsx("p",{className:"mb-4",children:"We strive to maintain high service availability:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Uptime Target:"})," 99.5% monthly uptime"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Maintenance Windows:"})," Scheduled during low-usage periods (typically 2-4 AM PKT)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Advance Notice:"})," 24-48 hours notice for planned maintenance"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Emergency Maintenance:"})," Immediate notification via email and platform alerts"]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Content Updates and Delivery"}),n.jsx("p",{className:"mb-4",children:"We continuously improve our educational content:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Regular Updates:"})," New questions and cases added monthly"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Curriculum Alignment:"})," Content updated to match current medical education standards"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Expert Review:"})," All content reviewed by medical professionals"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"User Feedback Integration:"})," Improvements based on user suggestions"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Automatic Delivery:"})," Updates delivered automatically to your account"]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Customer Support Services"}),n.jsx("p",{className:"mb-4",children:"Our support services include:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Technical Support:"})," Help with platform navigation and technical issues"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Educational Guidance:"})," Study tips and learning strategy advice"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Account Management:"})," Subscription and billing support"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Response Times:"})," 24 hours for general inquiries, 4 hours for urgent issues"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Multiple Channels:"})," Email support"]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Service Interruptions"}),n.jsx("p",{className:"mb-4",children:"In case of service interruptions:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"We will notify users immediately via email and platform notifications"}),n.jsx("li",{children:"Estimated resolution time will be provided"}),n.jsx("li",{children:"Regular updates will be posted on our status page"}),n.jsx("li",{children:"Service credits may be applied for extended outages"}),n.jsx("li",{children:"Alternative access methods will be provided when possible"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Data Backup and Security"}),n.jsx("p",{className:"mb-4",children:"We ensure your learning data is protected:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Daily Backups:"})," All user data backed up daily"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Redundant Storage:"})," Data stored in multiple secure locations"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Encryption:"})," All data encrypted in transit and at rest"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Access Controls:"})," Strict access controls and monitoring"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Disaster Recovery:"})," Comprehensive disaster recovery procedures"]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Service Limitations"}),n.jsx("p",{className:"mb-4",children:"Please note the following service limitations:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[n.jsx("li",{children:"Services require active internet connection for most features"}),n.jsx("li",{children:"Offline content has limited functionality"}),n.jsx("li",{children:"Some features may not be available on all devices"}),n.jsx("li",{children:"Content availability may vary by subscription plan"}),n.jsx("li",{children:"Geographic restrictions may apply to certain content"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"12. Contact Information"}),n.jsx("p",{className:"mb-4",children:"For service delivery questions or technical support:"}),n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," contact@medmaster.site"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Address:"})," Peshawar, Khyber Pakhtunkhwa, 25000, Pakistan"]})]})]})]})]})})]}),o0=({onBackToLanding:s})=>{const[e]=Ca(),t=Xt(),{user:r,isAuthenticated:i}=St(),[a,o]=p.useState(null),[c,l]=p.useState(!0),[d,h]=p.useState(!1),[u,m]=p.useState("paddle"),f=e.get("plan");p.useEffect(()=>{if(!i){R.error("Please log in to continue with payment"),t("/pricing");return}if(!f){R.error("No plan selected"),t("/pricing");return}g()},[i,f,t]);const g=async()=>{try{console.log("🔄 Fetching plan details for:",f);try{const v=await ge.getSubscriptionPlans();if(console.log("📊 Supabase data received:",v),v.data){const k=v.data.find(_=>_.name.toLowerCase().includes(f?.toLowerCase()||""));if(k){console.log("✅ Plan found from Supabase:",k),o(k);return}}}catch(v){console.log("⚠️ Supabase fetch failed, using fallback data:",v)}console.log("🔄 Using fallback plan data");const y={starter:{id:1,name:"Starter Plan",price:700,currency:"₨",duration_months:3,features:["Full Content Access","Analytics Dashboard","3 months access","Email Support"]},premium:{id:2,name:"Premium Plan",price:1200,currency:"₨",duration_months:6,features:["Full Content Access","Advanced Analytics","Priority Access to New Content","Custom Questions","Custom Avatars","6 months access","Priority Support"]}},x=f?.toLowerCase()==="premium"?"premium":"starter",N=y[x];if(N)console.log("✅ Using fallback plan:",N),o(N);else throw new Error("Plan not found in fallback data")}catch(y){console.error("❌ Error fetching plan details:",y),R.error("Failed to load plan details"),t("/pricing")}finally{l(!1)}},b=async()=>{if(!a||!r){R.error("Missing plan or user information");return}h(!0);try{const y={success:!1,error:"Payment processing not yet implemented"};if(!y.success)throw new Error(y.error||"Failed to create payment session")}catch(y){console.error("Payment error:",y),R.error(y.message||"Payment initiation failed")}finally{h(!1)}};return c?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xl",children:"Loading payment details..."})}):a?n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[n.jsx("div",{className:"bg-gray-900/50 backdrop-blur-sm border-b border-gray-700",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"flex justify-between items-center py-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("button",{onClick:s,className:"text-blue-400 hover:text-blue-300 transition-colors mr-4",children:"← Back to Home"}),n.jsx("h1",{className:"text-2xl font-bold text-white",children:"Complete Your Purchase"})]})})})}),n.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:n.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700",children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Plan Summary"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-300",children:"Plan:"}),n.jsx("span",{className:"text-white font-semibold",children:a.name})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-300",children:"Duration:"}),n.jsxs("span",{className:"text-white",children:[a.duration_months," months"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-300",children:"Price:"}),n.jsxs("span",{className:"text-white font-bold text-xl",children:[a.currency," ",a.price]})]})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-600",children:[n.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Included Features:"}),n.jsx("ul",{className:"space-y-2",children:a.features?.map((y,x)=>n.jsxs("li",{className:"text-gray-300 flex items-center",children:[n.jsx("span",{className:"text-green-400 mr-2",children:"✓"}),y]},x))||[n.jsxs("li",{className:"text-gray-300 flex items-center",children:[n.jsx("span",{className:"text-green-400 mr-2",children:"✓"}),"Full access to MedMaster features"]},"default")]})]})]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700",children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Payment Method"}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"paddle",checked:u==="paddle",onChange:y=>m(y.target.value),className:"text-blue-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-white font-medium",children:"Credit/Debit Card"}),n.jsx("div",{className:"text-gray-400 text-sm",children:"Secure payment via Paddle"})]})]}),n.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:"paymentMethod",value:"payfast",checked:u==="payfast",onChange:y=>m(y.target.value),className:"text-blue-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-white font-medium",children:"PayFast (PKR)"}),n.jsx("div",{className:"text-gray-400 text-sm",children:"For Pakistani customers"})]})]})]}),n.jsx("button",{onClick:b,disabled:d,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:d?n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):`Pay ${a.currency} ${a.price}`}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx("p",{className:"text-gray-400 text-sm",children:"Secure payment processing. Your data is protected."})})]})]})})]}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center",children:n.jsx("div",{className:"text-white text-xl",children:"Plan not found"})})};function l0({title:s,titleId:e,...t},r){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),s?p.createElement("title",{id:e},s):null,p.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const c0=p.forwardRef(l0),d0=({onBackToLanding:s})=>{const[e]=Ca(),[t,r]=p.useState(""),[i,a]=p.useState(""),[o,c]=p.useState(!0);p.useEffect(()=>{const d=e.get("mode"),h=e.get("oobCode"),u=e.get("continueUrl");if(!d||!h){a("Invalid verification link"),c(!1);return}l(d,u)},[e]);const l=async(d,h)=>{const u=e.get("oobCode"),m=To();try{switch(d){case"verifyEmail":u?(await Uh(m,u),r("Email verified successfully! Redirecting to login..."),setTimeout(()=>{const f=h||"https://medmaster.site/login";window.location.href=f},2e3)):a("Invalid verification code");break;case"resetPassword":a("Password reset is not implemented yet.");break;case"recoverEmail":a("Email recovery is not implemented yet.");break;default:a("Unknown action mode")}}catch(f){console.error("Firebase action error:",f),f.code==="auth/invalid-action-code"?a("This verification link has expired or has already been used."):f.code==="auth/user-disabled"?a("This user account has been disabled."):a("An error occurred while verifying your email. Please try again.")}finally{c(!1)}};return o?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Processing your request..."})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:n.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md w-full mx-4",children:t?n.jsxs(n.Fragment,{children:[n.jsx(c0,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Success!"}),n.jsx("p",{className:"text-gray-600 mb-6",children:t}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to login page..."})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("span",{className:"text-red-600 text-2xl",children:"✕"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),n.jsx("p",{className:"text-gray-600 mb-6",children:i}),n.jsx("button",{onClick:()=>s?s():window.location.href="https://medmaster.site",className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Go to Home"})]})})})};function u0(){const[s,e]=p.useState(!1),[t,r]=p.useState("login"),i=Xt(),{login:a}=St(),o=()=>{r("signup"),e(!0)},c=()=>{r("login"),e(!0)},l=(g,b,y,x,N)=>{console.log("🎉 APP.TSX handleAuthSuccess called with:",{token:g.substring(0,20)+"...",email:b,username:y,subscriptionType:x,userId:N}),localStorage.setItem("medMasterToken",g),localStorage.setItem("medMasterEmail",b),localStorage.setItem("medMasterUsername",y),N&&localStorage.setItem("medMasterUserId",N.toString()),x&&localStorage.setItem("medMasterSubscriptionType",x),console.log("💾 Stored auth data in localStorage"),console.log("🔄 Calling login function..."),a(g,b,y,N||0,x||"demo"),e(!1),console.log("✅ Auth modal closed")},d=()=>{e(!1)},h=()=>{i("/pricing")},u=()=>{i("/documentation")},m=()=>{i("/downloads")},f=()=>{i("/")};return n.jsx(Yg,{children:n.jsxs("div",{className:"App",children:[n.jsxs(yc,{children:[n.jsx(me,{path:"/",element:n.jsx(Kg,{onGetStarted:o,onLogin:c,onNavigateToPricing:h,onNavigateToDocumentation:u,onNavigateToDownloads:m,onAuthSuccess:l})}),n.jsx(me,{path:"/pricing",element:n.jsx(e0,{onBackToLanding:f,onShowLandingLogin:()=>i("/signup")})}),n.jsx(me,{path:"/documentation",element:n.jsx(t0,{onBackToLanding:f})}),n.jsx(me,{path:"/downloads",element:n.jsx(s0,{onBackToLanding:f})}),n.jsx(me,{path:"/privacy-policy",element:n.jsx(r0,{onBackToLanding:f})}),n.jsx(me,{path:"/terms-conditions",element:n.jsx(n0,{onBackToLanding:f})}),n.jsx(me,{path:"/refund-policy",element:n.jsx(i0,{onBackToLanding:f})}),n.jsx(me,{path:"/service-policy",element:n.jsx(a0,{onBackToLanding:f})}),n.jsx(me,{path:"/payment",element:n.jsx(o0,{onBackToLanding:f})}),n.jsx(me,{path:"/login",element:n.jsx(Xo,{onBackToLanding:f,onAuthSuccess:(g,b,y,x,N)=>{l(g,b,y,x,N),i("/")},onSwitchToSignup:()=>i("/signup")})}),n.jsx(me,{path:"/signup",element:n.jsx(Zo,{onBackToLanding:f,onAuthSuccess:(g,b,y,x,N)=>{l(g,b,y,x,N),i("/")},onSwitchToLogin:()=>i("/login")})}),n.jsx(me,{path:"/auth/action",element:n.jsx(d0,{onBackToLanding:f})})]}),s&&n.jsx(Xg,{mode:t,onClose:d,onAuthSuccess:l,onSwitchMode:g=>r(g)})]})})}function h0(){return n.jsx(zg,{children:n.jsx(u0,{})})}function m0(){return n.jsx(qc,{children:n.jsx(h0,{})})}Il.createRoot(document.getElementById("root")).render(n.jsxs(S.StrictMode,{children:[n.jsx(m0,{}),n.jsx(Bg,{position:"top-right",richColors:!0})]}));
//# sourceMappingURL=index-Bui_hsWl.js.map
